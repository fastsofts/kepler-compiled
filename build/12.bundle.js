(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{110:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return s})),n.d(e,"h",(function(){return o})),n.d(e,"d",(function(){return a})),n.d(e,"f",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"e",(function(){return l})),n.d(e,"g",(function(){return h}));var r,i=n(33);!function(t){t.FORMAT_ERROR="FORMAT_ERROR",t.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",t.INVALID_CONFIG="INVALID_CONFIG",t.MISSING_DATA="MISSING_DATA",t.MISSING_TRANSLATION="MISSING_TRANSLATION"}(r||(r={}));var s=function(t){function e(n,r,i){var s=this,o=i?i instanceof Error?i:new Error(String(i)):void 0;return(s=t.call(this,"[@formatjs/intl Error ".concat(n,"] ").concat(r,"\n").concat(o?"\n".concat(o.message,"\n").concat(o.stack):""))||this).code=n,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s,e),s}return Object(i.b)(e,t),e}(Error),o=function(t){function e(e,n){return t.call(this,r.UNSUPPORTED_FORMATTER,e,n)||this}return Object(i.b)(e,t),e}(s),a=function(t){function e(e,n){return t.call(this,r.INVALID_CONFIG,e,n)||this}return Object(i.b)(e,t),e}(s),c=function(t){function e(e,n){return t.call(this,r.MISSING_DATA,e,n)||this}return Object(i.b)(e,t),e}(s),u=function(t){function e(e,n,i){var s=t.call(this,r.FORMAT_ERROR,"".concat(e,"\nLocale: ").concat(n,"\n"),i)||this;return s.locale=n,s}return Object(i.b)(e,t),e}(s),l=function(t){function e(e,n,r,i){var s=t.call(this,"".concat(e,"\nMessageID: ").concat(null==r?void 0:r.id,"\nDefault Message: ").concat(null==r?void 0:r.defaultMessage,"\nDescription: ").concat(null==r?void 0:r.description,"\n"),n,i)||this;return s.descriptor=r,s.locale=n,s}return Object(i.b)(e,t),e}(u),h=function(t){function e(e,n){var i=t.call(this,r.MISSING_TRANSLATION,'Missing message: "'.concat(e.id,'" for locale "').concat(n,'", using ').concat(e.defaultMessage?"default message (".concat("string"==typeof e.defaultMessage?e.defaultMessage:e.defaultMessage.map((function(t){var e;return null!==(e=t.value)&&void 0!==e?e:JSON.stringify(t)})).join(),")"):"id"," as fallback."))||this;return i.descriptor=e,i}return Object(i.b)(e,t),e}(s)},1153:function(t,e,n){"use strict";function r(t,e){return function t(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(r>3)return n;const i={...e};for(const[e,s]of Object.entries(n))s&&"object"==typeof s&&!Array.isArray(s)?i[e]=t(i[e]||{},n[e],r+1):i[e]=n[e];return i}(t||{},e)}n.d(e,"a",(function(){return r}))},1164:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(560);function i(t){try{return JSON.parse(t)}catch(e){throw new Error(`Failed to parse JSON from data starting with "${Object(r.a)(t)}"`)}}},125:function(t,e,n){"use strict";n.r(e),e.default={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795}},134:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(161),i=n(243),s=n(212),o=n(29),a=n(39),c=n(593);const u={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},l={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:u},h={removedProps:u};class f extends r.a{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=e.target||(this.gl.webgl2?36662:34962),this.initialize(e),Object.seal(this)}getElementCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/i.a.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/i.a.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=Object(c.a)("Buffer",t,l),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return"accessor"in(t=Object(c.a)("Buffer",t,h))&&this.setAccessor(t.accessor),this}setAccessor(t){return delete(t=Object.assign({},t)).buffer,this.accessor=new i.a(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:e,offset:n=0,srcOffset:r=0}=t,i=t.byteLength||t.length;Object(a.a)(e);const s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),0!==r||void 0!==i?(Object(o.a)(this.gl),this.gl.bufferSubData(this.target,n,e,r,i)):this.gl.bufferSubData(s,n,e),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(e),this}copyData(t){let{sourceBuffer:e,readOffset:n=0,writeOffset:r=0,size:i}=t;const{gl:s}=this;return Object(o.a)(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,n,r,i),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:e=0,dstOffset:n=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this.gl);const i=Object(s.c)(this.accessor.type||5126,{clamped:!1}),c=this._getAvailableElementCount(e),u=n;let l,h;t?(h=t.length,l=h-u):(l=Math.min(c,r||c),h=u+l);const f=Math.min(c,l);return r=r||f,Object(a.a)(r<=f),t=t||new i(h),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,e,t,n,r),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index,offset:n=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?void 0!==r?this.gl.bindBufferRange(t,e,this.handle,n,r):(Object(a.a)(0===n),this.gl.bindBufferBase(t,e,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?this.gl.bindBufferBase(t,e,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength+e;Object(a.a)(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,this.usage),this.gl.bufferSubData(r,e,t),this.gl.bindBuffer(r,null),this.debugData=t.slice(0,10),this.bytesUsed=n,this._trackAllocatedMemory(n);const o=Object(s.b)(t);return Object(a.a)(o),this.setAccessor(new i.a(this.accessor,{type:o})),this}_setByteLength(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(a.a)(t>=0),this._trackDeallocatedMemory();let n=t;0===t&&(n=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,e),this.gl.bindBuffer(r,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const e=t/Object(s.c)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-e}_inferType(t){this.accessor.type||this.setAccessor(new i.a(this.accessor,{type:Object(s.b)(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}get type(){return o.k.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return o.k.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return o.k.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return o.k.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new i.a(this.accessor,t),this}}},137:function(t,e,n){"use strict";function r(t,e){var n=e&&e.cache?e.cache:l,r=e&&e.serializer?e.serializer:c;return(e&&e.strategy?e.strategy:a)(t,{cache:n,serializer:r})}function i(t,e,n,r){var i,s=null==(i=r)||"number"==typeof i||"boolean"==typeof i?r:n(r),o=e.get(s);return void 0===o&&(o=t.call(this,r),e.set(s,o)),o}function s(t,e,n){var r=Array.prototype.slice.call(arguments,3),i=n(r),s=e.get(i);return void 0===s&&(s=t.apply(this,r),e.set(i,s)),s}function o(t,e,n,r,i){return n.bind(e,t,r,i)}function a(t,e){return o(t,this,1===t.length?i:s,e.cache.create(),e.serializer)}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return h}));var c=function(){return JSON.stringify(arguments)};function u(){this.cache=Object.create(null)}u.prototype.get=function(t){return this.cache[t]},u.prototype.set=function(t,e){this.cache[t]=e};var l={create:function(){return new u}},h={variadic:function(t,e){return o(t,this,s,e.cache.create(),e.serializer)},monadic:function(t,e){return o(t,this,i,e.cache.create(),e.serializer)}}},1376:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(575);class i{constructor(t,e){this.name=void 0,this.type=void 0,this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=t,this.type=e,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Object(r.a)(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Object(r.a)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class s{constructor(t){this.id=void 0,this.stats={},this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(const t of Object.values(this.stats))t.reset();return this}forEach(t){for(const e of Object.values(this.stats))t(e)}getTable(){const t={};return this.forEach(e=>{t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}}),t}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(t=>this._getOrCreate(t))}_getOrCreate(t){const{name:e,type:n}=t;let r=this.stats[e];return r||(r=t instanceof i?t:new i(e,n),this.stats[e]=r),r}}const o={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class a{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props=void 0,this.stats=void 0,this.activeRequestCount=0,this.requestQueue=[],this.requestMap=new Map,this.deferredUpdate=null,this.props={...o,...t},this.stats=new s({id:this.props.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever")}scheduleRequest(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>0;if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(t))return this.requestMap.get(t);const n={handle:t,priority:0,getPriority:e},r=new Promise(t=>(n.resolve=t,n));return this.requestQueue.push(n),this.requestMap.set(t,r),this._issueNewRequests(),r}_issueRequest(t){const{handle:e,resolve:n}=t;let r=!1;const i=()=>{r||(r=!0,this.requestMap.delete(e),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:i}):Promise.resolve({done:i})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout(()=>this._issueNewRequestsAsync(),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==t){this._updateAllRequests();for(let e=0;e<t;++e){const t=this.requestQueue.shift();t&&this._issueRequest(t)}}}_updateAllRequests(){const t=this.requestQueue;for(let e=0;e<t.length;++e){const n=t[e];this._updateRequest(n)||(t.splice(e,1),this.requestMap.delete(n.handle),e--)}t.sort((t,e)=>t.priority-e.priority)}_updateRequest(t){return t.priority=t.getPriority(t.handle),!(t.priority<0)||(t.resolve(null),!1)}}},1386:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return u}));var r=n(605),i="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n";const s={};function o(t){const{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map(t=>t/255)}}function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;if(!("material"in t))return{};const{material:e}=t;return e?o(e):{lighting_uEnabled:!1}}const c={name:"gouraud-lighting",dependencies:[r.a],vs:i,defines:{LIGHTING_VERTEX:1},getUniforms:a},u={name:"phong-lighting",dependencies:[r.a],fs:i,defines:{LIGHTING_FRAGMENT:1},getUniforms:a}},1401:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a}));var r=n(221),i=n(261);const s=()=>{const t=Object(i.b)();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function o(t){const e=s();t=Array.isArray(t)?t:[t];for(const n of t){const t=Object(r.b)(n);e.find(e=>t===e)||e.unshift(t)}}function a(){return s()}},1402:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return i}));var r=n(1403);function i(){return!("object"==typeof t&&"[object process]"===String(t)&&!t.browser)||Object(r.a)()}}).call(this,n(107))},1403:function(t,e,n){"use strict";(function(t){function r(e){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type)return!0;if(void 0!==t&&"object"==typeof t.versions&&Boolean(t.versions.electron))return!0;const n="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,r=e||n;return!!(r&&r.indexOf("Electron")>=0)}n.d(e,"a",(function(){return r}))}).call(this,n(107))},1404:function(t,e,n){"use strict";(function(t){function r(){var e;if(void 0!==t&&void 0!==t.cwd)return t.cwd();const n=null===(e=window.location)||void 0===e?void 0:e.pathname;return(null==n?void 0:n.slice(0,n.lastIndexOf("/")+1))||""}n.d(e,"a",(function(){return r}))}).call(this,n(107))},1406:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return u}));var r=n(425),i=n(1407),s=n(1408),o=n(275),a=n(39);function c(t,e){Object(a.a)(t instanceof r.a||t instanceof i.a||t instanceof s.a);const n=t.constructor,{gl:o,width:c,height:u,format:l,type:h,dataFormat:f,border:d,mipmaps:g}=t;return new n(o,Object.assign({width:c,height:u,format:l,type:h,dataFormat:f,border:d,mipmaps:g},e))}function u(t,e){const{gl:n,width:r,height:i,id:s}=t;return new o.a(n,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:r,height:i,attachments:{36064:t}}))}},1407:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(29),i=n(222);const s=[34069,34070,34071,34072,34073,34074];class o extends i.a{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.b)(t),super(t,Object.assign({},e,{target:34067})),this.initialize(e),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:e=!0,parameters:n={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,e&&this.generateMipmap(t),this.setParameters(n)}),this}subImage(t){let{face:e,data:n,x:r=0,y:i=0,mipmapLevel:s=0}=t;return this._subImage({target:e,data:n,x:r,y:i,mipmapLevel:s})}async setCubeMapImageData(t){let{width:e,height:n,pixels:i,data:o,border:a=0,format:c=6408,type:u=5121}=t;const{gl:l}=this,h=i||o,f=await Promise.all(s.map(t=>{const e=h[t];return Promise.all(Array.isArray(e)?e:[e])}));this.bind(),s.forEach((t,i)=>{f[i].length>1&&!1!==this.opts.mipmaps&&r.k.warn("".concat(this.id," has mipmap and multiple LODs."))(),f[i].forEach((r,i)=>{e&&n?l.texImage2D(t,i,c,e,n,a,c,u,r):l.texImage2D(t,i,c,c,u,r)})}),this.unbind()}setImageDataForFace(t){const{face:e,width:n,height:r,pixels:i,data:s,border:o=0,format:a=6408,type:c=5121}=t,{gl:u}=this,l=i||s;return this.bind(),l instanceof Promise?l.then(n=>this.setImageDataForFace(Object.assign({},t,{face:e,data:n,pixels:n}))):this.width||this.height?u.texImage2D(e,0,a,n,r,o,a,c,l):u.texImage2D(e,0,a,a,c,l),this}}o.FACES=s},1408:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(29),i=n(222),s=n(324),o=n(134);class a extends i.a{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return Object(r.j)(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(t),e=Object.assign({depth:1},e,{target:32879,unpackFlipY:!1}),super(t,e),this.initialize(e),Object.seal(this)}setImageData(t){let{level:e=0,dataFormat:n=6408,width:i,height:a,depth:c=1,border:u=0,format:l,type:h=5121,offset:f=0,data:d,parameters:g={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Object(r.o)(this.gl,g,()=>{ArrayBuffer.isView(d)&&this.gl.texImage3D(this.target,e,n,i,a,c,u,l,h,d),d instanceof o.a&&(this.gl.bindBuffer(35052,d.handle),this.gl.texImage3D(this.target,e,n,i,a,c,u,l,h,f))}),d&&d.byteLength)this._trackAllocatedMemory(d.byteLength,"Texture");else{const t=s.a[this.dataFormat]||4,e=s.c[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*t*e,"Texture")}return this.loaded=!0,this}}},141:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return h})),n.d(e,"e",(function(){return f}));var r=n(33),i=n(1460),s=n(137),o=n(110);function a(t,e,n){return void 0===n&&(n={}),e.reduce((function(e,r){return r in t?e[r]=t[r]:r in n&&(e[r]=n[r]),e}),{})}var c={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:function(t){0},onWarn:function(t){0}};function u(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function l(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,n){t[e]=n}}}}}function h(t){void 0===t&&(t={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}});var e=Intl.RelativeTimeFormat,n=Intl.ListFormat,o=Intl.DisplayNames,a=Object(s.a)((function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new((t=Intl.DateTimeFormat).bind.apply(t,Object(r.d)([void 0],e,!1)))}),{cache:l(t.dateTime),strategy:s.b.variadic}),c=Object(s.a)((function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new((t=Intl.NumberFormat).bind.apply(t,Object(r.d)([void 0],e,!1)))}),{cache:l(t.number),strategy:s.b.variadic}),u=Object(s.a)((function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new((t=Intl.PluralRules).bind.apply(t,Object(r.d)([void 0],e,!1)))}),{cache:l(t.pluralRules),strategy:s.b.variadic});return{getDateTimeFormat:a,getNumberFormat:c,getMessageFormat:Object(s.a)((function(t,e,n,s){return new i.a(t,e,n,Object(r.a)({formatters:{getNumberFormat:c,getDateTimeFormat:a,getPluralRules:u}},s||{}))}),{cache:l(t.message),strategy:s.b.variadic}),getRelativeTimeFormat:Object(s.a)((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new(e.bind.apply(e,Object(r.d)([void 0],t,!1)))}),{cache:l(t.relativeTime),strategy:s.b.variadic}),getPluralRules:u,getListFormat:Object(s.a)((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(n.bind.apply(n,Object(r.d)([void 0],t,!1)))}),{cache:l(t.list),strategy:s.b.variadic}),getDisplayNames:Object(s.a)((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(o.bind.apply(o,Object(r.d)([void 0],t,!1)))}),{cache:l(t.displayNames),strategy:s.b.variadic})}}function f(t,e,n,r){var i,s=t&&t[e];if(s&&(i=s[n]),i)return i;r(new o.h("No ".concat(e," format named: ").concat(n)))}},1417:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(1456),i=n(810),s=n(425),o=n(29);class a{constructor(t,e){let{attributes:n,material:s,pbrDebug:o,imageBasedLightingEnvironment:a,lights:c,useTangents:u}=e;this.gl=t,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},Object(r.b)(t,i.a.GLSL_TEXTURE_LOD)&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],a&&(this.uniforms.u_DiffuseEnvSampler=a.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=a.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=a.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),o&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(n.NORMAL,"HAS_NORMALS"),this.defineIfPresent(n.TANGENT&&u,"HAS_TANGENTS"),this.defineIfPresent(n.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(a,"USE_IBL"),this.defineIfPresent(c,"USE_LIGHTS"),this.defineIfPresent(o,"PBR_DEBUG"),s&&this.parseMaterial(s)}defineIfPresent(t,e){t&&(this.defines[e]=1)}parseTexture(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=t.texture&&t.texture.sampler&&t.texture.sampler.parameters||{},i=t.texture.source.image;let o,a={};i.compressed?(o=i,a={[this.gl.TEXTURE_MIN_FILTER]:i.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:i};const c=new s.a(this.gl,{id:t.name||t.id,parameters:{...r,...a},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...o});this.uniforms[e]=c,this.defineIfPresent(n,n),this.generatedTextures.push(c)}parsePbrMetallicRoughness(t){t.baseColorTexture&&this.parseTexture(t.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=t.baseColorFactor||[1,1,1,1],t.metallicRoughnessTexture&&this.parseTexture(t.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:e=1,roughnessFactor:n=1}=t;this.uniforms.u_MetallicRoughnessValues=[e,n]}parseMaterial(t){if(this.uniforms.pbr_uUnlit=Boolean(t.unlit),t.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(t.pbrMetallicRoughness),t.normalTexture){this.parseTexture(t.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:e=1}=t.normalTexture;this.uniforms.u_NormalScale=e}if(t.occlusionTexture){this.parseTexture(t.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:e=1}=t.occlusionTexture;this.uniforms.u_OcclusionStrength=e}if(t.emissiveTexture&&(this.parseTexture(t.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=t.emissiveFactor||[0,0,0]),"MASK"===t.alphaMode){const{alphaCutoff:e=.5}=t;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=e}else"BLEND"===t.alphaMode&&(o.k.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(t=>t.delete())}}},1432:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=n(0),o=(r=s)&&r.__esModule?r:{default:r};e.default=function(t){var e=t.fill,n=void 0===e?"currentColor":e,r=t.width,s=void 0===r?24:r,a=t.height,c=void 0===a?24:a,u=t.style,l=void 0===u?{}:u,h=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,["fill","width","height","style"]);return o.default.createElement("svg",i({viewBox:"0 0 24 24",style:i({fill:n,width:s,height:c},l)},h),o.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},1433:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=n(0),o=(r=s)&&r.__esModule?r:{default:r};e.default=function(t){var e=t.fill,n=void 0===e?"currentColor":e,r=t.width,s=void 0===r?24:r,a=t.height,c=void 0===a?24:a,u=t.style,l=void 0===u?{}:u,h=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,["fill","width","height","style"]);return o.default.createElement("svg",i({viewBox:"0 0 24 24",style:i({fill:n,width:s,height:c},l)},h),o.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},1455:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(3);class i{constructor(t,e){Object(r.a)(this,"fields",void 0),Object(r.a)(this,"metadata",void 0),function(t,e){if(!t)throw new Error(e||"loader assertion failed.")}(Array.isArray(t)),function(t){const e={};for(const n of t)e[n.name]&&console.warn("Schema: duplicated field name",n.name,n),e[n.name]=!0}(t),this.fields=t,this.metadata=e||new Map}compareTo(t){if(this.metadata!==t.metadata)return!1;if(this.fields.length!==t.fields.length)return!1;for(let e=0;e<this.fields.length;++e)if(!this.fields[e].compareTo(t.fields[e]))return!1;return!0}select(){const t=Object.create(null);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const e of n)t[e]=!0;const s=this.fields.filter(e=>t[e.name]);return new i(s,this.metadata)}selectAt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map(t=>this.fields[t]).filter(Boolean);return new i(r,this.metadata)}assign(t){let e,n=this.metadata;if(t instanceof i){const r=t;e=r.fields,n=s(s(new Map,this.metadata),r.metadata)}else e=t;const r=Object.create(null);for(const t of this.fields)r[t.name]=t;for(const t of e)r[t.name]=t;const o=Object.values(r);return new i(o,n)}}function s(t,e){return new Map([...t||new Map,...e||new Map])}},1456:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return c}));var r=n(810),i=n(29),s=n(39);function o(t,e){return a(t,e)}function a(t,e){return(e=Array.isArray(e)?e:[e]).every(e=>u(t,e))}function c(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in r.b)void 0===t.luma.caps[e]&&(t.luma.caps[e]=u(t,e));return t.luma.caps}function u(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function(t,e){const n=r.b[e];let o;Object(s.a)(n,e);const a=Object(i.j)(t)&&n[1]||n[0];if("function"==typeof a)o=a(t);else if(Array.isArray(a)){o=!0;for(const e of a)o=o&&Boolean(t.getExtension(e))}else"string"==typeof a?o=Boolean(t.getExtension(a)):"boolean"==typeof a?o=a:Object(s.a)(!1);return o}(t,e)),t.luma.caps[e]||i.k.log(2,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}},1457:function(t,e,n){"use strict";function r(t,e,n){switch(t.type){case"Point":return function(t,e,n){const{positions:r}=t,s=i(r,e,n);if(s.length>1)return{type:"MultiPoint",coordinates:s};return{type:"Point",coordinates:s[0]}}(t,e,n);case"LineString":return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;const{positions:r}=t,s=t.pathIndices.value.filter(t=>t>=e&&t<=n),o=s.length>2;if(!o){return{type:"LineString",coordinates:i(r,s[0],s[1])}}const a=[];for(let t=0;t<s.length-1;t++){const e=i(r,s[t],s[t+1]);a.push(e)}return{type:"MultiLineString",coordinates:a}}(t,e,n);case"Polygon":return function t(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;const{positions:s}=e,o=e.polygonIndices.value.filter(t=>t>=n&&t<=r),a=e.primitivePolygonIndices.value.filter(t=>t>=n&&t<=r),c=o.length>2;if(!c){const t=[];for(let e=0;e<a.length-1;e++){const n=a[e],r=a[e+1],o=i(s,n,r);t.push(o)}return{type:"Polygon",coordinates:t}}const u=[];for(let n=0;n<o.length-1;n++){const r=o[n],i=o[n+1],s=t(e,r,i).coordinates;u.push(s)}return{type:"MultiPolygon",coordinates:u}}(t,e,n);default:const r=t;throw new Error("Unsupported geometry type: "+(null==r?void 0:r.type))}}function i(t,e,n){e=e||0,n=n||t.value.length/t.size;const r=[];for(let i=e;i<n;i++){const e=Array();for(let n=i*t.size;n<(i+1)*t.size;n++)e.push(Number(t.value[n]));r.push(e)}return r}n.d(e,"a",(function(){return r}))},1458:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(517),i=n(221),s=n(261),o=n(513),a=n(366),c=n(198);function u(t,e,n,u){Array.isArray(e)||Object(i.a)(e)||(u=void 0,n=e,e=void 0),n=n||{};const l=e,h=Object(a.b)(l,u),f=Object(r.b)(t,h,n);if(!f)return null;n=Object(s.c)(n,f,h);const d=Object(c.c)(t),g=()=>{throw new Error("parseSync called parse (which is async")};return function(t,e,n,r){if(e=Object(o.b)(e,t,n),t.parseTextSync&&"string"==typeof e)return t.parseTextSync(e,n);if(t.parseSync&&e instanceof ArrayBuffer)return t.parseSync(e,n,r);throw new Error(`${t.name} loader: 'parseSync' not supported by this loader, use 'parse' instead. ${r.url||""}`)}(f,t,n,u=Object(a.a)({url:d,_parseSync:g,_parse:g,loaders:e},n,u||null))}},1459:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));function r(t,e,n){if(void 0===n&&(n=Error),!t)throw new n(e)}},155:function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return o}));"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,"undefined"!=typeof document&&document;const i="object"!=typeof r||"[object process]"!==String(r)||r.browser,s="function"==typeof importScripts,o="undefined"!=typeof window&&void 0!==window.orientation,a=void 0!==r&&r.version&&/v([0-9]*)/.exec(r.version);a&&parseFloat(a[1])}).call(this,n(80),n(107))},161:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(29),i=n(607),s=n(200),o=n(39),a=n(188),c=n(776);const u="Resource subclass must define virtual methods";class l{get[Symbol.toStringTag](){return"Resource"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.b)(t);const{id:n,userData:i={}}=e;this.gl=t,this.gl2=t,this.id=n||Object(a.c)(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=e.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,e&&t&&e.filter(Boolean).forEach(t=>t.delete()),this}bind(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}unbind(){this.bind(null)}getParameter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object(s.b)(this.gl,t),Object(o.a)(t);const n=(this.constructor.PARAMETERS||{})[t];if(n){const t=Object(r.j)(this.gl);if(!((!("webgl2"in n)||t)&&(!("extension"in n)||this.gl.getExtension(n.extension)))){const e=n.webgl1,r="webgl2"in n?n.webgl2:n.webgl1;return t?r:e}}return this._getParameter(t,e)}getParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:e,keys:n}=t,i=this.constructor.PARAMETERS||{},o=Object(r.j)(this.gl),a={},c=e||Object.keys(i);for(const e of c){const r=i[e];if(r&&(!("webgl2"in r)||o)&&(!("extension"in r)||this.gl.getExtension(r.extension))){const i=n?Object(s.a)(this.gl,e):e;a[i]=this.getParameter(e,t),n&&"GLenum"===r.type&&(a[i]=Object(s.a)(this.gl,a[i]))}}return a}setParameter(t,e){t=Object(s.b)(this.gl,t),Object(o.a)(t);const n=(this.constructor.PARAMETERS||{})[t];if(n){const t=Object(r.j)(this.gl);if(!((!("webgl2"in n)||t)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(e=Object(s.b)(e))}return this._setParameter(t,e),this}setParameters(t){for(const e in t)this.setParameter(e,t[e]);return this}stubRemovedMethods(t,e,n){return Object(c.a)(this,t,e,n)}initialize(t){}_createHandle(){throw new Error(u)}_deleteHandle(){throw new Error(u)}_bindHandle(t){throw new Error(u)}_getOptsFromHandle(){throw new Error(u)}_getParameter(t,e){throw new Error(u)}_setParameter(t,e){throw new Error(u)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const t=this[Symbol.toStringTag],e=i.a.get("Resource Counts");e.get("Resources Created").incrementCount(),e.get("".concat(t,"s Created")).incrementCount(),e.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag];i.a.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(t,e),this._trackAllocatedMemoryForContext(t,e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=t}_trackAllocatedMemoryForContext(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=i.a.get("Memory Usage".concat(n));r.get("GPU Memory").addCount(t),r.get("".concat(e," Memory")).addCount(t)}_trackDeallocatedMemory(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(t),this._trackDeallocatedMemoryForContext(t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=i.a.get("Memory Usage".concat(e));n.get("GPU Memory").subtractCount(this.byteLength),n.get("".concat(t," Memory")).subtractCount(this.byteLength)}}},171:function(t,e,n){"use strict";n.d(e,"m",(function(){return it})),n.d(e,"a",(function(){return i})),n.d(e,"e",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"f",(function(){return u})),n.d(e,"c",(function(){return l})),n.d(e,"l",(function(){return h})),n.d(e,"j",(function(){return f})),n.d(e,"h",(function(){return d})),n.d(e,"i",(function(){return g})),n.d(e,"k",(function(){return m})),n.d(e,"g",(function(){return p})),n.d(e,"d",(function(){return _}));var r,i,s,o=n(33);function a(t){return t.type===i.literal}function c(t){return t.type===i.argument}function u(t){return t.type===i.number}function l(t){return t.type===i.date}function h(t){return t.type===i.time}function f(t){return t.type===i.select}function d(t){return t.type===i.plural}function g(t){return t.type===i.pound}function m(t){return t.type===i.tag}function p(t){return!(!t||"object"!=typeof t||t.type!==s.number)}function _(t){return!(!t||"object"!=typeof t||t.type!==s.dateTime)}!function(t){t[t.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",t[t.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",t[t.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",t[t.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",t[t.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",t[t.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",t[t.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",t[t.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",t[t.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",t[t.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",t[t.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",t[t.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",t[t.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",t[t.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",t[t.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",t[t.INVALID_TAG=23]="INVALID_TAG",t[t.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",t[t.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",t[t.UNCLOSED_TAG=27]="UNCLOSED_TAG"}(r||(r={})),function(t){t[t.literal=0]="literal",t[t.argument=1]="argument",t[t.number=2]="number",t[t.date=3]="date",t[t.time=4]="time",t[t.select=5]="select",t[t.plural=6]="plural",t[t.pound=7]="pound",t[t.tag=8]="tag"}(i||(i={})),function(t){t[t.number=0]="number",t[t.dateTime=1]="dateTime"}(s||(s={}));var b=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,A=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function E(t){var e={};return t.replace(A,(function(t){var n=t.length;switch(t[0]){case"G":e.era=4===n?"long":5===n?"narrow":"short";break;case"y":e.year=2===n?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=4===n?"short":5===n?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][n-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][n-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][n-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][n-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][n-1];break;case"s":e.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""})),e}var y=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;var v=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,T=/^(@+)?(\+|#+)?[rs]?$/g,B=/(\*)(0+)|(#+)(0+)|(0+)/g,C=/^(0+)$/;function O(t){var e={};return"r"===t[t.length-1]?e.roundingPriority="morePrecision":"s"===t[t.length-1]&&(e.roundingPriority="lessPrecision"),t.replace(T,(function(t,n,r){return"string"!=typeof r?(e.minimumSignificantDigits=n.length,e.maximumSignificantDigits=n.length):"+"===r?e.minimumSignificantDigits=n.length:"#"===n[0]?e.maximumSignificantDigits=n.length:(e.minimumSignificantDigits=n.length,e.maximumSignificantDigits=n.length+("string"==typeof r?r.length:0)),""})),e}function S(t){switch(t){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function w(t){var e;if("E"===t[0]&&"E"===t[1]?(e={notation:"engineering"},t=t.slice(2)):"E"===t[0]&&(e={notation:"scientific"},t=t.slice(1)),e){var n=t.slice(0,2);if("+!"===n?(e.signDisplay="always",t=t.slice(2)):"+?"===n&&(e.signDisplay="exceptZero",t=t.slice(2)),!C.test(t))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=t.length}return e}function I(t){var e=S(t);return e||{}}function R(t){for(var e={},n=0,r=t;n<r.length;n++){var i=r[n];switch(i.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=i.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=i.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=Object(o.a)(Object(o.a)(Object(o.a)({},e),{notation:"scientific"}),i.options.reduce((function(t,e){return Object(o.a)(Object(o.a)({},t),I(e))}),{}));continue;case"engineering":e=Object(o.a)(Object(o.a)(Object(o.a)({},e),{notation:"engineering"}),i.options.reduce((function(t,e){return Object(o.a)(Object(o.a)({},t),I(e))}),{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(i.options[0]);continue;case"integer-width":if(i.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");i.options[0].replace(B,(function(t,n,r,i,s,o){if(n)e.minimumIntegerDigits=r.length;else{if(i&&s)throw new Error("We currently do not support maximum integer digits");if(o)throw new Error("We currently do not support exact integer digits")}return""}));continue}if(C.test(i.stem))e.minimumIntegerDigits=i.stem.length;else if(v.test(i.stem)){if(i.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");i.stem.replace(v,(function(t,n,r,i,s,o){return"*"===r?e.minimumFractionDigits=n.length:i&&"#"===i[0]?e.maximumFractionDigits=i.length:s&&o?(e.minimumFractionDigits=s.length,e.maximumFractionDigits=s.length+o.length):(e.minimumFractionDigits=n.length,e.maximumFractionDigits=n.length),""}));var s=i.options[0];"w"===s?e=Object(o.a)(Object(o.a)({},e),{trailingZeroDisplay:"stripIfInteger"}):s&&(e=Object(o.a)(Object(o.a)({},e),O(s)))}else if(T.test(i.stem))e=Object(o.a)(Object(o.a)({},e),O(i.stem));else{var a=S(i.stem);a&&(e=Object(o.a)(Object(o.a)({},e),a));var c=w(i.stem);c&&(e=Object(o.a)(Object(o.a)({},e),c))}}return e}var x,M={"001":["H","h"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["H","h","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["H","hB","h","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["H","h","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],CV:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["H","hB","h","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["H","h","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["H","h","hB","hb"],HR:["H","hB"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","h","K"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MW:["h","hb","H","hB"],MX:["H","h","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["H","h","hB","hb"],NL:["H","hB"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["H","hB","h","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["H","h","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["H","h","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TL:["H","hB","hb","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["H","h","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function N(t){var e=t.hourCycle;if(void 0===e&&t.hourCycles&&t.hourCycles.length&&(e=t.hourCycles[0]),e)switch(e){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var n,r=t.language;return"root"!==r&&(n=t.maximize().region),(M[n||""]||M[r||""]||M["".concat(r,"-001")]||M["001"])[0]}var F=new RegExp("^".concat(b.source,"*")),L=new RegExp("".concat(b.source,"*$"));function D(t,e){return{start:t,end:e}}var P=!!String.prototype.startsWith&&"_a".startsWith("a",1),U=!!String.fromCodePoint,G=!!Object.fromEntries,j=!!String.prototype.codePointAt,H=!!String.prototype.trimStart,k=!!String.prototype.trimEnd,V=!!Number.isSafeInteger?Number.isSafeInteger:function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t&&Math.abs(t)<=9007199254740991},z=!0;try{z="a"===(null===(x=Z("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu").exec("a"))||void 0===x?void 0:x[0])}catch(t){z=!1}var X,J=P?function(t,e,n){return t.startsWith(e,n)}:function(t,e,n){return t.slice(n,n+e.length)===e},W=U?String.fromCodePoint:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n,r="",i=t.length,s=0;i>s;){if((n=t[s++])>1114111)throw RangeError(n+" is not a valid code point");r+=n<65536?String.fromCharCode(n):String.fromCharCode(55296+((n-=65536)>>10),n%1024+56320)}return r},K=G?Object.fromEntries:function(t){for(var e={},n=0,r=t;n<r.length;n++){var i=r[n],s=i[0],o=i[1];e[s]=o}return e},q=j?function(t,e){return t.codePointAt(e)}:function(t,e){var n=t.length;if(!(e<0||e>=n)){var r,i=t.charCodeAt(e);return i<55296||i>56319||e+1===n||(r=t.charCodeAt(e+1))<56320||r>57343?i:r-56320+(i-55296<<10)+65536}},Q=H?function(t){return t.trimStart()}:function(t){return t.replace(F,"")},Y=k?function(t){return t.trimEnd()}:function(t){return t.replace(L,"")};function Z(t,e){return new RegExp(t,e)}if(z){var $=Z("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");X=function(t,e){var n;return $.lastIndex=e,null!==(n=$.exec(t)[1])&&void 0!==n?n:""}}else X=function(t,e){for(var n=[];;){var r=q(t,e);if(void 0===r||nt(r)||rt(r))break;n.push(r),e+=r>=65536?2:1}return W.apply(void 0,n)};var tt=function(){function t(t,e){void 0===e&&(e={}),this.message=t,this.position={offset:0,line:1,column:1},this.ignoreTag=!!e.ignoreTag,this.locale=e.locale,this.requiresOtherClause=!!e.requiresOtherClause,this.shouldParseSkeletons=!!e.shouldParseSkeletons}return t.prototype.parse=function(){if(0!==this.offset())throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},t.prototype.parseMessage=function(t,e,n){for(var s=[];!this.isEOF();){var o=this.char();if(123===o){if((a=this.parseArgument(t,n)).err)return a;s.push(a.val)}else{if(125===o&&t>0)break;if(35!==o||"plural"!==e&&"selectordinal"!==e){if(60===o&&!this.ignoreTag&&47===this.peek()){if(n)break;return this.error(r.UNMATCHED_CLOSING_TAG,D(this.clonePosition(),this.clonePosition()))}if(60===o&&!this.ignoreTag&&et(this.peek()||0)){if((a=this.parseTag(t,e)).err)return a;s.push(a.val)}else{var a;if((a=this.parseLiteral(t,e)).err)return a;s.push(a.val)}}else{var c=this.clonePosition();this.bump(),s.push({type:i.pound,location:D(c,this.clonePosition())})}}}return{val:s,err:null}},t.prototype.parseTag=function(t,e){var n=this.clonePosition();this.bump();var s=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:i.literal,value:"<".concat(s,"/>"),location:D(n,this.clonePosition())},err:null};if(this.bumpIf(">")){var o=this.parseMessage(t+1,e,!0);if(o.err)return o;var a=o.val,c=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!et(this.char()))return this.error(r.INVALID_TAG,D(c,this.clonePosition()));var u=this.clonePosition();return s!==this.parseTagName()?this.error(r.UNMATCHED_CLOSING_TAG,D(u,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:i.tag,value:s,children:a,location:D(n,this.clonePosition())},err:null}:this.error(r.INVALID_TAG,D(c,this.clonePosition())))}return this.error(r.UNCLOSED_TAG,D(n,this.clonePosition()))}return this.error(r.INVALID_TAG,D(n,this.clonePosition()))},t.prototype.parseTagName=function(){var t,e=this.offset();for(this.bump();!this.isEOF()&&(45===(t=this.char())||46===t||t>=48&&t<=57||95===t||t>=97&&t<=122||t>=65&&t<=90||183==t||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8255&&t<=8256||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039);)this.bump();return this.message.slice(e,this.offset())},t.prototype.parseLiteral=function(t,e){for(var n=this.clonePosition(),r="";;){var s=this.tryParseQuote(e);if(s)r+=s;else{var o=this.tryParseUnquoted(t,e);if(o)r+=o;else{var a=this.tryParseLeftAngleBracket();if(!a)break;r+=a}}}var c=D(n,this.clonePosition());return{val:{type:i.literal,value:r,location:c},err:null}},t.prototype.tryParseLeftAngleBracket=function(){return this.isEOF()||60!==this.char()||!this.ignoreTag&&(et(t=this.peek()||0)||47===t)?null:(this.bump(),"<");var t},t.prototype.tryParseQuote=function(t){if(this.isEOF()||39!==this.char())return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if("plural"===t||"selectordinal"===t)break;return null;default:return null}this.bump();var e=[this.char()];for(this.bump();!this.isEOF();){var n=this.char();if(39===n){if(39!==this.peek()){this.bump();break}e.push(39),this.bump()}else e.push(n);this.bump()}return W.apply(void 0,e)},t.prototype.tryParseUnquoted=function(t,e){if(this.isEOF())return null;var n=this.char();return 60===n||123===n||35===n&&("plural"===e||"selectordinal"===e)||125===n&&t>0?null:(this.bump(),W(n))},t.prototype.parseArgument=function(t,e){var n=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(r.EXPECT_ARGUMENT_CLOSING_BRACE,D(n,this.clonePosition()));if(125===this.char())return this.bump(),this.error(r.EMPTY_ARGUMENT,D(n,this.clonePosition()));var s=this.parseIdentifierIfPossible().value;if(!s)return this.error(r.MALFORMED_ARGUMENT,D(n,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(r.EXPECT_ARGUMENT_CLOSING_BRACE,D(n,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:i.argument,value:s,location:D(n,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(r.EXPECT_ARGUMENT_CLOSING_BRACE,D(n,this.clonePosition())):this.parseArgumentOptions(t,e,s,n);default:return this.error(r.MALFORMED_ARGUMENT,D(n,this.clonePosition()))}},t.prototype.parseIdentifierIfPossible=function(){var t=this.clonePosition(),e=this.offset(),n=X(this.message,e),r=e+n.length;return this.bumpTo(r),{value:n,location:D(t,this.clonePosition())}},t.prototype.parseArgumentOptions=function(t,e,n,a){var c,u=this.clonePosition(),l=this.parseIdentifierIfPossible().value,h=this.clonePosition();switch(l){case"":return this.error(r.EXPECT_ARGUMENT_TYPE,D(u,h));case"number":case"date":case"time":this.bumpSpace();var f=null;if(this.bumpIf(",")){this.bumpSpace();var d=this.clonePosition();if((v=this.parseSimpleArgStyleIfPossible()).err)return v;if(0===(_=Y(v.val)).length)return this.error(r.EXPECT_ARGUMENT_STYLE,D(this.clonePosition(),this.clonePosition()));f={style:_,styleLocation:D(d,this.clonePosition())}}if((T=this.tryParseArgumentClose(a)).err)return T;var g=D(a,this.clonePosition());if(f&&J(null==f?void 0:f.style,"::",0)){var m=Q(f.style.slice(2));if("number"===l)return(v=this.parseNumberSkeletonFromString(m,f.styleLocation)).err?v:{val:{type:i.number,value:n,location:g,style:v.val},err:null};if(0===m.length)return this.error(r.EXPECT_DATE_TIME_SKELETON,g);var p=m;this.locale&&(p=function(t,e){for(var n="",r=0;r<t.length;r++){var i=t.charAt(r);if("j"===i){for(var s=0;r+1<t.length&&t.charAt(r+1)===i;)s++,r++;var o=1+(1&s),a=s<2?1:3+(s>>1),c=N(e);for("H"!=c&&"k"!=c||(a=0);a-- >0;)n+="a";for(;o-- >0;)n=c+n}else n+="J"===i?"H":i}return n}(m,this.locale));var _={type:s.dateTime,pattern:p,location:f.styleLocation,parsedOptions:this.shouldParseSkeletons?E(p):{}};return{val:{type:"date"===l?i.date:i.time,value:n,location:g,style:_},err:null}}return{val:{type:"number"===l?i.number:"date"===l?i.date:i.time,value:n,location:g,style:null!==(c=null==f?void 0:f.style)&&void 0!==c?c:null},err:null};case"plural":case"selectordinal":case"select":var b=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(r.EXPECT_SELECT_ARGUMENT_OPTIONS,D(b,Object(o.a)({},b)));this.bumpSpace();var A=this.parseIdentifierIfPossible(),y=0;if("select"!==l&&"offset"===A.value){if(!this.bumpIf(":"))return this.error(r.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,D(this.clonePosition(),this.clonePosition()));var v;if(this.bumpSpace(),(v=this.tryParseDecimalInteger(r.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,r.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE)).err)return v;this.bumpSpace(),A=this.parseIdentifierIfPossible(),y=v.val}var T,B=this.tryParsePluralOrSelectOptions(t,l,e,A);if(B.err)return B;if((T=this.tryParseArgumentClose(a)).err)return T;var C=D(a,this.clonePosition());return"select"===l?{val:{type:i.select,value:n,options:K(B.val),location:C},err:null}:{val:{type:i.plural,value:n,options:K(B.val),offset:y,pluralType:"plural"===l?"cardinal":"ordinal",location:C},err:null};default:return this.error(r.INVALID_ARGUMENT_TYPE,D(u,h))}},t.prototype.tryParseArgumentClose=function(t){return this.isEOF()||125!==this.char()?this.error(r.EXPECT_ARGUMENT_CLOSING_BRACE,D(t,this.clonePosition())):(this.bump(),{val:!0,err:null})},t.prototype.parseSimpleArgStyleIfPossible=function(){for(var t=0,e=this.clonePosition();!this.isEOF();){switch(this.char()){case 39:this.bump();var n=this.clonePosition();if(!this.bumpUntil("'"))return this.error(r.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,D(n,this.clonePosition()));this.bump();break;case 123:t+=1,this.bump();break;case 125:if(!(t>0))return{val:this.message.slice(e.offset,this.offset()),err:null};t-=1;break;default:this.bump()}}return{val:this.message.slice(e.offset,this.offset()),err:null}},t.prototype.parseNumberSkeletonFromString=function(t,e){var n=[];try{n=function(t){if(0===t.length)throw new Error("Number skeleton cannot be empty");for(var e=[],n=0,r=t.split(y).filter((function(t){return t.length>0}));n<r.length;n++){var i=r[n].split("/");if(0===i.length)throw new Error("Invalid number skeleton");for(var s=i[0],o=i.slice(1),a=0,c=o;a<c.length;a++){if(0===c[a].length)throw new Error("Invalid number skeleton")}e.push({stem:s,options:o})}return e}(t)}catch(t){return this.error(r.INVALID_NUMBER_SKELETON,e)}return{val:{type:s.number,tokens:n,location:e,parsedOptions:this.shouldParseSkeletons?R(n):{}},err:null}},t.prototype.tryParsePluralOrSelectOptions=function(t,e,n,i){for(var s,o=!1,a=[],c=new Set,u=i.value,l=i.location;;){if(0===u.length){var h=this.clonePosition();if("select"===e||!this.bumpIf("="))break;var f=this.tryParseDecimalInteger(r.EXPECT_PLURAL_ARGUMENT_SELECTOR,r.INVALID_PLURAL_ARGUMENT_SELECTOR);if(f.err)return f;l=D(h,this.clonePosition()),u=this.message.slice(h.offset,this.offset())}if(c.has(u))return this.error("select"===e?r.DUPLICATE_SELECT_ARGUMENT_SELECTOR:r.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,l);"other"===u&&(o=!0),this.bumpSpace();var d=this.clonePosition();if(!this.bumpIf("{"))return this.error("select"===e?r.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:r.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,D(this.clonePosition(),this.clonePosition()));var g=this.parseMessage(t+1,e,n);if(g.err)return g;var m=this.tryParseArgumentClose(d);if(m.err)return m;a.push([u,{value:g.val,location:D(d,this.clonePosition())}]),c.add(u),this.bumpSpace(),u=(s=this.parseIdentifierIfPossible()).value,l=s.location}return 0===a.length?this.error("select"===e?r.EXPECT_SELECT_ARGUMENT_SELECTOR:r.EXPECT_PLURAL_ARGUMENT_SELECTOR,D(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(r.MISSING_OTHER_CLAUSE,D(this.clonePosition(),this.clonePosition())):{val:a,err:null}},t.prototype.tryParseDecimalInteger=function(t,e){var n=1,r=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(n=-1);for(var i=!1,s=0;!this.isEOF();){var o=this.char();if(!(o>=48&&o<=57))break;i=!0,s=10*s+(o-48),this.bump()}var a=D(r,this.clonePosition());return i?V(s*=n)?{val:s,err:null}:this.error(e,a):this.error(t,a)},t.prototype.offset=function(){return this.position.offset},t.prototype.isEOF=function(){return this.offset()===this.message.length},t.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},t.prototype.char=function(){var t=this.position.offset;if(t>=this.message.length)throw Error("out of bound");var e=q(this.message,t);if(void 0===e)throw Error("Offset ".concat(t," is at invalid UTF-16 code unit boundary"));return e},t.prototype.error=function(t,e){return{val:null,err:{kind:t,message:this.message,location:e}}},t.prototype.bump=function(){if(!this.isEOF()){var t=this.char();10===t?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=t<65536?1:2)}},t.prototype.bumpIf=function(t){if(J(this.message,t,this.offset())){for(var e=0;e<t.length;e++)this.bump();return!0}return!1},t.prototype.bumpUntil=function(t){var e=this.offset(),n=this.message.indexOf(t,e);return n>=0?(this.bumpTo(n),!0):(this.bumpTo(this.message.length),!1)},t.prototype.bumpTo=function(t){if(this.offset()>t)throw Error("targetOffset ".concat(t," must be greater than or equal to the current offset ").concat(this.offset()));for(t=Math.min(t,this.message.length);;){var e=this.offset();if(e===t)break;if(e>t)throw Error("targetOffset ".concat(t," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},t.prototype.bumpSpace=function(){for(;!this.isEOF()&&nt(this.char());)this.bump()},t.prototype.peek=function(){if(this.isEOF())return null;var t=this.char(),e=this.offset(),n=this.message.charCodeAt(e+(t>=65536?2:1));return null!=n?n:null},t}();function et(t){return t>=97&&t<=122||t>=65&&t<=90}function nt(t){return t>=9&&t<=13||32===t||133===t||t>=8206&&t<=8207||8232===t||8233===t}function rt(t){return t>=33&&t<=35||36===t||t>=37&&t<=39||40===t||41===t||42===t||43===t||44===t||45===t||t>=46&&t<=47||t>=58&&t<=59||t>=60&&t<=62||t>=63&&t<=64||91===t||92===t||93===t||94===t||96===t||123===t||124===t||125===t||126===t||161===t||t>=162&&t<=165||166===t||167===t||169===t||171===t||172===t||174===t||176===t||177===t||182===t||187===t||191===t||215===t||247===t||t>=8208&&t<=8213||t>=8214&&t<=8215||8216===t||8217===t||8218===t||t>=8219&&t<=8220||8221===t||8222===t||8223===t||t>=8224&&t<=8231||t>=8240&&t<=8248||8249===t||8250===t||t>=8251&&t<=8254||t>=8257&&t<=8259||8260===t||8261===t||8262===t||t>=8263&&t<=8273||8274===t||8275===t||t>=8277&&t<=8286||t>=8592&&t<=8596||t>=8597&&t<=8601||t>=8602&&t<=8603||t>=8604&&t<=8607||8608===t||t>=8609&&t<=8610||8611===t||t>=8612&&t<=8613||8614===t||t>=8615&&t<=8621||8622===t||t>=8623&&t<=8653||t>=8654&&t<=8655||t>=8656&&t<=8657||8658===t||8659===t||8660===t||t>=8661&&t<=8691||t>=8692&&t<=8959||t>=8960&&t<=8967||8968===t||8969===t||8970===t||8971===t||t>=8972&&t<=8991||t>=8992&&t<=8993||t>=8994&&t<=9e3||9001===t||9002===t||t>=9003&&t<=9083||9084===t||t>=9085&&t<=9114||t>=9115&&t<=9139||t>=9140&&t<=9179||t>=9180&&t<=9185||t>=9186&&t<=9254||t>=9255&&t<=9279||t>=9280&&t<=9290||t>=9291&&t<=9311||t>=9472&&t<=9654||9655===t||t>=9656&&t<=9664||9665===t||t>=9666&&t<=9719||t>=9720&&t<=9727||t>=9728&&t<=9838||9839===t||t>=9840&&t<=10087||10088===t||10089===t||10090===t||10091===t||10092===t||10093===t||10094===t||10095===t||10096===t||10097===t||10098===t||10099===t||10100===t||10101===t||t>=10132&&t<=10175||t>=10176&&t<=10180||10181===t||10182===t||t>=10183&&t<=10213||10214===t||10215===t||10216===t||10217===t||10218===t||10219===t||10220===t||10221===t||10222===t||10223===t||t>=10224&&t<=10239||t>=10240&&t<=10495||t>=10496&&t<=10626||10627===t||10628===t||10629===t||10630===t||10631===t||10632===t||10633===t||10634===t||10635===t||10636===t||10637===t||10638===t||10639===t||10640===t||10641===t||10642===t||10643===t||10644===t||10645===t||10646===t||10647===t||10648===t||t>=10649&&t<=10711||10712===t||10713===t||10714===t||10715===t||t>=10716&&t<=10747||10748===t||10749===t||t>=10750&&t<=11007||t>=11008&&t<=11055||t>=11056&&t<=11076||t>=11077&&t<=11078||t>=11079&&t<=11084||t>=11085&&t<=11123||t>=11124&&t<=11125||t>=11126&&t<=11157||11158===t||t>=11159&&t<=11263||t>=11776&&t<=11777||11778===t||11779===t||11780===t||11781===t||t>=11782&&t<=11784||11785===t||11786===t||11787===t||11788===t||11789===t||t>=11790&&t<=11798||11799===t||t>=11800&&t<=11801||11802===t||11803===t||11804===t||11805===t||t>=11806&&t<=11807||11808===t||11809===t||11810===t||11811===t||11812===t||11813===t||11814===t||11815===t||11816===t||11817===t||t>=11818&&t<=11822||11823===t||t>=11824&&t<=11833||t>=11834&&t<=11835||t>=11836&&t<=11839||11840===t||11841===t||11842===t||t>=11843&&t<=11855||t>=11856&&t<=11857||11858===t||t>=11859&&t<=11903||t>=12289&&t<=12291||12296===t||12297===t||12298===t||12299===t||12300===t||12301===t||12302===t||12303===t||12304===t||12305===t||t>=12306&&t<=12307||12308===t||12309===t||12310===t||12311===t||12312===t||12313===t||12314===t||12315===t||12316===t||12317===t||t>=12318&&t<=12319||12320===t||12336===t||64830===t||64831===t||t>=65093&&t<=65094}function it(t,e){void 0===e&&(e={}),e=Object(o.a)({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var n=new tt(t,e).parse();if(n.err){var i=SyntaxError(r[n.err.kind]);throw i.location=n.err.location,i.originalMessage=n.err.message,i}return(null==e?void 0:e.captureLocation)||function t(e){e.forEach((function(e){if(delete e.location,f(e)||d(e))for(var n in e.options)delete e.options[n].location,t(e.options[n].value);else u(e)&&p(e.style)||(l(e)||h(e))&&_(e.style)?delete e.style.location:m(e)&&t(e.children)}))}(n.val),n.val}},182:function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"assert failed: gltf")}n.d(e,"a",(function(){return r}))},188:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a}));var r=n(39);const i={};function s(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";i[t]=i[t]||1;const e=i[t]++;return"".concat(t,"-").concat(e)}function o(t){return Object(r.a)("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function a(t){let e=!0;for(const n in t){e=!1;break}return e}},198:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l}));var r=n(77);const i=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,s=/^([-\w.]+\/[-\w.+]+)/;function o(t){const e=i.exec(t);return e?e[1]:""}var a=n(417);function c(t){if(Object(r.i)(t)){return t.url}if(Object(r.b)(t)){return t.name||""}return"string"==typeof t?t:""}function u(t){if(Object(r.i)(t)){const e=t,n=e.headers.get("content-type")||"",r=Object(a.b)(e.url);return function(t){const e=s.exec(t);return e?e[1]:t}(n)||o(r)}if(Object(r.b)(t)){return t.type||""}return"string"==typeof t?o(t):""}function l(t){if(Object(r.i)(t)){return t.headers["content-length"]||-1}if(Object(r.b)(t)){return t.size}return"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}},200:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}));var r=n(39);function i(t,e){if("string"!=typeof e)return e;const n=Number(e);if(!isNaN(n))return n;const i=t[e=e.replace(/^.*\./,"")];return Object(r.a)(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function s(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}},2102:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));const r={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};const i={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;const e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,t=>t/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return void 0!==t.pickingActive&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}}},2103:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(237),i=n(188);const s=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),o=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),a=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),c=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),u={POSITION:{size:3,value:new Float32Array(o)},NORMAL:{size:3,value:new Float32Array(a)},TEXCOORD_0:{size:2,value:new Float32Array(c)}};class l extends r.a{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e=Object(i.c)("cube-geometry")}=t;super({...t,id:e,indices:{size:1,value:new Uint16Array(s)},attributes:{...u,...t.attributes}})}}},2105:function(t,e,n){"use strict";n.d(e,"a",(function(){return R}));var r=n(33),i=n(141),s=n(110),o=["style","currency","currencyDisplay","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem"];function a(t,e,n){var r=t.locale,s=t.formats,a=t.onError;void 0===n&&(n={});var c=n.format,u=c&&Object(i.e)(s,"number",c,a)||{};return e(r,Object(i.d)(n,o,u))}function c(t,e,n,r){void 0===r&&(r={});try{return a(t,e,r).format(n)}catch(e){t.onError(new s.c("Error formatting number.",t.locale,e))}return String(n)}function u(t,e,n,r){void 0===r&&(r={});try{return a(t,e,r).formatToParts(n)}catch(e){t.onError(new s.c("Error formatting number.",t.locale,e))}return[]}var l=n(432),h=["numeric","style"];function f(t,e,n,r,o){void 0===o&&(o={}),r||(r="second"),Intl.RelativeTimeFormat||t.onError(new l.b('Intl.RelativeTimeFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-relativetimeformat"\n',l.a.MISSING_INTL_API));try{return function(t,e,n){var r=t.locale,s=t.formats,o=t.onError;void 0===n&&(n={});var a=n.format,c=!!a&&Object(i.e)(s,"relative",a,o)||{};return e(r,Object(i.d)(n,h,c))}(t,e,o).format(n,r)}catch(e){t.onError(new s.c("Error formatting relative time.",t.locale,e))}return String(n)}var d=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function g(t,e,n,s){var o=t.locale,a=t.formats,c=t.onError,u=t.timeZone;void 0===s&&(s={});var l=s.format,h=Object(r.a)(Object(r.a)({},u&&{timeZone:u}),l&&Object(i.e)(a,e,l,c)),f=Object(i.d)(s,d,h);return"time"!==e||f.hour||f.minute||f.second||f.timeStyle||f.dateStyle||(f=Object(r.a)(Object(r.a)({},f),{hour:"numeric",minute:"numeric"})),n(o,f)}function m(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=void 0===o?{}:o,c="string"==typeof i?new Date(i||0):i;try{return g(t,"date",e,a).format(c)}catch(e){t.onError(new s.c("Error formatting date.",t.locale,e))}return String(c)}function p(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=void 0===o?{}:o,c="string"==typeof i?new Date(i||0):i;try{return g(t,"time",e,a).format(c)}catch(e){t.onError(new s.c("Error formatting time.",t.locale,e))}return String(c)}function _(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],a=n[1],c=n[2],u=void 0===c?{}:c,l=t.timeZone,h=t.locale,f=t.onError,g=Object(i.d)(u,d,l?{timeZone:l}:{});try{return e(h,g).formatRange(o,a)}catch(e){f(new s.c("Error formatting date time range.",t.locale,e))}return String(o)}function b(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=void 0===o?{}:o,c="string"==typeof i?new Date(i||0):i;try{return g(t,"date",e,a).formatToParts(c)}catch(e){t.onError(new s.c("Error formatting date.",t.locale,e))}return[]}function A(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=void 0===o?{}:o,c="string"==typeof i?new Date(i||0):i;try{return g(t,"time",e,a).formatToParts(c)}catch(e){t.onError(new s.c("Error formatting time.",t.locale,e))}return[]}var E=["type"];function y(t,e,n,r){var o=t.locale,a=t.onError;void 0===r&&(r={}),Intl.PluralRules||a(new l.b('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',l.a.MISSING_INTL_API));var c=Object(i.d)(r,E);try{return e(o,c).select(n)}catch(t){a(new s.c("Error formatting plural.",o,t))}return"other"}var v=n(818),T=["type","style"],B=Date.now();function C(t,e,n,r){void 0===r&&(r={});var i=O(t,e,n,r).reduce((function(t,e){var n=e.value;return"string"!=typeof n?t.push(n):"string"==typeof t[t.length-1]?t[t.length-1]+=n:t.push(n),t}),[]);return 1===i.length?i[0]:0===i.length?"":i}function O(t,e,n,o){var a=t.locale,c=t.onError;void 0===o&&(o={}),Intl.ListFormat||c(new l.b('Intl.ListFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-listformat"\n',l.a.MISSING_INTL_API));var u=Object(i.d)(o,T);try{var h={},f=n.map((function(t,e){if("object"==typeof t){var n=function(t){return"".concat(B,"_").concat(t,"_").concat(B)}(e);return h[n]=t,n}return String(t)}));return e(a,u).formatToParts(f).map((function(t){return"literal"===t.type?t:Object(r.a)(Object(r.a)({},t),{value:h[t.value]||t.value})}))}catch(t){c(new s.c("Error formatting list.",a,t))}return n}var S=["style","type","fallback","languageDisplay"];function w(t,e,n,r){var o=t.locale,a=t.onError;Intl.DisplayNames||a(new l.b('Intl.DisplayNames is not available in this environment.\nTry polyfilling it using "@formatjs/intl-displaynames"\n',l.a.MISSING_INTL_API));var c=Object(i.d)(r,S);try{return e(o,c).of(n)}catch(t){a(new s.c("Error formatting display name.",o,t))}}function I(t){var e;t.onWarn&&t.defaultRichTextElements&&"string"==typeof((e=t.messages||{})?e[Object.keys(e)[0]]:void 0)&&t.onWarn('[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. \nPlease consider using "@formatjs/cli" to pre-compile your messages for performance.\nFor more details see https://formatjs.io/docs/getting-started/message-distribution')}function R(t,e){var n=Object(i.b)(e),o=Object(r.a)(Object(r.a)({},i.a),t),a=o.locale,l=o.defaultLocale,h=o.onError;return a?!Intl.NumberFormat.supportedLocalesOf(a).length&&h?h(new s.f('Missing locale data for locale: "'.concat(a,'" in Intl.NumberFormat. Using default locale: "').concat(l,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(a).length&&h&&h(new s.f('Missing locale data for locale: "'.concat(a,'" in Intl.DateTimeFormat. Using default locale: "').concat(l,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):(h&&h(new s.d('"locale" was not configured, using "'.concat(l,'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details'))),o.locale=o.defaultLocale||"en"),I(o),Object(r.a)(Object(r.a)({},o),{formatters:n,formatNumber:c.bind(null,o,n.getNumberFormat),formatNumberToParts:u.bind(null,o,n.getNumberFormat),formatRelativeTime:f.bind(null,o,n.getRelativeTimeFormat),formatDate:m.bind(null,o,n.getDateTimeFormat),formatDateToParts:b.bind(null,o,n.getDateTimeFormat),formatTime:p.bind(null,o,n.getDateTimeFormat),formatDateTimeRange:_.bind(null,o,n.getDateTimeFormat),formatTimeToParts:A.bind(null,o,n.getDateTimeFormat),formatPlural:y.bind(null,o,n.getPluralRules),formatMessage:v.a.bind(null,o,n),$t:v.a.bind(null,o,n),formatList:C.bind(null,o,n.getListFormat),formatListToParts:O.bind(null,o,n.getListFormat),formatDisplayName:w.bind(null,o,n.getDisplayNames)})}},211:function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}n.d(e,"a",(function(){return r}))},212:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return o}));function r(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function i(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function s(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:s}=t;const o=n*i;s=s||new Uint8Array(o);for(let t=0;t<r/2;++t){const n=t*o,i=(r-t-1)*o;s.set(e.subarray(n,n+o)),e.copyWithin(n,i,i+o),e.set(s,i)}}function o(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),s=Math.round(r/2),o=new Uint8Array(i*s*4);for(let t=0;t<s;t++)for(let r=0;r<i;r++)for(let s=0;s<4;s++)o[4*(t*i+r)+s]=e[4*(2*t*n+2*r)+s];return{data:o,width:i,height:s}}},2140:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(393),i=n(662),s=n(221),o=n(261),a=n(366),c=n(513),u=n(198),l=n(517),h=n(540);async function f(t,e,n,d){const g=Array.isArray(e)?e:void 0;Array.isArray(e)||Object(s.a)(e)||(d=void 0,n=e,e=void 0),t=await t,n=n||{};const m=Object(u.c)(t),p=await Object(l.a)(t,e,n);return p?(n=Object(o.c)(n,p,g,m),d=Object(a.a)({url:m,_parseInBatches:f,_parse:h.a,loaders:g},n,d||null),await async function(t,e,n,s){const o=await async function(t,e,n,s){const o=await Object(c.c)(e,n),a=await async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t;for await(const t of e)n=t(n);return n}(o,(null==n?void 0:n.transforms)||[]);if(t.parseInBatches)return t.parseInBatches(a,n,s);return async function*(t,e,n,s){const o=await Object(i.a)(t),a=function(t,e){const n=Object(r.isTable)(t)?Object(r.makeBatchFromTable)(t):{shape:"unknown",batchType:"data",data:t,length:Array.isArray(t)?t.length:1};return n.mimeType=e.mimeTypes[0],n}(await Object(h.a)(o,e,{...n,mimeType:e.mimeTypes[0]},s),e);yield a}(a,t,n,s)}(t,e,n,s);if(!n.metadata)return o;const a={shape:"metadata",batchType:"metadata",metadata:{_loader:t,_context:s},data:[],bytesUsed:0};return async function*(t){yield a,yield*t}(o)}(p,t,n,d)):[]}},2141:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null}},2142:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={name:"ink",uniforms:{strength:{value:.25,min:0,softMax:1}},fs:"uniform float strength;\n\nvec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 dx = vec2(1.0 / texSize.x, 0.0);\n  vec2 dy = vec2(0.0, 1.0 / texSize.y);\n  vec4 color = texture2D(texture, texCoord);\n  float bigTotal = 0.0;\n  float smallTotal = 0.0;\n  vec3 bigAverage = vec3(0.0);\n  vec3 smallAverage = vec3(0.0);\n  for (float x = -2.0; x <= 2.0; x += 1.0) {\n    for (float y = -2.0; y <= 2.0; y += 1.0) {\n      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;\n      bigAverage += sample;\n      bigTotal += 1.0;\n      if (abs(x) + abs(y) < 2.0) {\n        smallAverage += sample;\n        smallTotal += 1.0;\n      }\n    }\n  }\n  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);\n  float power = strength * strength * strength * strength * strength;\n  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);\n}\n",passes:[{sampler:!0}]}},2143:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={name:"brightnessContrast",uniforms:{brightness:{value:0,min:-1,max:1},contrast:{value:0,min:-1,max:1}},fs:"uniform float brightness;\nuniform float contrast;\n\nvec4 brightnessContrast_filterColor(vec4 color) {\n  color.rgb += brightness;\n  if (contrast > 0.0) {\n    color.rgb = (color.rgb - 0.5) / (1.0 - contrast) + 0.5;\n  } else {\n    color.rgb = (color.rgb - 0.5) * (1.0 + contrast) + 0.5;\n  }\n  return color;\n}\n\nvec4 brightnessContrast_filterColor(vec4 color, vec2 texSize, vec2 texCoords) {\n  return brightnessContrast_filterColor(color);\n}\n",passes:[{filter:!0}]}},2144:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={name:"hueSaturation",uniforms:{hue:{value:0,min:-1,max:1},saturation:{value:0,min:-1,max:1}},fs:"uniform float hue;\nuniform float saturation;\n\nvec4 hueSaturation_filterColor(vec4 color) {\n  float angle = hue * 3.14159265;\n  float s = sin(angle), c = cos(angle);\n  vec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;\n  float len = length(color.rgb);\n  color.rgb = vec3(\n    dot(color.rgb, weights.xyz),\n    dot(color.rgb, weights.zxy),\n    dot(color.rgb, weights.yzx)\n  );\n  float average = (color.r + color.g + color.b) / 3.0;\n  if (saturation > 0.0) {\n    color.rgb += (average - color.rgb) * (1.0 - 1.0 / (1.001 - saturation));\n  } else {\n    color.rgb += (average - color.rgb) * (-saturation);\n  }\n\n  return color;\n}\n\nvec4 hueSaturation_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  return hueSaturation_filterColor(color);\n}\n",passes:[{filter:!0}]}},2145:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={name:"vibrance",uniforms:{amount:{value:0,min:-1,max:1}},fs:"uniform float amount;\n\nvec4 vibrance_filterColor(vec4 color) {\n  float average = (color.r + color.g + color.b) / 3.0;\n  float mx = max(color.r, max(color.g, color.b));\n  float amt = (mx - average) * (-amount * 3.0);\n  color.rgb = mix(color.rgb, vec3(mx), amt);\n  return color;\n}\n\nvec4 vibrance_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  return vibrance_filterColor(color);\n}\n",passes:[{filter:!0}]}},2146:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={name:"sepia",uniforms:{amount:{value:.5,min:0,max:1}},fs:"uniform float amount;\n\nvec4 sepia_filterColor(vec4 color) {\n  float r = color.r;\n  float g = color.g;\n  float b = color.b;\n\n  color.r =\n    min(1.0, (r * (1.0 - (0.607 * amount))) + (g * (0.769 * amount)) + (b * (0.189 * amount)));\n  color.g = min(1.0, (r * 0.349 * amount) + (g * (1.0 - (0.314 * amount))) + (b * 0.168 * amount));\n  color.b = min(1.0, (r * 0.272 * amount) + (g * 0.534 * amount) + (b * (1.0 - (0.869 * amount))));\n\n  return color;\n}\n\nvec4 sepia_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  return sepia_filterColor(color);\n}\n",passes:[{filter:!0}]}},2147:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={name:"dotScreen",uniforms:{center:[.5,.5],angle:{value:1.1,softMin:0,softMax:Math.PI/2},size:{value:3,min:1,softMin:3,softMax:20}},fs:"uniform vec2 center;\nuniform float angle;\nuniform float size;\n\nfloat pattern(vec2 texSize, vec2 texCoord) {\n  float scale = 3.1415 / size;\n\n  float s = sin(angle), c = cos(angle);\n  vec2 tex = texCoord * texSize - center * texSize;\n  vec2 point = vec2(\n    c * tex.x - s * tex.y,\n    s * tex.x + c * tex.y\n  ) * scale;\n  return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvec4 dotScreen_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  float average = (color.r + color.g + color.b) / 3.0;\n  return vec4(vec3(average * 10.0 - 5.0 + pattern(texSize, texCoord)), color.a);\n}\n",passes:[{filter:!0}]}},2148:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={name:"colorHalftone",uniforms:{center:[.5,.5],angle:{value:1.1,softMin:0,softMax:Math.PI/2},size:{value:4,min:1,softMin:3,softMax:20}},fs:"uniform vec2 center;\nuniform float angle;\nuniform float size;\n\nfloat scale = 3.1514 / size;\n\nfloat pattern(float angle, vec2 texSize, vec2 texCoord) {\n  float s = sin(angle), c = cos(angle);\n  vec2 tex = texCoord * texSize - center * texSize;\n  vec2 point = vec2(\n\tc * tex.x - s * tex.y,\n\ts * tex.x + c * tex.y\n  ) * scale;\n  return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  vec3 cmy = 1.0 - color.rgb;\n  float k = min(cmy.x, min(cmy.y, cmy.z));\n  cmy = (cmy - k) / (1.0 - k);\n  cmy = clamp(\n\tcmy * 10.0 - 3.0 + vec3(\n    pattern(angle + 0.26179, texSize, texCoord),\n\t  pattern(angle + 1.30899, texSize, texCoord),\n    pattern(angle, texSize, texCoord)\n  ),\n\t0.0,\n\t1.0\n  );\n  k = clamp(k * 10.0 - 5.0 + pattern(angle + 0.78539, texSize, texCoord), 0.0, 1.0);\n  return vec4(1.0 - cmy - k, color.a);\n}\n",passes:[{filter:!0}]}},2149:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={name:"noise",uniforms:{amount:{value:.5,min:0,max:1}},fs:"uniform float amount;\n\nfloat rand(vec2 co) {\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec4 noise_filterColor(vec4 color, vec2 texCoord) {\n  float diff = (rand(texCoord) - 0.5) * amount;\n  color.r += diff;\n  color.g += diff;\n  color.b += diff;\n  return color;\n}\n\nvec4 noise_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  return noise_filterColor(color, texCoord);\n}\n",passes:[{filter:!0}]}},2150:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={name:"triangleBlur",uniforms:{radius:{value:20,min:0,softMax:100},delta:{value:[1,0],private:!0}},fs:"uniform float radius;\nuniform vec2 delta;\n\nvec4 triangleBlur_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 adjustedDelta = delta * radius / texSize;\n\n  vec4 color = vec4(0.0);\n  float total = 0.0;\n  float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n  for (float t = -30.0; t <= 30.0; t++) {\n    float percent = (t + offset - 0.5) / 30.0;\n    float weight = 1.0 - abs(percent);\n    vec4 sample = texture2D(texture, texCoord + adjustedDelta * percent);\n    sample.rgb *= sample.a;\n\n    color += sample * weight;\n    total += weight;\n  }\n\n  color = color / total;\n  color.rgb /= color.a + 0.00001;\n\n  return color;\n}\n",dependencies:[n(357).a],passes:[{sampler:!0,uniforms:{delta:[1,0]}},{sampler:!0,uniforms:{delta:[0,1]}}]}},2151:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={name:"zoomBlur",uniforms:{center:[.5,.5],strength:{value:.3,min:0,softMax:1}},fs:"\nuniform vec2 center;\nuniform float strength;\n\nvec4 zoomBlur_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec4 color = vec4(0.0);\n  float total = 0.0;\n  vec2 toCenter = center * texSize - texCoord * texSize;\n  float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n  for (float t = 0.0; t <= 40.0; t++) {\n    float percent = (t + offset) / 40.0;\n    float weight = 4.0 * (percent - percent * percent);\n    vec4 sample = texture2D(texture, texCoord + toCenter * percent * strength / texSize);\n    sample.rgb *= sample.a;\n\n    color += sample * weight;\n    total += weight;\n  }\n\n  color = color / total;\n  color.rgb /= color.a + 0.00001;\n\n  return color;\n}\n",dependencies:[n(357).a],passes:[{sampler:!0}]}},2152:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={name:"tiltShift",uniforms:{blurRadius:{value:15,min:0,max:50},gradientRadius:{value:200,min:0,max:400},start:[0,0],end:[1,1],invert:{value:!1,private:!0}},fs:"uniform float blurRadius;\nuniform float gradientRadius;\nuniform vec2 start;\nuniform vec2 end;\nuniform bool invert;\n\nvec2 tiltShift_getDelta(vec2 texSize) {\n  vec2 vector = normalize((end - start) * texSize);\n  return invert ? vec2(-vector.y, vector.x) : vector;\n}\n\nvec4 tiltShift_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec4 color = vec4(0.0);\n  float total = 0.0;\n  float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n  vec2 normal = normalize(vec2((start.y - end.y) * texSize.y, (end.x - start.x) * texSize.x));\n  float radius = smoothstep(0.0, 1.0,\n    abs(dot(texCoord * texSize - start * texSize, normal)) / gradientRadius) * blurRadius;\n\n  for (float t = -30.0; t <= 30.0; t++) {\n    float percent = (t + offset - 0.5) / 30.0;\n    float weight = 1.0 - abs(percent);\n    vec4 sample = texture2D(texture, texCoord + tiltShift_getDelta(texSize) / texSize * percent * radius);\n    sample.rgb *= sample.a;\n\n    color += sample * weight;\n    total += weight;\n  }\n\n  color = color / total;\n  color.rgb /= color.a + 0.00001;\n\n  return color;\n}\n",dependencies:[n(357).a],passes:[{sampler:!0,uniforms:{invert:!1}},{sampler:!0,uniforms:{invert:!0}}]}},2153:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={name:"edgeWork",uniforms:{radius:{value:2,min:1,softMax:50},delta:{value:[1,0],private:!0}},fs:"uniform float radius;\nuniform vec2 delta;\n\nvec4 edgeWork_sampleColor1(sampler2D source, vec2 texSize, vec2 texCoord) {\n  vec2 relativeDelta = radius * delta / texSize;\n\n  vec2 color = vec2(0.0);\n  vec2 total = vec2(0.0);\n  float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n  for (float t = -30.0; t <= 30.0; t++) {\n    float percent = (t + offset - 0.5) / 30.0;\n    float weight = 1.0 - abs(percent);\n    vec3 sampleColor = texture2D(source, texCoord + relativeDelta * percent).rgb;\n    float average = (sampleColor.r + sampleColor.g + sampleColor.b) / 3.0;\n    color.x += average * weight;\n    total.x += weight;\n    if (abs(t) < 15.0) {\n      weight = weight * 2.0 - 1.0;\n      color.y += average * weight;\n      total.y += weight;\n    }\n  }\n  return vec4(color / total, 0.0, 1.0);\n}\n\nvec4 edgeWork_sampleColor2(sampler2D source, vec2 texSize, vec2 texCoord) {\n  vec2 relativeDelta = radius * delta / texSize;\n\n  vec2 color = vec2(0.0);\n  vec2 total = vec2(0.0);\n  float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n  for (float t = -30.0; t <= 30.0; t++) {\n    float percent = (t + offset - 0.5) / 30.0;\n    float weight = 1.0 - abs(percent);\n    vec2 sampleColor = texture2D(source, texCoord + relativeDelta * percent).xy;\n    color.x += sampleColor.x * weight;\n    total.x += weight;\n    if (abs(t) < 15.0) {\n      weight = weight * 2.0 - 1.0;\n      color.y += sampleColor.y * weight;\n      total.y += weight;\n    }\n  }\n  float c = clamp(10000.0 * (color.y / total.y - color.x / total.x) + 0.5, 0.0, 1.0);\n  return vec4(c, c, c, 1.0);\n}\n",dependencies:[n(357).a],passes:[{sampler:"edgeWork_sampleColor1",uniforms:{delta:[1,0]}},{sampler:"edgeWork_sampleColor2",uniforms:{delta:[0,1]}}]}},2154:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={name:"vignette",fs:"uniform float radius;\nuniform float amount;\n\nvec4 vignette_filterColor(vec4 color, vec2 texCoord) {\n  float dist = distance(texCoord, vec2(0.5, 0.5));\n  float ratio = smoothstep(0.8, radius * 0.799, dist * (amount + radius));\n  return color.rgba * ratio + (1.0 - ratio)*vec4(0.0, 0.0, 0.0, 1.0);\n}\n\nvec4 vignette_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  return vignette_filterColor(color, texCoord);\n}\n",uniforms:{radius:{value:.5,min:0,max:1},amount:{value:.5,min:0,max:1}},passes:[{filter:!0}]}},2155:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={name:"magnify",uniforms:{screenXY:[0,0],radiusPixels:200,zoom:2,borderWidthPixels:0,borderColor:[255,255,255,255]},fs:"uniform vec2 screenXY;\nuniform float radiusPixels;\nuniform float zoom;\nuniform float borderWidthPixels;\nuniform vec4 borderColor;\n\nvec4 magnify_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 pos = vec2(screenXY.x, 1.0 - screenXY.y);\n  float dist = distance(texCoord * texSize, pos * texSize);\n  if (dist < radiusPixels) {\n    return texture2D(texture, (texCoord - pos) / zoom + pos);\n  }\n\n  if (dist <= radiusPixels + borderWidthPixels) {\n    return borderColor;\n  }\n  return texture2D(texture, texCoord);\n}\n",passes:[{sampler:!0}]}},2156:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={name:"hexagonalPixelate",uniforms:{center:{value:[.5,.5],hint:"screenspace"},scale:{value:10,min:1,softMin:5,softMax:50}},fs:"uniform vec2 center;\nuniform float scale;\n\nvec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 tex = (texCoord * texSize - center * texSize) / scale;\n  tex.y /= 0.866025404;\n  tex.x -= tex.y * 0.5;\n\n  vec2 a;\n  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {\n    a = vec2(floor(tex.x), floor(tex.y));\n  }\n  else a = vec2(ceil(tex.x), ceil(tex.y));\n  vec2 b = vec2(ceil(tex.x), floor(tex.y));\n  vec2 c = vec2(floor(tex.x), ceil(tex.y));\n\n  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);\n  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);\n  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);\n  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);\n\n  float alen = length(TEX - A);\n  float blen = length(TEX - B);\n  float clen = length(TEX - C);\n\n  vec2 choice;\n  if (alen < blen) {\n    if (alen < clen) choice = a;\n    else choice = c;\n  } else {\n    if (blen < clen) choice = b;\n    else choice = c;\n  }\n\n  choice.x += choice.y * 0.5;\n  choice.y *= 0.866025404;\n  choice *= scale / texSize;\n\n  return texture2D(texture, choice + center);\n}\n",passes:[{sampler:!0}]}},2157:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(798),i=n(237);const s=[-1,-1,1,-1,-1,1,1,1];class o extends r.a{constructor(t,e){const n=s.map(t=>-1===t?0:t);super(t,Object.assign({},e,{vs:"attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",geometry:new i.a({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(s)},aTexCoord:{size:2,value:new Float32Array(n)},aCoordinate:{size:2,value:new Float32Array(n)}}})})),this.setVertexCount(4)}}},2159:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(29),i=n(161),s=n(134),o=n(188);class a extends i.a{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return Object(r.j)(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(t),super(t,e),this.initialize(e),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Object(o.a)(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(const e in t)this.setBuffer(e,t[e])}),this}setBuffer(t,e){const n=this._getVaryingIndex(t),{buffer:i,byteSize:s,byteOffset:o}=this._getBufferParams(e);return n<0?(this.unused[t]=i,r.k.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[n]=e,this.bindOnUse||this._bindBuffer(n,i,o,s),this)}begin(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let e,n,r;return t instanceof s.a==!1?(r=t.buffer,n=t.byteSize,e=t.byteOffset):r=t,void 0===e&&void 0===n||(e=e||0,n=n||r.byteLength-e),{buffer:r,byteOffset:e,byteSize:n}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const e=Number(t);return Number.isFinite(e)?e:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:e,byteSize:n,byteOffset:r}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,e,r,n)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;const i=e&&e.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,t,i,n,r):this.gl.bindBufferBase(35982,t,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}},2160:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(77),i=n(221),s=n(802),o=n(540);async function a(t,e,n,a){let c,u;Array.isArray(e)||Object(i.a)(e)?(c=e,u=n):(c=[],u=e);const l=Object(s.a)(u);let h=t;return"string"==typeof t&&(h=await l(t)),Object(r.b)(t)&&(h=await l(t)),Array.isArray(c),await Object(o.a)(h,c,u)}},2161:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(1457),i=n(958),s=n(959);function o(t,e){var n;if(!(e=null===(n=e)||void 0===n?void 0:n.toLowerCase())||!t)return null;let o;switch(e){case"geoarrow.multipolygon":o=function(t){const e=[];for(let n=0;n<t.length;n++){const r=t.get(n),i=[];for(let t=0;r&&t<(null==r?void 0:r.length);t++){const e=null==r?void 0:r.get(t),n=[];for(let t=0;e&&t<e.length;t++){const r=e.get(t),i=Array.from(r);n.push(i)}i.push(n)}e.push(i)}return{type:"MultiPolygon",coordinates:e}}(t);break;case"geoarrow.polygon":o=function(t){const e=[];for(let n=0;t&&n<t.length;n++){const r=t.get(n),i=[];for(let t=0;r&&t<r.length;t++){const e=r.get(t),n=Array.from(e);i.push(n)}e.push(i)}return{type:"Polygon",coordinates:e}}(t);break;case"geoarrow.multipoint":o=function(t){const e=[];for(let n=0;t&&n<t.length;n++){const r=t.get(n);if(r){const t=Array.from(r);e.push(t)}}return{type:"MultiPoint",coordinates:e}}(t);break;case"geoarrow.point":a=t,o={type:"Point",coordinates:Array.from(a)};break;case"geoarrow.multilinestring":o=function(t){const e=[];for(let n=0;t&&n<t.length;n++){const r=t.get(n),i=[];for(let t=0;r&&t<r.length;t++){const e=r.get(t);if(e){const t=Array.from(e);i.push(t)}}e.push(i)}return{type:"MultiLineString",coordinates:e}}(t);break;case"geoarrow.linestring":o=function(t){const e=[];for(let n=0;t&&n<t.length;n++){const r=t.get(n);if(r){const t=Array.from(r);e.push(t)}}return{type:"LineString",coordinates:e}}(t);break;case"geoarrow.wkb":o=function(t){var e;const n=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),s=null===(e=i.a.parseSync)||void 0===e?void 0:e.call(i.a,n);return Object(r.a)(s)}(t);break;case"geoarrow.wkt":o=function(t){var e;const n=t;return null===(e=s.a.parseTextSync)||void 0===e?void 0:e.call(s.a,n)}(t);break;default:throw Error("GeoArrow encoding not supported "+e)}var a;return o}},2163:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));let r=1,i=1;class s{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:e=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=t,o=r++,a={time:0,delay:e,duration:n,rate:i,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(t){this.channels.delete(t);for(const[e,n]of this.animations)n.channel===t&&this.detachAnimation(e)}isFinished(t){const e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}getTime(t){if(void 0===t)return this.time;const e=this.channels.get(t);return void 0===e?-1:e.time}setTime(t){this.time=Math.max(0,t);const e=this.channels.values();for(const t of e)this._setChannelTime(t,this.time);const n=this.animations.values();for(const t of n){const{animation:e,channel:n}=t;e.setTime(this.getTime(n))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,e){const n=i++;return this.animations.set(n,{animation:t,channel:e}),t.setTime(this.getTime(e)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,e){const n=e-t.delay;n>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}},2180:function(t,e,n){"use strict";n.d(e,"a",(function(){return nr}));var r={};n.r(r),n.d(r,"name",(function(){return Xt})),n.d(r,"decode",(function(){return Jt}));var i={};n.r(i),n.d(i,"name",(function(){return Kt})),n.d(i,"decode",(function(){return qt}));var s={};n.r(s),n.d(s,"name",(function(){return le})),n.d(s,"decode",(function(){return he}));var o={};n.r(o),n.d(o,"name",(function(){return pe})),n.d(o,"preprocess",(function(){return _e}));var a={};n.r(a),n.d(a,"name",(function(){return be})),n.d(a,"preprocess",(function(){return Ae}));var c={};n.r(c),n.d(c,"name",(function(){return Ue})),n.d(c,"preprocess",(function(){return Ge})),n.d(c,"decode",(function(){return je})),n.d(c,"encode",(function(){return He}));var u={};n.r(u),n.d(u,"name",(function(){return pn})),n.d(u,"decode",(function(){return En}));var l={};n.r(l),n.d(l,"name",(function(){return Bn})),n.d(l,"decode",(function(){return Cn})),n.d(l,"encode",(function(){return On}));var h={};n.r(h),n.d(h,"name",(function(){return Sn})),n.d(h,"decode",(function(){return wn})),n.d(h,"encode",(function(){return In}));var f={};n.r(f),n.d(f,"name",(function(){return Rn})),n.d(f,"decode",(function(){return xn})),n.d(f,"encode",(function(){return Mn}));var d={};n.r(d),n.d(d,"name",(function(){return Fn})),n.d(d,"decode",(function(){return Ln}));var g=n(1164),m=n(389),p=n(620);var _,b=n(416),A=n(330);const E=null===(_=globalThis.loaders)||void 0===_?void 0:_.parseImageNode,y="undefined"!=typeof Image,v="undefined"!=typeof ImageBitmap,T=Boolean(E),B=!!A.a||T;function C(t){const e=S(t);if(!e)throw new Error("Not an image");return e}function O(t){switch(C(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function S(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}const w=/^data:image\/svg\+xml/,I=/\.svg((\?|#).*)?$/;function R(t){return t&&(w.test(t)||I.test(t))}function x(t,e){if(R(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function M(t,e,n){const r=function(t,e){if(R(e)){let e=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(e=unescape(encodeURIComponent(e)))}catch(t){throw new Error(t.message)}return"data:image/svg+xml;base64,"+btoa(e)}return x(t,e)}(t,n),i=self.URL||self.webkitURL,s="string"!=typeof r&&i.createObjectURL(r);try{return await async function(t,e){const n=new Image;if(n.src=t,e.image&&e.image.decode&&n.decode)return await n.decode(),n;return await new Promise((t,e)=>{try{n.onload=()=>t(n),n.onerror=t=>{const n=t instanceof Error?t.message:"error";e(new Error(n))}}catch(t){e(t)}})}(s||r,e)}finally{s&&i.revokeObjectURL(s)}}const N={};let F=!0;async function L(t,e,n){let r;if(R(n)){r=await M(t,e,n)}else r=x(t,n);const i=e&&e.imagebitmap;return await async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!D(e)&&F||(e=null);if(e)try{return await createImageBitmap(t,e)}catch(t){console.warn(t),F=!1}return await createImageBitmap(t)}(r,i)}function D(t){for(const e in t||N)return!1;return!0}function P(t){return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=U(e);for(let e=0;e<r.length;++e)if(r[e]!==t[e+n])return!1;return!0}(t,"ftyp",4)?0==(96&t[8])?null:function(t){switch((e=t,n=8,r=12,String.fromCharCode(...e.slice(n,r))).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}var e,n,r}(t):null}function U(t){return[...t].map(t=>t.charCodeAt(0))}function G(t){const e=j(t);return function(t){const e=j(t);if(!(e.byteLength>=24&&2303741511===e.getUint32(0,!1)))return null;return{mimeType:"image/png",width:e.getUint32(16,!1),height:e.getUint32(20,!1)}}(e)||function(t){const e=j(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,!1)&&255===e.getUint8(2)))return null;const{tableMarkers:n,sofMarkers:r}=function(){const t=new Set([65499,65476,65484,65501,65534]);for(let e=65504;e<65520;++e)t.add(e);const e=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:e}}();let i=2;for(;i+9<e.byteLength;){const t=e.getUint16(i,!1);if(r.has(t))return{mimeType:"image/jpeg",height:e.getUint16(i+5,!1),width:e.getUint16(i+7,!1)};if(!n.has(t))return null;i+=2,i+=e.getUint16(i,!1)}return null}(e)||function(t){const e=j(t);if(!(e.byteLength>=10&&1195984440===e.getUint32(0,!1)))return null;return{mimeType:"image/gif",width:e.getUint16(6,!0),height:e.getUint16(8,!0)}}(e)||function(t){const e=j(t);if(!(e.byteLength>=14&&16973===e.getUint16(0,!1)&&e.getUint32(2,!0)===e.byteLength))return null;return{mimeType:"image/bmp",width:e.getUint32(18,!0),height:e.getUint32(22,!0)}}(e)||function(t){const e=P(new Uint8Array(t instanceof DataView?t.buffer:t));if(!e)return null;return{mimeType:e.mimeType,width:0,height:0}}(e)}function j(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}const H={id:"image",module:"images",name:"Images",version:"4.1.0-alpha.4",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:async function(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:i}=n||{};let s;switch(function(t){switch(t){case"auto":case"data":return function(){if(v)return"imagebitmap";if(y)return"image";if(B)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(t){switch(t){case"auto":return v||y||B;case"imagebitmap":return v;case"image":return y;case"data":return B;default:throw new Error(`@loaders.gl/images: image ${t} not supported in this environment`)}}(t),t}}(r)){case"imagebitmap":s=await L(t,e,i);break;case"image":s=await M(t,e,i);break;case"data":s=await async function(t,e){var n;const{mimeType:r}=G(t)||{},i=null===(n=globalThis.loaders)||void 0===n?void 0:n.parseImageNode;return Object(b.a)(i),await i(t,r)}(t);break;default:Object(b.a)(!1)}return"data"===r&&(s=O(s)),s},tests:[t=>Boolean(G(new DataView(t)))],options:{image:{type:"auto",decode:!0}}};var k=n(155),V=n(296),z=n(211),X=n(367);const J={};async function W(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return e&&(t=K(t,e,n,r)),J[t]=J[t]||q(t),await J[t]}function K(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!n.useLocalLibraries&&t.startsWith("http"))return t;r=r||t;const i=n.modules||{};return i[r]?i[r]:k.a?n.CDN?(Object(z.a)(n.CDN.startsWith("http")),`${n.CDN}/${e}@${X.b}/dist/libs/${r}`):k.c?"../src/libs/"+r:`modules/${e}/src/libs/${r}`:`modules/${e}/dist/libs/${r}`}async function q(t){if(t.endsWith("wasm"))return await async function(t){if(k.a||!V.readFileAsArrayBuffer||t.startsWith("http")){const e=await fetch(t);return await e.arrayBuffer()}return await V.readFileAsArrayBuffer(t)}(t);if(!k.a)try{return V&&V.requireFromFile&&await V.requireFromFile(t)}catch(t){return console.error(t),null}if(k.c)return importScripts(t);return function(t,e){if(!k.a)return V.requireFromString&&V.requireFromString(t,e);if(k.c)return eval.call(globalThis,t),null;const n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch(e){n.text=t}return document.body.appendChild(n),null}(await async function(t){if(k.a||!V.readFileAsText||t.startsWith("http")){const e=await fetch(t);return await e.text()}return await V.readFileAsText(t)}(t),t)}const Q="basis_transcoder.js",Y="basis_transcoder.wasm",Z="basis_encoder.js",$="basis_encoder.wasm";let tt,et;async function nt(t){const e=t.modules||{};return e.basis?e.basis:(tt=tt||async function(t){let e=null,n=null;return[e,n]=await Promise.all([await W(Q,"textures",t),await W(Y,"textures",t)]),e=e||globalThis.BASIS,await function(t,e){const n={};e&&(n.wasmBinary=e);return new Promise(e=>{t(n).then(t=>{const{BasisFile:n,initializeBasis:r}=t;r(),e({BasisFile:n})})})}(e,n)}(t),await tt)}async function rt(t){const e=t.modules||{};return e.basisEncoder?e.basisEncoder:(et=et||async function(t){let e=null,n=null;return[e,n]=await Promise.all([await W(Z,"textures",t),await W($,"textures",t)]),e=e||globalThis.BASIS,await function(t,e){const n={};e&&(n.wasmBinary=e);return new Promise(e=>{t(n).then(t=>{const{BasisFile:n,KTX2File:r,initializeBasis:i,BasisEncoder:s}=t;i(),e({BasisFile:n,KTX2File:r,BasisEncoder:s})})})}(e,n)}(t),await et)}const it={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919},st=["","WEBKIT_","MOZ_"],ot={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let at=null;function ct(t){if(!at){t=t||function(){try{return document.createElement("canvas").getContext("webgl")}catch(t){return null}}()||void 0,at=new Set;for(const e of st)for(const n in ot)if(t&&t.getExtension(`${e}${n}`)){const t=ot[n];at.add(t)}}return at}n(1416);const ut=[171,75,84,88,32,50,48,187,13,10,26,10];const lt={etc1:{basisFormat:0,compressed:!0,format:it.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:it.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:it.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:it.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:it.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},"astc-4x4":{basisFormat:10,compressed:!0,format:it.COMPRESSED_RGBA_ASTC_4X4_KHR},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function ht(t,e,n){const r=new t(new Uint8Array(e));try{if(!r.startTranscoding())throw new Error("Failed to start basis transcoding");const t=r.getNumImages(),e=[];for(let i=0;i<t;i++){const t=r.getNumLevels(i),s=[];for(let e=0;e<t;e++)s.push(ft(r,i,e,n));e.push(s)}return e}finally{r.close(),r.delete()}}function ft(t,e,n,r){const i=t.getImageWidth(e,n),s=t.getImageHeight(e,n),o=t.getHasAlpha(),{compressed:a,format:c,basisFormat:u}=mt(r,o),l=t.getImageTranscodedSizeInBytes(e,n,u),h=new Uint8Array(l);if(!t.transcodeImage(h,e,n,u,0,0))throw new Error("failed to start Basis transcoding");return{width:i,height:s,data:h,compressed:a,format:c,hasAlpha:o}}function dt(t,e,n){const r=new t(new Uint8Array(e));try{if(!r.startTranscoding())throw new Error("failed to start KTX2 transcoding");const t=r.getLevels(),e=[];for(let i=0;i<t;i++){e.push(gt(r,i,n));break}return[e]}finally{r.close(),r.delete()}}function gt(t,e,n){const{alphaFlag:r,height:i,width:s}=t.getImageLevelInfo(e,0,0),{compressed:o,format:a,basisFormat:c}=mt(n,r),u=t.getImageTranscodedSizeInBytes(e,0,0,c),l=new Uint8Array(u);if(!t.transcodeImage(l,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:s,height:i,data:l,compressed:o,levelSize:u,hasAlpha:r,format:a}}function mt(t,e){let n=t&&t.basis&&t.basis.format;return"auto"===n&&(n=pt()),"object"==typeof n&&(n=e?n.alpha:n.noAlpha),n=n.toLowerCase(),lt[n]}function pt(){const t=ct();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}const _t={...{name:"Basis",id:"basis",module:"textures",version:"4.1.0-alpha.4",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},parse:async function(t,e){if("auto"===e.basis.containerFormat){if(function(t){const e=new Uint8Array(t);return!(e.byteLength<ut.length||e[0]!==ut[0]||e[1]!==ut[1]||e[2]!==ut[2]||e[3]!==ut[3]||e[4]!==ut[4]||e[5]!==ut[5]||e[6]!==ut[6]||e[7]!==ut[7]||e[8]!==ut[8]||e[9]!==ut[9]||e[10]!==ut[10]||e[11]!==ut[11])}(t)){return dt((await rt(e)).KTX2File,t,e)}const{BasisFile:n}=await nt(e);return ht(n,t,e)}switch(e.basis.module){case"encoder":const n=await rt(e);switch(e.basis.containerFormat){case"ktx2":return dt(n.KTX2File,t,e);case"basis":default:return ht(n.BasisFile,t,e)}case"transcoder":default:const{BasisFile:r}=await nt(e);return ht(r,t,e)}}};var bt=n(182),At=n(619);const Et=1735152710;function yt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return`${String.fromCharCode(t.getUint8(e+0))}${String.fromCharCode(t.getUint8(e+1))}${String.fromCharCode(t.getUint8(e+2))}${String.fromCharCode(t.getUint8(e+3))}`}function vt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new DataView(t),{magic:i=Et}=n,s=r.getUint32(e,!1);return s===i||s===Et}function Tt(t,e,n){Object(b.a)(t.header.byteLength>20);const r=e.getUint32(n+0,!0),i=e.getUint32(n+4,!0);return n+=8,Object(b.a)(0===i),Ct(t,e,n,r),n+=r,n+=Ot(t,e,n,t.header.byteLength)}function Bt(t,e,n,r){return Object(b.a)(t.header.byteLength>20),function(t,e,n,r){for(;n+8<=t.header.byteLength;){const i=e.getUint32(n+0,!0),s=e.getUint32(n+4,!0);switch(n+=8,s){case 1313821514:Ct(t,e,n,i);break;case 5130562:Ot(t,e,n,i);break;case 0:r.strict||Ct(t,e,n,i);break;case 1:r.strict||Ot(t,e,n,i)}n+=Object(At.b)(i,4)}}(t,e,n,r),n+t.header.byteLength}function Ct(t,e,n,r){const i=new Uint8Array(e.buffer,n,r),s=new TextDecoder("utf8").decode(i);return t.json=JSON.parse(s),Object(At.b)(r,4)}function Ot(t,e,n,r){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:r,arrayBuffer:e.buffer}),Object(At.b)(r,4)}function St(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;const n=e.baseUri||e.uri;if(!n)throw new Error("'baseUri' must be provided to resolve relative url "+t);return n.substr(0,n.lastIndexOf("/")+1)+t}var wt=n(239);function It(t,e,n){const r=t.bufferViews[n];Object(bt.a)(r);const i=e[r.buffer];Object(bt.a)(i);const s=(r.byteOffset||0)+i.byteOffset;return new Uint8Array(i.arrayBuffer,s,r.byteLength)}class Rt{constructor(t){this.gltf=void 0,this.sourceBuffers=void 0,this.byteLength=void 0,this.gltf={json:(null==t?void 0:t.json)||{asset:{version:"2.0",generator:"loaders.gl"},buffers:[],extensions:{},extensionsRequired:[],extensionsUsed:[]},buffers:(null==t?void 0:t.buffers)||[],images:(null==t?void 0:t.images)||[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(t){return this.json[t]}getExtraData(t){return(this.json.extras||{})[t]}hasExtension(t){const e=this.getUsedExtensions().find(e=>e===t),n=this.getRequiredExtensions().find(e=>e===t);return"string"==typeof e||"string"==typeof n}getExtension(t){const e=this.getUsedExtensions().find(e=>e===t),n=this.json.extensions||{};return e?n[t]:null}getRequiredExtension(t){return this.getRequiredExtensions().find(e=>e===t)?this.getExtension(t):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getRemovedExtensions(){return this.json.extensionsRemoved||[]}getObjectExtension(t,e){return(t.extensions||{})[e]}getScene(t){return this.getObject("scenes",t)}getNode(t){return this.getObject("nodes",t)}getSkin(t){return this.getObject("skins",t)}getMesh(t){return this.getObject("meshes",t)}getMaterial(t){return this.getObject("materials",t)}getAccessor(t){return this.getObject("accessors",t)}getTexture(t){return this.getObject("textures",t)}getSampler(t){return this.getObject("samplers",t)}getImage(t){return this.getObject("images",t)}getBufferView(t){return this.getObject("bufferViews",t)}getBuffer(t){return this.getObject("buffers",t)}getObject(t,e){if("object"==typeof e)return e;const n=this.json[t]&&this.json[t][e];if(!n)throw new Error(`glTF file error: Could not find ${t}[${e}]`);return n}getTypedArrayForBufferView(t){const e=(t=this.getBufferView(t)).buffer,n=this.gltf.buffers[e];Object(bt.a)(n);const r=(t.byteOffset||0)+n.byteOffset;return new Uint8Array(n.arrayBuffer,r,t.byteLength)}getTypedArrayForAccessor(t){const e=this.getAccessor(t);return function(t,e,n){var r,i;const s="number"==typeof n?null===(r=t.accessors)||void 0===r?void 0:r[n]:n;if(!s)throw new Error("No gltf accessor "+JSON.stringify(n));const o=null===(i=t.bufferViews)||void 0===i?void 0:i[s.bufferView||0];if(!o)throw new Error("No gltf buffer view for accessor "+o);const{arrayBuffer:a,byteOffset:c}=e[o.buffer],u=(c||0)+(s.byteOffset||0)+(o.byteOffset||0),{ArrayType:l,length:h,componentByteSize:f,numberOfComponentsInElement:d}=Object(wt.a)(s,o),g=f*d,m=o.byteStride||g;if(void 0===o.byteStride||o.byteStride===g){return new l(a,u,h)}const p=new l(h);for(let t=0;t<s.count;t++){const e=new l(a,u+t*m,d);p.set(e,t*d)}return p}(this.gltf.json,this.gltf.buffers,e)}getTypedArrayForImageData(t){t=this.getAccessor(t);const e=this.getBufferView(t.bufferView),n=this.getBuffer(e.buffer).data,r=e.byteOffset||0;return new Uint8Array(n,r,e.byteLength)}addApplicationData(t,e){return this.json[t]=e,this}addExtraData(t,e){return this.json.extras=this.json.extras||{},this.json.extras[t]=e,this}addObjectExtension(t,e,n){return t.extensions=t.extensions||{},t.extensions[e]=n,this.registerUsedExtension(e),this}setObjectExtension(t,e,n){(t.extensions||{})[e]=n}removeObjectExtension(t,e){const n=(null==t?void 0:t.extensions)||{};if(n[e]){this.json.extensionsRemoved=this.json.extensionsRemoved||[];const t=this.json.extensionsRemoved;t.includes(e)||t.push(e)}delete n[e]}addExtension(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(bt.a)(e),this.json.extensions=this.json.extensions||{},this.json.extensions[t]=e,this.registerUsedExtension(t),e}addRequiredExtension(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(bt.a)(e),this.addExtension(t,e),this.registerRequiredExtension(t),e}registerUsedExtension(t){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(e=>e===t)||this.json.extensionsUsed.push(t)}registerRequiredExtension(t){this.registerUsedExtension(t),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(e=>e===t)||this.json.extensionsRequired.push(t)}removeExtension(t){var e;if(null!==(e=this.json.extensions)&&void 0!==e&&e[t]){this.json.extensionsRemoved=this.json.extensionsRemoved||[];const e=this.json.extensionsRemoved;e.includes(t)||e.push(t)}this.json.extensions&&delete this.json.extensions[t],this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,t),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,t)}setDefaultScene(t){this.json.scene=t}addScene(t){const{nodeIndices:e}=t;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:e}),this.json.scenes.length-1}addNode(t){const{meshIndex:e,matrix:n}=t;this.json.nodes=this.json.nodes||[];const r={mesh:e};return n&&(r.matrix=n),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(t){const{attributes:e,indices:n,material:r,mode:i=4}=t,s={primitives:[{attributes:this._addAttributes(e),mode:i}]};if(n){const t=this._addIndices(n);s.primitives[0].indices=t}return Number.isFinite(r)&&(s.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(s),this.json.meshes.length-1}addPointCloud(t){const e={primitives:[{attributes:this._addAttributes(t),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(e),this.json.meshes.length-1}addImage(t,e){const n=G(t),r=e||(null==n?void 0:n.mimeType),i={bufferView:this.addBufferView(t),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(i),this.json.images.length-1}addBufferView(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.byteLength;const r=t.byteLength;Object(bt.a)(Number.isFinite(r)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(t);const i={buffer:e,byteOffset:n,byteLength:r};return this.byteLength+=Object(At.b)(r,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(t,e){const n={bufferView:t,type:Object(wt.b)(e.size),componentType:e.componentType,count:e.count,max:e.max,min:e.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(n),this.json.accessors.length-1}addBinaryBuffer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:3};const n=this.addBufferView(t);let r={min:e.min,max:e.max};r.min&&r.max||(r=this._getAccessorMinMax(t,e.size));const i={size:e.size,componentType:Object(wt.c)(t),count:Math.round(t.length/e.size),min:r.min,max:r.max};return this.addAccessor(n,Object.assign(i,e))}addTexture(t){const{imageIndex:e}=t,n={source:e};return this.json.textures=this.json.textures||[],this.json.textures.push(n),this.json.textures.length-1}addMaterial(t){return this.json.materials=this.json.materials||[],this.json.materials.push(t),this.json.materials.length-1}createBinaryChunk(){var t,e;this.gltf.buffers=[];const n=this.byteLength,r=new ArrayBuffer(n),i=new Uint8Array(r);let s=0;for(const t of this.sourceBuffers||[])s=Object(At.a)(t,i,s);null!==(t=this.json)&&void 0!==t&&null!==(e=t.buffers)&&void 0!==e&&e[0]?this.json.buffers[0].byteLength=n:this.json.buffers=[{byteLength:n}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(t,e){let n=!0;for(;n;){const r=t.indexOf(e);r>-1?t.splice(r,1):n=!1}}_addAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e={};for(const n in t){const r=t[n],i=this._getGltfAttributeName(n),s=this.addBinaryBuffer(r.value,r);e[i]=s}return e}_addIndices(t){return this.addBinaryBuffer(t,{size:1})}_getGltfAttributeName(t){switch(t.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return t}}_getAccessorMinMax(t,e){const n={min:null,max:null};if(t.length<e)return n;n.min=[],n.max=[];const r=t.subarray(0,e);for(const t of r)n.min.push(t),n.max.push(t);for(let r=e;r<t.length;r+=e)for(let i=0;i<e;i++)n.min[0+i]=Math.min(n.min[0+i],t[r+i]),n.max[0+i]=Math.max(n.max[0+i],t[r+i]);return n}}function xt(t){return(t%1+1)%1}const Mt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16,BOOLEAN:1,STRING:1,ENUM:1},Nt={INT8:Int8Array,UINT8:Uint8Array,INT16:Int16Array,UINT16:Uint16Array,INT32:Int32Array,UINT32:Uint32Array,INT64:BigInt64Array,UINT64:BigUint64Array,FLOAT32:Float32Array,FLOAT64:Float64Array},Ft={INT8:1,UINT8:1,INT16:2,UINT16:2,INT32:4,UINT32:4,INT64:8,UINT64:8,FLOAT32:4,FLOAT64:8};function Lt(t,e){return Ft[e]*Mt[t]}function Dt(t,e,n,r){if("UINT8"!==n&&"UINT16"!==n&&"UINT32"!==n&&"UINT64"!==n)return null;const i=Pt(t.getTypedArrayForBufferView(e),"SCALAR",n,r+1);return i instanceof BigInt64Array||i instanceof BigUint64Array?null:i}function Pt(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=Mt[e],s=Nt[n],o=Ft[n],a=r*i,c=a*o;let u=t.buffer,l=t.byteOffset;if(l%o!=0){u=new Uint8Array(u).slice(l,l+c).buffer,l=0}return new s(u,l,a)}function Ut(t,e,n){var r,i;const s="TEXCOORD_"+(e.texCoord||0),o=n.attributes[s],a=t.getTypedArrayForAccessor(o),c=t.gltf.json,u=e.index,l=null===(r=c.textures)||void 0===r||null===(i=r[u])||void 0===i?void 0:i.source;if(void 0!==l){var h,f,d;const n=null===(h=c.images)||void 0===h||null===(f=h[l])||void 0===f?void 0:f.mimeType,r=null===(d=t.gltf.images)||void 0===d?void 0:d[l];if(r&&void 0!==r.width){const t=[];for(let i=0;i<a.length;i+=2){const s=jt(r,n,a,i,e.channels);t.push(s)}return t}}return[]}function Gt(t,e,n,r,i){if(null==n||!n.length)return;const s=[];for(const t of n){let e=r.findIndex(e=>e===t);-1===e&&(e=r.push(t)-1),s.push(e)}const o=new Uint32Array(s),a=t.gltf.buffers.push({arrayBuffer:o.buffer,byteOffset:o.byteOffset,byteLength:o.byteLength})-1,c=t.addBufferView(o,a,0),u=t.addAccessor(c,{size:1,componentType:Object(wt.c)(o),count:o.length});i.attributes[e]=u}function jt(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0];const s={r:{offset:0,shift:0},g:{offset:1,shift:8},b:{offset:2,shift:16},a:{offset:3,shift:24}},o=n[r],a=n[r+1];let c=1;!e||-1===e.indexOf("image/jpeg")&&-1===e.indexOf("image/png")||(c=4);const u=Ht(o,a,t,c);let l=0;for(const e of i){const n="number"==typeof e?Object.values(s)[e]:s[e],r=u+n.offset,i=O(t);if(i.data.length<=r)throw new Error(`${i.data.length} <= ${r}`);l|=i.data[r]<<n.shift}return l}function Ht(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=n.width,s=xt(t)*(i-1),o=Math.round(s),a=n.height,c=xt(e)*(a-1),u=Math.round(c),l=n.components?n.components:r,h=(u*i+o)*l;return h}function kt(t,e,n,r,i){const s=[];for(let o=0;o<e;o++){const e=n[o],a=n[o+1]-n[o];if(a+e>r)break;const c=e/i,u=a/i;s.push(t.slice(c,c+u))}return s}function Vt(t,e,n){const r=[];for(let i=0;i<e;i++){const e=i*n;r.push(t.slice(e,e+n))}return r}function zt(t,e,n,r){if(n)throw new Error("Not implemented - arrayOffsets for strings is specified");if(r){const n=[],i=new TextDecoder("utf8");let s=0;for(let o=0;o<t;o++){const t=r[o+1]-r[o];if(t+s<=e.length){const r=e.subarray(s,t+s),o=i.decode(r);n.push(o),s+=t}}return n}return[]}const Xt="EXT_mesh_features";async function Jt(t,e){!function(t,e){const n=t.gltf.json;if(!n.meshes)return;for(const r of n.meshes)for(const n of r.primitives)Wt(t,n,e)}(new Rt(t),e)}function Wt(t,e,n){var r,i;if(null==n||null===(r=n.gltf)||void 0===r||!r.loadBuffers)return;const s=null===(i=e.extensions)||void 0===i?void 0:i.EXT_mesh_features,o=null==s?void 0:s.featureIds;if(o)for(const r of o){var a;let i;if(void 0!==r.attribute){const n="_FEATURE_ID_"+r.attribute,s=e.attributes[n];i=t.getTypedArrayForAccessor(s)}else i=void 0!==r.texture&&null!=n&&null!==(a=n.gltf)&&void 0!==a&&a.loadImages?Ut(t,r.texture,e):[];r.data=i}}const Kt="EXT_structural_metadata";async function qt(t,e){!function(t,e){var n,r;if(null===(n=e.gltf)||void 0===n||!n.loadBuffers)return;const i=t.getExtension("EXT_structural_metadata");if(!i)return;null!==(r=e.gltf)&&void 0!==r&&r.loadImages&&function(t,e){const n=e.propertyTextures,r=t.gltf.json;if(n&&r.meshes)for(const i of r.meshes)for(const r of i.primitives)Yt(t,n,r,e)}(t,i);!function(t,e){const n=e.schema;if(!n)return;const r=n.classes,i=e.propertyTables;if(r&&i)for(const e in r){const r=Qt(i,e);r&&$t(t,n,r)}}(t,i)}(new Rt(t),e)}function Qt(t,e){for(const n of t)if(n.class===e)return n;return null}function Yt(t,e,n,r){var i;if(!e)return;const s=null===(i=n.extensions)||void 0===i?void 0:i.EXT_structural_metadata,o=null==s?void 0:s.propertyTextures;if(o)for(const i of o){Zt(t,e[i],n,r)}}function Zt(t,e,n,r){if(!e.properties)return;r.dataAttributeNames||(r.dataAttributeNames=[]);const i=e.class;for(const o in e.properties){var s;const a=`${i}_${o}`,c=null===(s=e.properties)||void 0===s?void 0:s[o];if(!c)continue;c.data||(c.data=[]);const u=c.data,l=Ut(t,c,n);null!==l&&(Gt(t,a,l,u,n),c.data=u,r.dataAttributeNames.push(a))}}function $t(t,e,n){var r;const i=null===(r=e.classes)||void 0===r?void 0:r[n.class];if(!i)throw new Error("Incorrect data in the EXT_structural_metadata extension: no schema class with name "+n.class);const s=n.count;for(const r in i.properties){var o;const a=i.properties[r],c=null===(o=n.properties)||void 0===o?void 0:o[r];if(c){const n=te(t,e,a,s,c);c.data=n}}}function te(t,e,n,r,i){let s=[];const o=i.values,a=t.getTypedArrayForBufferView(o),c=function(t,e,n,r){if(e.array&&void 0===e.count&&void 0!==n.arrayOffsets)return Dt(t,n.arrayOffsets,n.arrayOffsetType||"UINT32",r);return null}(t,n,i,r),u=function(t,e,n){if(void 0!==e.stringOffsets)return Dt(t,e.stringOffsets,e.stringOffsetType||"UINT32",n);return null}(t,i,r);switch(n.type){case"SCALAR":case"VEC2":case"VEC3":case"VEC4":case"MAT2":case"MAT3":case"MAT4":s=function(t,e,n,r){const i=t.array,s=t.count,o=Lt(t.type,t.componentType),a=n.byteLength/o;let c;c=t.componentType?Pt(n,t.type,t.componentType,a):n;if(i)return r?kt(c,e,r,n.length,o):s?Vt(c,e,s):[];return c}(n,r,a,c);break;case"BOOLEAN":throw new Error("Not implemented - classProperty.type="+n.type);case"STRING":s=zt(r,a,c,u);break;case"ENUM":s=function(t,e,n,r,i){var s;const o=e.enumType;if(!o)throw new Error("Incorrect data in the EXT_structural_metadata extension: classProperty.enumType is not set for type ENUM");const a=null===(s=t.enums)||void 0===s?void 0:s[o];if(!a)throw new Error("Incorrect data in the EXT_structural_metadata extension: schema.enums does't contain "+o);const c=a.valueType||"UINT16",u=Lt(e.type,c),l=r.byteLength/u;let h=Pt(r,e.type,c,l);h||(h=r);if(e.array){if(i)return function(t){const{valuesData:e,numberOfElements:n,arrayOffsets:r,valuesDataBytesLength:i,elementSize:s,enumEntry:o}=t,a=[];for(let t=0;t<n;t++){const n=r[t],c=r[t+1]-r[t];if(c+n>i)break;const u=ee(e,n/s,c/s,o);a.push(u)}return a}({valuesData:h,numberOfElements:n,arrayOffsets:i,valuesDataBytesLength:r.length,elementSize:u,enumEntry:a});const t=e.count;return t?function(t,e,n,r){const i=[];for(let s=0;s<e;s++){const e=ee(t,n*s,n,r);i.push(e)}return i}(h,n,t,a):[]}return ee(h,0,n,a)}(e,n,r,a,c);break;default:throw new Error("Unknown classProperty type "+n.type)}return s}function ee(t,e,n,r){const i=[];for(let s=0;s<n;s++)if(t instanceof BigInt64Array||t instanceof BigUint64Array)i.push("");else{const n=ne(r,t[e+s]);n?i.push(n.name):i.push("")}return i}function ne(t,e){for(const n of t.values)if(n.value===e)return n;return null}const re=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),ie=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),se={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},oe={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};let ae;async function ce(){return ae||(ae=async function(){let t="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(re)&&(t="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=await WebAssembly.instantiate(function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;++n){const r=t.charCodeAt(n);e[n]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let n=0;for(let r=0;r<t.length;++r)e[n++]=e[r]<60?ie[e[r]]:64*(e[r]-60)+e[++r];return e.buffer.slice(0,n)}(t),{});return await e.instance.exports.__wasm_call_ctors(),e.instance}()),ae}function ue(t,e,n,r,i,s,o){const a=t.exports.sbrk,c=r+3&-4,u=a(c*i),l=a(s.length),h=new Uint8Array(t.exports.memory.buffer);h.set(s,l);const f=e(u,r,i,l,s.length);if(0===f&&o&&o(u,c,i),n.set(h.subarray(u,u+r*i)),a(u-a(0)),0!==f)throw new Error("Malformed buffer data: "+f)}const le="EXT_meshopt_compression";async function he(t,e){var n,r;const i=new Rt(t);if(null==e||null===(n=e.gltf)||void 0===n||!n.decompressMeshes||null===(r=e.gltf)||void 0===r||!r.loadBuffers)return;const s=[];for(const e of t.json.bufferViews||[])s.push(fe(i,e));await Promise.all(s),i.removeExtension("EXT_meshopt_compression")}async function fe(t,e){const n=t.getObjectExtension(e,"EXT_meshopt_compression");if(n){const{byteOffset:r=0,byteLength:i=0,byteStride:s,count:o,mode:a,filter:c="NONE",buffer:u}=n,l=t.gltf.buffers[u],h=new Uint8Array(l.arrayBuffer,l.byteOffset+r,i),f=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);await async function(t,e,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NONE";const o=await ce();ue(o,o.exports[oe[i]],t,e,n,r,o.exports[se[s||"NONE"]])}(f,o,s,h,a,c),t.removeObjectExtension(e,"EXT_meshopt_compression")}}const de={};function ge(t){if(void 0===de[t]){const e=A.a?function(t){switch(t){case"image/avif":case"image/webp":return function(t){try{const e=document.createElement("canvas");return 0===e.toDataURL(t).indexOf("data:"+t)}catch{return!1}}(t);default:return!0}}(t):me(t);de[t]=e}return de[t]}function me(t){var e,n;const r=(null===(e=globalThis.loaders)||void 0===e?void 0:e.imageFormatsNode)||["image/png","image/jpeg","image/gif"],i=null===(n=globalThis.loaders)||void 0===n?void 0:n.parseImageNode;return Boolean(i)&&r.includes(t)}const pe="EXT_texture_webp";function _e(t,e){const n=new Rt(t);if(!ge("image/webp")){if(n.getRequiredExtensions().includes("EXT_texture_webp"))throw new Error("gltf: Required extension EXT_texture_webp not supported by browser");return}const{json:r}=n;for(const t of r.textures||[]){const e=n.getObjectExtension(t,"EXT_texture_webp");e&&(t.source=e.source),n.removeObjectExtension(t,"EXT_texture_webp")}n.removeExtension("EXT_texture_webp")}const be="KHR_texture_basisu";function Ae(t,e){const n=new Rt(t),{json:r}=n;for(const t of r.textures||[]){const e=n.getObjectExtension(t,"KHR_texture_basisu");e&&(t.source=e.source,n.removeObjectExtension(t,"KHR_texture_basisu"))}n.removeExtension("KHR_texture_basisu")}const Ee={name:"Draco",id:"draco",module:"draco",version:"4.1.0-alpha.4",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};function ye(t){switch(t.constructor){case Int8Array:return"int8";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int16Array:return"int16";case Uint16Array:return"uint16";case Int32Array:return"int32";case Uint32Array:return"uint32";case Float32Array:return"float32";case Float64Array:return"float64";default:return"null"}}function ve(t,e,n){const r=ye(e.value),i=n||function(t){const e={};"byteOffset"in t&&(e.byteOffset=t.byteOffset.toString(10));"byteStride"in t&&(e.byteStride=t.byteStride.toString(10));"normalized"in t&&(e.normalized=t.normalized.toString());return e}(e);return{name:t,type:{type:"fixed-size-list",listSize:e.size,children:[{name:"value",type:r}]},nullable:!1,metadata:i}}function Te(t,e,n){return ve(t,e,n?Be(n.metadata):void 0)}function Be(t){Object.entries(t);const e={};for(const n in t)e[n+".string"]=JSON.stringify(t[n]);return e}const Ce={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},Oe={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class Se{constructor(t){this.draco=void 0,this.decoder=void 0,this.metadataQuerier=void 0,this.draco=t,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new this.draco.DecoderBuffer;n.Init(new Int8Array(t),t.byteLength),this._disableAttributeTransforms(e);const r=this.decoder.GetEncodedGeometryType(n),i=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let t;switch(r){case this.draco.TRIANGULAR_MESH:t=this.decoder.DecodeBufferToMesh(n,i);break;case this.draco.POINT_CLOUD:t=this.decoder.DecodeBufferToPointCloud(n,i);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!t.ok()||!i.ptr){const e="DRACO decompression failed: "+t.error_msg();throw new Error(e)}const s=this._getDracoLoaderData(i,r,e),o=this._getMeshData(i,s,e),a=function(t){let e=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,o=-1/0;const a=t.POSITION?t.POSITION.value:[],c=a&&a.length;for(let t=0;t<c;t+=3){const c=a[t],u=a[t+1],l=a[t+2];e=c<e?c:e,n=u<n?u:n,r=l<r?l:r,i=c>i?c:i,s=u>s?u:s,o=l>o?l:o}return[[e,n,r],[i,s,o]]}(o.attributes),c=function(t,e,n){const r=Be(e.metadata),i=[],s=function(t){const e={};for(const n in t){const r=t[n];e[r.name||"undefined"]=r}return e}(e.attributes);for(const e in t){const n=Te(e,t[e],s[e]);i.push(n)}if(n){const t=Te("indices",n);i.push(t)}return{fields:i,metadata:r}}(o.attributes,s,o.indices);return{loader:"draco",loaderData:s,header:{vertexCount:i.num_points(),boundingBox:a},...o,schema:c}}finally{this.draco.destroy(n),i&&this.draco.destroy(i)}}_getDracoLoaderData(t,e,n){const r=this._getTopLevelMetadata(t),i=this._getDracoAttributes(t,n);return{geometry_type:e,num_attributes:t.num_attributes(),num_points:t.num_points(),num_faces:t instanceof this.draco.Mesh?t.num_faces():0,metadata:r,attributes:i}}_getDracoAttributes(t,e){const n={};for(let r=0;r<t.num_attributes();r++){const i=this.decoder.GetAttribute(t,r),s=this._getAttributeMetadata(t,r);n[i.unique_id()]={unique_id:i.unique_id(),attribute_type:i.attribute_type(),data_type:i.data_type(),num_components:i.num_components(),byte_offset:i.byte_offset(),byte_stride:i.byte_stride(),normalized:i.normalized(),attribute_index:r,metadata:s};const o=this._getQuantizationTransform(i,e);o&&(n[i.unique_id()].quantization_transform=o);const a=this._getOctahedronTransform(i,e);a&&(n[i.unique_id()].octahedron_transform=a)}return n}_getMeshData(t,e,n){const r=this._getMeshAttributes(e,t,n);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");if(t instanceof this.draco.Mesh)switch(n.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(t),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(t),size:1}}}return{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(t,e,n){const r={};for(const i of Object.values(t.attributes)){const t=this._deduceAttributeName(i,n);i.name=t;const{value:s,size:o}=this._getAttributeValues(e,i);r[t]={value:s,size:o,byteOffset:i.byte_offset,byteStride:i.byte_stride,normalized:i.normalized}}return r}_getTriangleListIndices(t){const e=3*t.num_faces(),n=4*e,r=this.draco._malloc(n);try{return this.decoder.GetTrianglesUInt32Array(t,n,r),new Uint32Array(this.draco.HEAPF32.buffer,r,e).slice()}finally{this.draco._free(r)}}_getTriangleStripIndices(t){const e=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(t,e),function(t){const e=t.size(),n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=t.GetValue(r);return n}(e)}finally{this.draco.destroy(e)}}_getAttributeValues(t,e){const n=Oe[e.data_type],r=e.num_components,i=t.num_points()*r,s=i*n.BYTES_PER_ELEMENT,o=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}(this.draco,n);let a;const c=this.draco._malloc(s);try{const r=this.decoder.GetAttribute(t,e.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(t,r,o,s,c),a=new n(this.draco.HEAPF32.buffer,c,i).slice()}finally{this.draco._free(c)}return{value:a,size:r}}_deduceAttributeName(t,e){const n=t.unique_id;for(const[t,r]of Object.entries(e.extraAttributes||{}))if(r===n)return t;const r=t.attribute_type;for(const t in Ce){if(this.draco[t]===r)return Ce[t]}const i=e.attributeNameEntry||"name";return t.metadata[i]?t.metadata[i].string:"CUSTOM_ATTRIBUTE_"+n}_getTopLevelMetadata(t){const e=this.decoder.GetMetadata(t);return this._getDracoMetadata(e)}_getAttributeMetadata(t,e){const n=this.decoder.GetAttributeMetadata(t,e);return this._getDracoMetadata(n)}_getDracoMetadata(t){if(!t||!t.ptr)return{};const e={},n=this.metadataQuerier.NumEntries(t);for(let r=0;r<n;r++){const n=this.metadataQuerier.GetEntryName(t,r);e[n]=this._getDracoMetadataField(t,n)}return e}_getDracoMetadataField(t,e){const n=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(t,e,n);const r=function(t){const e=t.size(),n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=t.GetValue(r);return n}(n);return{int:this.metadataQuerier.GetIntEntry(t,e),string:this.metadataQuerier.GetStringEntry(t,e),double:this.metadataQuerier.GetDoubleEntry(t,e),intArray:r}}finally{this.draco.destroy(n)}}_disableAttributeTransforms(t){const{quantizedAttributes:e=[],octahedronAttributes:n=[]}=t,r=[...e,...n];for(const t of r)this.decoder.SkipAttributeTransform(this.draco[t])}_getQuantizationTransform(t,e){const{quantizedAttributes:n=[]}=e,r=t.attribute_type();if(n.map(t=>this.decoder[t]).includes(r)){const e=new this.draco.AttributeQuantizationTransform;try{if(e.InitFromAttribute(t))return{quantization_bits:e.quantization_bits(),range:e.range(),min_values:new Float32Array([1,2,3]).map(t=>e.min_value(t))}}finally{this.draco.destroy(e)}}return null}_getOctahedronTransform(t,e){const{octahedronAttributes:n=[]}=e,r=t.attribute_type();if(n.map(t=>this.decoder[t]).includes(r)){const e=new this.draco.AttributeQuantizationTransform;try{if(e.InitFromAttribute(t))return{quantization_bits:e.quantization_bits()}}finally{this.draco.destroy(e)}}return null}}const we="https://www.gstatic.com/draco/versioned/decoders/1.5.6",Ie="draco_wasm_wrapper.js",Re="draco_decoder.wasm",xe="draco_decoder.js",Me="draco_encoder.js",Ne={[Ie]:`${we}/${Ie}`,[Re]:`${we}/${Re}`,[xe]:`${we}/${xe}`,[Me]:"https://raw.githubusercontent.com/google/draco/1.4.1/javascript/"+Me};let Fe;async function Le(t){const e=t.modules||{};return Fe=e.draco3d?Fe||e.draco3d.createDecoderModule({}).then(t=>({draco:t})):Fe||async function(t){let e,n;switch(t.draco&&t.draco.decoderType){case"js":e=await W(Ne[xe],"draco",t,xe);break;case"wasm":default:[e,n]=await Promise.all([await W(Ne[Ie],"draco",t,Ie),await W(Ne[Re],"draco",t,Re)])}return e=e||globalThis.DracoDecoderModule,await function(t,e){const n={};e&&(n.wasmBinary=e);return new Promise(e=>{t({...n,onModuleLoaded:t=>e({draco:t})})})}(e,n)}(t),await Fe}const De={...Ee,parse:async function(t,e){const{draco:n}=await Le(e),r=new Se(n);try{return r.parseSync(t,null==e?void 0:e.draco)}finally{r.destroy()}}};function Pe(t){const{buffer:e,size:n,count:r}=function(t){let e=t,n=1,r=0;t&&t.value&&(e=t.value,n=t.size||1);e&&(ArrayBuffer.isView(e)||(e=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return null;if(Array.isArray(t))return new e(t);if(n&&!(t instanceof e))return new e(t);return t}(e,Float32Array)),r=e.length/n);return{buffer:e,size:n,count:r}}(t);return{value:e,size:n,byteOffset:0,count:r,type:Object(wt.b)(n),componentType:Object(wt.c)(e)}}const Ue="KHR_draco_mesh_compression";function Ge(t,e,n){const r=new Rt(t);for(const t of ze(r))r.getObjectExtension(t,"KHR_draco_mesh_compression")}async function je(t,e,n){var r;if(null==e||null===(r=e.gltf)||void 0===r||!r.decompressMeshes)return;const i=new Rt(t),s=[];for(const t of ze(i))i.getObjectExtension(t,"KHR_draco_mesh_compression")&&s.push(ke(i,t,e,n));await Promise.all(s),i.removeExtension("KHR_draco_mesh_compression")}function He(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new Rt(t);for(const t of n.json.meshes||[])Ve(t,e),n.addRequiredExtension("KHR_draco_mesh_compression")}async function ke(t,e,n,r){const i=t.getObjectExtension(e,"KHR_draco_mesh_compression");if(!i)return;const s=t.getTypedArrayForBufferView(i.bufferView),o=Object(m.c)(s.buffer,s.byteOffset),a={...n};delete a["3d-tiles"];const c=await Object(p.a)(o,De,a,r),u=function(t){const e={};for(const n in t){const r=t[n];if("indices"!==n){const t=Pe(r);e[n]=t}}return e}(c.attributes);for(const[n,r]of Object.entries(u))if(n in e.attributes){const i=e.attributes[n],s=t.getAccessor(i);null!=s&&s.min&&null!=s&&s.max&&(r.min=s.min,r.max=s.max)}e.attributes=u,c.indices&&(e.indices=Pe(c.indices)),t.removeObjectExtension(e,"KHR_draco_mesh_compression"),function(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}function Ve(t,e){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const o=i.DracoWriter.encodeSync({attributes:t}),a=null==s||null===(n=s.parseSync)||void 0===n?void 0:n.call(s,{attributes:t}),c=i._addFauxAttributes(a.attributes),u=i.addBufferView(o),l={primitives:[{attributes:c,mode:r,extensions:{KHR_draco_mesh_compression:{bufferView:u,attributes:c}}}]};return l}function*ze(t){for(const e of t.json.meshes||[])for(const t of e.primitives)yield t}Math.PI,Math.PI;globalThis.mathgl=globalThis.mathgl||{config:{EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1}};const Xe=globalThis.mathgl.config;function Je(t,{precision:e=Xe.precision}={}){return t=function(t){return Math.round(t/Xe.EPSILON)*Xe.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function We(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ke(t,e,n){const r=Xe.EPSILON;n&&(Xe.EPSILON=n);try{if(t===e)return!0;if(We(t)&&We(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ke(t[n],e[n]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=Xe.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{Xe.EPSILON=r}}class qe extends(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}toArray(t=[],e=0){for(let n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}toObject(t){return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:We(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Xe)}formatString(t){let e="";for(let n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+Je(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!Ke(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,n){if(void 0===n)return this.lerp(this,t,e);for(let r=0;r<this.ELEMENTS;++r){const i=t[r],s="number"==typeof e?e:e[r];this[r]=i+n*(s-i)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}add(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]+=e[t];return this.check()}subtract(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]-=e[t];return this.check()}scale(t){if("number"==typeof t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;else for(let e=0;e<this.ELEMENTS&&e<t.length;++e)this[e]*=t[e];return this.check()}multiplyByScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}check(){if(Xe.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}get elements(){return this}}function Qe(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(JSON.stringify(t)));return t}function Ye(t,e,n=""){if(Xe.debug&&!function(t,e){if(t.length!==e)return!1;for(let e=0;e<t.length;++e)if(!Number.isFinite(t[e]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}function Ze(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}class $e extends qe{get x(){return this[0]}set x(t){this[0]=Qe(t)}get y(){return this[1]}set y(t){this[1]=Qe(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let n=0;n<this.ELEMENTS;++n){const r=this[n]-t[n];e+=r*r}return Qe(e)}dot(t){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return Qe(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e[t];return this.check()}divide(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return Ze(t>=0&&t<this.ELEMENTS,"index is out of range"),Qe(this[t])}setComponent(t,e){return Ze(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}let tn="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function en(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function nn(t,e,n){const r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}!function(){const t=function(){const t=new tn(3);return tn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}()}();const rn=[0,0,0];let sn;class on extends $e{static get ZERO(){return sn||(sn=new on(0,0,0),Object.freeze(sn)),sn}constructor(t=0,e=0,n=0){super(-0,-0,-0),1===arguments.length&&We(t)?this.copy(t):(Xe.debug&&(Qe(t),Qe(e),Qe(n)),this[0]=t,this[1]=e,this[2]=n)}set(t,e,n){return this[0]=t,this[1]=e,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return Xe.debug&&(Qe(t.x),Qe(t.y),Qe(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=Qe(t)}angle(t){return function(t,e){const n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],c=Math.sqrt((n*n+r*r+i*i)*(s*s+o*o+a*a)),u=c&&en(t,e)/c;return Math.acos(Math.min(Math.max(u,-1),1))}(this,t)}cross(t){return function(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],c=n[2];t[0]=i*c-s*a,t[1]=s*o-r*c,t[2]=r*a-i*o}(this,this,t),this.check()}rotateX({radians:t,origin:e=rn}){return function(t,e,n,r){const i=[],s=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,e,t),this.check()}rotateY({radians:t,origin:e=rn}){return function(t,e,n,r){const i=[],s=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,e,t),this.check()}rotateZ({radians:t,origin:e=rn}){return function(t,e,n,r){const i=[],s=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,e,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return function(t,e,n){const r=e[0],i=e[1],s=e[2];let o=n[3]*r+n[7]*i+n[11]*s+n[15];o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o}(this,this,t),this.check()}transformAsVector(t){return function(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s||1;t[0]=(n[0]*r+n[4]*i+n[8]*s)/o,t[1]=(n[1]*r+n[5]*i+n[9]*s)/o,t[2]=(n[2]*r+n[6]*i+n[10]*s)/o}(this,this,t),this.check()}transformByMatrix3(t){return nn(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,n){const r=e[0],i=e[1];t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2]}(this,this,t),this.check()}transformByQuaternion(t){return function(t,e,n){const r=n[0],i=n[1],s=n[2],o=n[3],a=e[0],c=e[1],u=e[2];let l=i*u-s*c,h=s*a-r*u,f=r*c-i*a,d=i*f-s*h,g=s*l-r*f,m=r*h-i*l;const p=2*o;l*=p,h*=p,f*=p,d*=2,g*=2,m*=2,t[0]=a+l+d,t[1]=c+h+g,t[2]=u+f+m}(this,this,t),this.check()}}class an extends qe{toString(){let t="[";if(Xe.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+e])}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=" ".concat(this[e])}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,n){return this[e*this.RANK+t]=Qe(n),this}getColumn(t,e=new Array(this.RANK).fill(-0)){const n=t*this.RANK;for(let t=0;t<this.RANK;++t)e[t]=this[n+t];return e}setColumn(t,e){const n=t*this.RANK;for(let t=0;t<this.RANK;++t)this[n+t]=e[t];return this}}function cn(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],u=e[6],l=e[7],h=e[8],f=n[0],d=n[1],g=n[2],m=n[3],p=n[4],_=n[5],b=n[6],A=n[7],E=n[8];return t[0]=f*r+d*o+g*u,t[1]=f*i+d*a+g*l,t[2]=f*s+d*c+g*h,t[3]=m*r+p*o+_*u,t[4]=m*i+p*a+_*l,t[5]=m*s+p*c+_*h,t[6]=b*r+A*o+E*u,t[7]=b*i+A*a+E*l,t[8]=b*s+A*c+E*h,t}function un(t,e,n){const r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}!function(){const t=function(){const t=new tn(2);return tn!=Float32Array&&(t[0]=0,t[1]=0),t}()}();var ln;!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"}(ln||(ln={}));const hn=Object.freeze([1,0,0,0,1,0,0,0,1]);class fn extends an{static get IDENTITY(){return function(){gn||(gn=new fn,Object.freeze(gn));return gn}()}static get ZERO(){return function(){dn||(dn=new fn([0,0,0,0,0,0,0,0,0]),Object.freeze(dn));return dn}()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return ln}constructor(t,...e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):e.length>0?this.copy([t,...e]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(hn)}fromObject(t){return this.check()}fromQuaternion(t){return function(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,c=i+i,u=n*o,l=r*o,h=r*a,f=i*o,d=i*a,g=i*c,m=s*o,p=s*a,_=s*c;t[0]=1-h-g,t[3]=l-_,t[6]=f+p,t[1]=l+_,t[4]=1-u-g,t[7]=d-m,t[2]=f-p,t[5]=d+m,t[8]=1-u-h}(this,t),this.check()}set(t,e,n,r,i,s,o,a,c){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=s,this[6]=o,this[7]=a,this[8]=c,this.check()}setRowMajor(t,e,n,r,i,s,o,a,c){return this[0]=t,this[1]=r,this[2]=o,this[3]=e,this[4]=i,this[5]=a,this[6]=n,this[7]=s,this[8]=c,this.check()}determinant(){return function(t){const e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],c=t[7],u=t[8];return e*(u*s-o*c)+n*(-u*i+o*a)+r*(c*i-s*a)}(this)}transpose(){return function(t,e){if(t===e){const n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){return function(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],u=e[7],l=e[8],h=l*o-a*u,f=-l*s+a*c,d=u*s-o*c;let g=n*h+r*f+i*d;g&&(g=1/g,t[0]=h*g,t[1]=(-l*r+i*u)*g,t[2]=(a*r-i*o)*g,t[3]=f*g,t[4]=(l*n-i*c)*g,t[5]=(-a*n+i*s)*g,t[6]=d*g,t[7]=(-u*n+r*c)*g,t[8]=(o*n-r*s)*g)}(this,this),this.check()}multiplyLeft(t){return cn(this,t,this),this.check()}multiplyRight(t){return cn(this,this,t),this.check()}rotate(t){return function(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],u=e[6],l=e[7],h=e[8],f=Math.sin(n),d=Math.cos(n);t[0]=d*r+f*o,t[1]=d*i+f*a,t[2]=d*s+f*c,t[3]=d*o-f*r,t[4]=d*a-f*i,t[5]=d*c-f*s,t[6]=u,t[7]=l,t[8]=h}(this,this,t),this.check()}scale(t){return Array.isArray(t)?un(this,this,t):un(this,this,[t,t]),this.check()}translate(t){return function(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],u=e[6],l=e[7],h=e[8],f=n[0],d=n[1];t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=a,t[5]=c,t[6]=f*r+d*o+u,t[7]=f*i+d*a+l,t[8]=f*s+d*c+h}(this,this,t),this.check()}transform(t,e){let n;switch(t.length){case 2:n=function(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}(e||[-0,-0],t,this);break;case 3:n=nn(e||[-0,-0,-0],t,this);break;case 4:n=function(t,e,n){const r=e[0],i=e[1],s=e[2];return t[0]=n[0]*r+n[3]*i+n[6]*s,t[1]=n[1]*r+n[4]*i+n[7]*s,t[2]=n[2]*r+n[5]*i+n[8]*s,t[3]=e[3],t}(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Ye(n,t.length),n}transformVector(t,e){return this.transform(t,e)}transformVector2(t,e){return this.transform(t,e)}transformVector3(t,e){return this.transform(t,e)}}let dn,gn=null;var mn=n(534);const pn="KHR_texture_transform",_n=new on,bn=new fn,An=new fn;async function En(t,e){var n;if(!new Rt(t).hasExtension("KHR_texture_transform")||null===(n=e.gltf)||void 0===n||!n.loadBuffers)return;const r=t.json.materials||[];for(let e=0;e<r.length;e++)yn(e,t)}function yn(t,e){var n,r,i;const s=[],o=null===(n=e.json.materials)||void 0===n?void 0:n[t],a=null==o||null===(r=o.pbrMetallicRoughness)||void 0===r?void 0:r.baseColorTexture;a&&vn(e,t,a,s);const c=null==o?void 0:o.emissiveTexture;c&&vn(e,t,c,s);const u=null==o?void 0:o.normalTexture;u&&vn(e,t,u,s);const l=null==o?void 0:o.occlusionTexture;l&&vn(e,t,l,s);const h=null==o||null===(i=o.pbrMetallicRoughness)||void 0===i?void 0:i.metallicRoughnessTexture;h&&vn(e,t,h,s)}function vn(t,e,n,r){const i=function(t,e){var n;const r=null===(n=t.extensions)||void 0===n?void 0:n.KHR_texture_transform,{texCoord:i=0}=t,{texCoord:s=i}=r;if(-1===e.findIndex(t=>{let[e,n]=t;return e===i&&n===s})){const n=function(t){const{offset:e=[0,0],rotation:n=0,scale:r=[1,1]}=t,i=(new fn).set(1,0,0,0,1,0,e[0],e[1],1),s=bn.set(Math.cos(n),Math.sin(n),0,-Math.sin(n),Math.cos(n),0,0,0,1),o=An.set(r[0],0,0,0,r[1],0,0,0,1);return i.multiplyRight(s).multiplyRight(o)}(r);return i!==s&&(t.texCoord=s),e.push([i,s]),{originalTexCoord:i,texCoord:s,matrix:n}}return null}(n,r);if(!i)return;const s=t.json.meshes||[];for(const n of s)for(const r of n.primitives){const n=r.material;Number.isFinite(n)&&e===n&&Tn(t,r,i)}}function Tn(t,e,n){const{originalTexCoord:r,texCoord:i,matrix:s}=n,o=e.attributes["TEXCOORD_"+r];if(Number.isFinite(o)){var a;const n=null===(a=t.json.accessors)||void 0===a?void 0:a[o];if(n&&n.bufferView){var c;const o=null===(c=t.json.bufferViews)||void 0===c?void 0:c[n.bufferView];if(o){const{arrayBuffer:a,byteOffset:c}=t.buffers[o.buffer],u=(c||0)+(n.byteOffset||0)+(o.byteOffset||0),{ArrayType:l,length:h}=Object(wt.a)(n,o),f=mn.a[n.componentType],d=mn.b[n.type],g=o.byteStride||f*d,m=new Float32Array(h);for(let t=0;t<n.count;t++){const e=new l(a,u+t*g,2);_n.set(e[0],e[1],1),_n.transformByMatrix3(s),m.set([_n[0],_n[1]],t*d)}r===i?function(t,e,n,r){t.componentType=5126,n.push({arrayBuffer:r.buffer,byteOffset:0,byteLength:r.buffer.byteLength}),e.buffer=n.length-1,e.byteLength=r.buffer.byteLength,e.byteOffset=0,delete e.byteStride}(n,o,t.buffers,m):function(t,e,n,r,i){r.buffers.push({arrayBuffer:i.buffer,byteOffset:0,byteLength:i.buffer.byteLength});const s=r.json.bufferViews;if(!s)return;s.push({buffer:r.buffers.length-1,byteLength:i.buffer.byteLength,byteOffset:0});const o=r.json.accessors;if(!o)return;o.push({bufferView:(null==s?void 0:s.length)-1,byteOffset:0,componentType:5126,count:e.count,type:"VEC2"}),n.attributes["TEXCOORD_"+t]=o.length-1}(i,n,e,t,m)}}}}const Bn="KHR_lights_punctual";async function Cn(t){const e=new Rt(t),{json:n}=e,r=e.getExtension("KHR_lights_punctual");r&&(e.json.lights=r.lights,e.removeExtension("KHR_lights_punctual"));for(const t of n.nodes||[]){const n=e.getObjectExtension(t,"KHR_lights_punctual");n&&(t.light=n.light),e.removeObjectExtension(t,"KHR_lights_punctual")}}async function On(t){const e=new Rt(t),{json:n}=e;if(n.lights){const t=e.addExtension("KHR_lights_punctual");Object(bt.a)(!t.lights),t.lights=n.lights,delete n.lights}if(e.json.lights){for(const t of e.json.lights){const n=t.node;e.addObjectExtension(n,"KHR_lights_punctual",t)}delete e.json.lights}}const Sn="KHR_materials_unlit";async function wn(t){const e=new Rt(t),{json:n}=e;for(const t of n.materials||[]){t.extensions&&t.extensions.KHR_materials_unlit&&(t.unlit=!0),e.removeObjectExtension(t,"KHR_materials_unlit")}e.removeExtension("KHR_materials_unlit")}function In(t){const e=new Rt(t),{json:n}=e;if(e.materials)for(const t of n.materials||[])t.unlit&&(delete t.unlit,e.addObjectExtension(t,"KHR_materials_unlit",{}),e.addExtension("KHR_materials_unlit"))}const Rn="KHR_techniques_webgl";async function xn(t){const e=new Rt(t),{json:n}=e,r=e.getExtension("KHR_techniques_webgl");if(r){const t=function(t,e){const{programs:n=[],shaders:r=[],techniques:i=[]}=t,s=new TextDecoder;return r.forEach(t=>{if(!Number.isFinite(t.bufferView))throw new Error("KHR_techniques_webgl: no shader code");t.code=s.decode(e.getTypedArrayForBufferView(t.bufferView))}),n.forEach(t=>{t.fragmentShader=r[t.fragmentShader],t.vertexShader=r[t.vertexShader]}),i.forEach(t=>{t.program=n[t.program]}),i}(r,e);for(const r of n.materials||[]){const n=e.getObjectExtension(r,"KHR_techniques_webgl");n&&(r.technique=Object.assign({},n,t[n.technique]),r.technique.values=Nn(r.technique,e)),e.removeObjectExtension(r,"KHR_techniques_webgl")}e.removeExtension("KHR_techniques_webgl")}}async function Mn(t,e){}function Nn(t,e){const n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(e=>{t.uniforms[e].value&&!(e in n)&&(n[e]=t.uniforms[e].value)}),Object.keys(n).forEach(t=>{"object"==typeof n[t]&&void 0!==n[t].index&&(n[t].texture=e.getTexture(n[t].index))}),n}const Fn="EXT_feature_metadata";async function Ln(t,e){!function(t,e){var n,r;if(null===(n=e.gltf)||void 0===n||!n.loadBuffers)return;const i=t.getExtension("EXT_feature_metadata");if(!i)return;null!==(r=e.gltf)&&void 0!==r&&r.loadImages&&function(t,e){const n=e.schema;if(!n)return;const r=n.classes,{featureTextures:i}=e;if(r&&i)for(const e in r){const n=r[e],s=Pn(i,e);s&&Gn(t,s,n)}}(t,i);!function(t,e){const n=e.schema;if(!n)return;const r=n.classes,i=e.featureTables;if(r&&i)for(const e in r){const r=Dn(i,e);r&&Un(t,n,r)}}(t,i)}(new Rt(t),e)}function Dn(t,e){for(const n in t){const r=t[n];if(r.class===e)return r}return null}function Pn(t,e){for(const n in t){const r=t[n];if(r.class===e)return r}return null}function Un(t,e,n){var r;if(!n.class)return;const i=null===(r=e.classes)||void 0===r?void 0:r[n.class];if(!i)throw new Error("Incorrect data in the EXT_structural_metadata extension: no schema class with name "+n.class);const s=n.count;for(const r in i.properties){var o;const a=i.properties[r],c=null===(o=n.properties)||void 0===o?void 0:o[r];if(c){const n=jn(t,e,a,s,c);c.data=n}}}function Gn(t,e,n){const r=e.class;for(const s in n.properties){var i;const n=null==e||null===(i=e.properties)||void 0===i?void 0:i[s];if(n){const e=Hn(t,n,r);n.data=e}}}function jn(t,e,n,r,i){let s=[];const o=i.bufferView,a=t.getTypedArrayForBufferView(o),c=function(t,e,n,r){if("ARRAY"===e.type&&void 0===e.componentCount&&void 0!==n.arrayOffsetBufferView)return Dt(t,n.arrayOffsetBufferView,n.offsetType||"UINT32",r);return null}(t,n,i,r),u=function(t,e,n,r){if(void 0!==n.stringOffsetBufferView)return Dt(t,n.stringOffsetBufferView,n.offsetType||"UINT32",r);return null}(t,0,i,r);return"STRING"===n.type||"STRING"===n.componentType?s=zt(r,a,c,u):function(t){const e=["UINT8","INT16","UINT16","INT32","UINT32","INT64","UINT64","FLOAT32","FLOAT64"];return e.includes(t.type)||void 0!==t.componentType&&e.includes(t.componentType)}(n)&&(s=function(t,e,n,r){const i="ARRAY"===t.type,s=t.componentCount,o=t.componentType||t.type,a=Lt("SCALAR",o),c=n.byteLength/a,u=Pt(n,"SCALAR",o,c);if(i)return r?kt(u,e,r,n.length,a):s?Vt(u,e,s):[];return u}(n,r,a,c)),s}function Hn(t,e,n){const r=t.gltf.json;if(!r.meshes)return[];const i=[];for(const s of r.meshes)for(const r of s.primitives)kn(t,n,e,i,r);return i}function kn(t,e,n,r,i){const s=Ut(t,{channels:n.channels,...n.texture},i);s&&Gt(t,e,s,r,i)}const Vn=[i,r,s,o,a,c,l,h,f,u,d];function zn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=Vn.filter(t=>Jn(t.name,e));for(const s of r){var i;null===(i=s.preprocess)||void 0===i||i.call(s,t,e,n)}}async function Xn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=Vn.filter(t=>Jn(t.name,e));for(const s of r){var i;await(null===(i=s.decode)||void 0===i?void 0:i.call(s,t,e,n))}}function Jn(t,e){var n;const r=(null==e||null===(n=e.gltf)||void 0===n?void 0:n.excludeExtensions)||{};return!(t in r&&!r[t])}const Wn={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},Kn={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class qn{constructor(){this.idToIndexMap={animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}},this.json=void 0}normalize(t,e){this.json=t.json;const n=t.json;switch(n.asset&&n.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version "+n.asset.version)}if(!e.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(n),this._convertTopLevelObjectsToArrays(n),function(t){const e=new Rt(t),{json:n}=e;for(const t of n.images||[]){const n=e.getObjectExtension(t,"KHR_binary_glTF");n&&Object.assign(t,n),e.removeObjectExtension(t,"KHR_binary_glTF")}n.buffers&&n.buffers[0]&&delete n.buffers[0].uri,e.removeExtension("KHR_binary_glTF")}(t),this._convertObjectIdsToArrayIndices(n),this._updateObjects(n),this._updateMaterial(n)}_addAsset(t){t.asset=t.asset||{},t.asset.version="2.0",t.asset.generator=t.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(t){for(const e in Wn)this._convertTopLevelObjectToArray(t,e)}_convertTopLevelObjectToArray(t,e){const n=t[e];if(n&&!Array.isArray(n)){t[e]=[];for(const r in n){const i=n[r];i.id=i.id||r;const s=t[e].length;t[e].push(i),this.idToIndexMap[e][r]=s}}}_convertObjectIdsToArrayIndices(t){for(const e in Wn)this._convertIdsToIndices(t,e);"scene"in t&&(t.scene=this._convertIdToIndex(t.scene,"scene"));for(const e of t.textures)this._convertTextureIds(e);for(const e of t.meshes)this._convertMeshIds(e);for(const e of t.nodes)this._convertNodeIds(e);for(const e of t.scenes)this._convertSceneIds(e)}_convertTextureIds(t){t.source&&(t.source=this._convertIdToIndex(t.source,"image"))}_convertMeshIds(t){for(const e of t.primitives){const{attributes:t,indices:n,material:r}=e;for(const e in t)t[e]=this._convertIdToIndex(t[e],"accessor");n&&(e.indices=this._convertIdToIndex(n,"accessor")),r&&(e.material=this._convertIdToIndex(r,"material"))}}_convertNodeIds(t){t.children&&(t.children=t.children.map(t=>this._convertIdToIndex(t,"node"))),t.meshes&&(t.meshes=t.meshes.map(t=>this._convertIdToIndex(t,"mesh")))}_convertSceneIds(t){t.nodes&&(t.nodes=t.nodes.map(t=>this._convertIdToIndex(t,"node")))}_convertIdsToIndices(t,e){t[e]||(console.warn("gltf v1: json doesn't contain attribute "+e),t[e]=[]);for(const n of t[e])for(const t in n){const e=n[t],r=this._convertIdToIndex(e,t);n[t]=r}}_convertIdToIndex(t,e){const n=Kn[e];if(n in this.idToIndexMap){const r=this.idToIndexMap[n][t];if(!Number.isFinite(r))throw new Error(`gltf v1: failed to resolve ${e} with id ${t}`);return r}return t}_updateObjects(t){for(const t of this.json.buffers)delete t.type}_updateMaterial(t){for(const i of t.materials){var e,n,r;i.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const s=(null===(e=i.values)||void 0===e?void 0:e.tex)||(null===(n=i.values)||void 0===n?void 0:n.texture2d_0)||(null===(r=i.values)||void 0===r?void 0:r.diffuseTex),o=t.textures.findIndex(t=>t.id===s);-1!==o&&(i.pbrMetallicRoughness.baseColorTexture={index:o})}}}function Qn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new qn).normalize(t,e)}async function Yn(t,e){var n,r,i;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return Zn(t,e,s,o),Qn(t,{normalize:null==o||null===(n=o.gltf)||void 0===n?void 0:n.normalize}),zn(t,o,a),null!=o&&null!==(r=o.gltf)&&void 0!==r&&r.loadBuffers&&t.json.buffers&&await $n(t,o,a),null!=o&&null!==(i=o.gltf)&&void 0!==i&&i.loadImages&&await tr(t,o,a),await Xn(t,o,a),t}function Zn(t,e,n,r){if(r.uri&&(t.baseUri=r.uri),e instanceof ArrayBuffer&&!vt(e,n,r)){e=(new TextDecoder).decode(e)}if("string"==typeof e)t.json=Object(g.a)(e);else if(e instanceof ArrayBuffer){const i={};n=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=new DataView(e),s=yt(i,n+0),o=i.getUint32(n+4,!0),a=i.getUint32(n+8,!0);switch(Object.assign(t,{header:{byteOffset:n,byteLength:a,hasBinChunk:!1},type:s,version:o,json:{},binChunks:[]}),n+=12,t.version){case 1:return Tt(t,i,n);case 2:return Bt(t,i,n,r={});default:throw new Error(`Invalid GLB version ${t.version}. Only supports version 1 and 2.`)}}(i,e,n,r.glb),Object(bt.a)("glTF"===i.type,"Invalid GLB magic string "+i.type),t._glb=i,t.json=i.json}else Object(bt.a)(!1,"GLTF: must be ArrayBuffer or string");const i=t.json.buffers||[];if(t.buffers=new Array(i.length).fill(null),t._glb&&t._glb.header.hasBinChunk){const{binChunks:e}=t._glb;t.buffers[0]={arrayBuffer:e[0].arrayBuffer,byteOffset:e[0].byteOffset,byteLength:e[0].byteLength}}const s=t.json.images||[];t.images=new Array(s.length).fill({})}async function $n(t,e,n){const r=t.json.buffers||[];for(let o=0;o<r.length;++o){const a=r[o];if(a.uri){var i,s;const{fetch:r}=n;Object(bt.a)(r);const c=St(a.uri,e),u=await(null==n||null===(i=n.fetch)||void 0===i?void 0:i.call(n,c)),l=await(null==u||null===(s=u.arrayBuffer)||void 0===s?void 0:s.call(u));t.buffers[o]={arrayBuffer:l,byteOffset:0,byteLength:l.byteLength},delete a.uri}else null===t.buffers[o]&&(t.buffers[o]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}async function tr(t,e,n){const r=function(t){const e=new Set,n=t.json.textures||[];for(const t of n)void 0!==t.source&&e.add(t.source);return Array.from(e).sort()}(t),i=t.json.images||[],s=[];for(const o of r)s.push(er(t,i[o],o,e,n));return await Promise.all(s)}async function er(t,e,n,r,i){let s;if(e.uri&&!e.hasOwnProperty("bufferView")){const t=St(e.uri,r),{fetch:n}=i,o=await n(t);s=await o.arrayBuffer(),e.bufferView={data:s}}if(Number.isFinite(e.bufferView)){const n=It(t.json,t.buffers,e.bufferView);s=Object(m.c)(n.buffer,n.byteOffset,n.byteLength)}Object(bt.a)(s,"glTF image has no data");let o=await Object(p.a)(s,[H,_t],{...r,mimeType:e.mimeType,basis:r.basis||{format:pt()}},i);o&&o[0]&&(o={compressed:!0,mipmaps:!1,width:o[0].width,height:o[0].height,data:o[0]}),t.images=t.images||[],t.images[n]=o}const nr={name:"glTF",id:"gltf",module:"gltf",version:"4.1.0-alpha.4",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;e={...nr.options,...e},e.gltf={...nr.options.gltf,...e.gltf};const{byteOffset:r=0}=e,i={};return await Yn(i,t,r,e,n)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0},log:console}}},2182:function(t,e,n){"use strict";n.d(e,"a",(function(){return he}));var r={};n.r(r),n.d(r,"readFileAsArrayBuffer",(function(){return v})),n.d(r,"readFileAsText",(function(){return T})),n.d(r,"requireFromFile",(function(){return B})),n.d(r,"requireFromString",(function(){return C}));var i=n(84),s=n(90);const o={COMPOSITE:"cmpt",POINT_CLOUD:"pnts",BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",GEOMETRY:"geom",VECTOR:"vect",GLTF:"glTF"};Object.keys(o);var a=n(416);function c(t,e,n){Object(a.a)(t instanceof ArrayBuffer);const r=new TextDecoder("utf8"),i=new Uint8Array(t,e,n);return r.decode(i)}function u(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=new DataView(t);return"".concat(String.fromCharCode(n.getUint8(e+0))).concat(String.fromCharCode(n.getUint8(e+1))).concat(String.fromCharCode(n.getUint8(e+2))).concat(String.fromCharCode(n.getUint8(e+3)))}var l=n(373);const h={draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}},f={name:"Draco",id:l.b?"draco":"draco-nodejs",module:"draco",shapes:["mesh"],version:"3.4.14",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:h};var d=n(3),g=n(849),m=n(621),p=n(1455);function _(t,e,n){const r=n?b(n.metadata):void 0;return Object(m.a)(t,e,r)}function b(t){const e=new Map;for(const n in t)e.set("".concat(n,".string"),JSON.stringify(t[n]));return e}const A={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},E={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class y{constructor(t){Object(d.a)(this,"draco",void 0),Object(d.a)(this,"decoder",void 0),Object(d.a)(this,"metadataQuerier",void 0),this.draco=t,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new this.draco.DecoderBuffer;n.Init(new Int8Array(t),t.byteLength),this._disableAttributeTransforms(e);const r=this.decoder.GetEncodedGeometryType(n),i=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let t;switch(r){case this.draco.TRIANGULAR_MESH:t=this.decoder.DecodeBufferToMesh(n,i);break;case this.draco.POINT_CLOUD:t=this.decoder.DecodeBufferToPointCloud(n,i);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!t.ok()||!i.ptr){const e="DRACO decompression failed: ".concat(t.error_msg());throw new Error(e)}const s=this._getDracoLoaderData(i,r,e),o=this._getMeshData(i,s,e),a=Object(g.a)(o.attributes),c=function(t,e,n){const r=b(e.metadata),i=[],s=function(t){const e={};for(const n in t){const r=t[n];e[r.name||"undefined"]=r}return e}(e.attributes);for(const e in t){const n=_(e,t[e],s[e]);i.push(n)}if(n){const t=_("indices",n);i.push(t)}return new p.a(i,r)}(o.attributes,s,o.indices);return{loader:"draco",loaderData:s,header:{vertexCount:i.num_points(),boundingBox:a},...o,schema:c}}finally{this.draco.destroy(n),i&&this.draco.destroy(i)}}_getDracoLoaderData(t,e,n){const r=this._getTopLevelMetadata(t),i=this._getDracoAttributes(t,n);return{geometry_type:e,num_attributes:t.num_attributes(),num_points:t.num_points(),num_faces:t instanceof this.draco.Mesh?t.num_faces():0,metadata:r,attributes:i}}_getDracoAttributes(t,e){const n={};for(let r=0;r<t.num_attributes();r++){const i=this.decoder.GetAttribute(t,r),s=this._getAttributeMetadata(t,r);n[i.unique_id()]={unique_id:i.unique_id(),attribute_type:i.attribute_type(),data_type:i.data_type(),num_components:i.num_components(),byte_offset:i.byte_offset(),byte_stride:i.byte_stride(),normalized:i.normalized(),attribute_index:r,metadata:s};const o=this._getQuantizationTransform(i,e);o&&(n[i.unique_id()].quantization_transform=o);const a=this._getOctahedronTransform(i,e);a&&(n[i.unique_id()].octahedron_transform=a)}return n}_getMeshData(t,e,n){const r=this._getMeshAttributes(e,t,n);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");if(t instanceof this.draco.Mesh)switch(n.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(t),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(t),size:1}}}return{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(t,e,n){const r={};for(const i of Object.values(t.attributes)){const t=this._deduceAttributeName(i,n);i.name=t;const{value:s,size:o}=this._getAttributeValues(e,i);r[t]={value:s,size:o,byteOffset:i.byte_offset,byteStride:i.byte_stride,normalized:i.normalized}}return r}_getTriangleListIndices(t){const e=3*t.num_faces(),n=4*e,r=this.draco._malloc(n);try{return this.decoder.GetTrianglesUInt32Array(t,n,r),new Uint32Array(this.draco.HEAPF32.buffer,r,e).slice()}finally{this.draco._free(r)}}_getTriangleStripIndices(t){const e=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(t,e),function(t){const e=t.size(),n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=t.GetValue(r);return n}(e)}finally{this.draco.destroy(e)}}_getAttributeValues(t,e){const n=E[e.data_type],r=e.num_components,i=t.num_points()*r,s=i*n.BYTES_PER_ELEMENT,o=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}(this.draco,n);let a;const c=this.draco._malloc(s);try{const r=this.decoder.GetAttribute(t,e.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(t,r,o,s,c),a=new n(this.draco.HEAPF32.buffer,c,i).slice()}finally{this.draco._free(c)}return{value:a,size:r}}_deduceAttributeName(t,e){const n=t.unique_id;for(const[t,r]of Object.entries(e.extraAttributes||{}))if(r===n)return t;const r=t.attribute_type;for(const t in A){if(this.draco[t]===r)return A[t]}const i=e.attributeNameEntry||"name";return t.metadata[i]?t.metadata[i].string:"CUSTOM_ATTRIBUTE_".concat(n)}_getTopLevelMetadata(t){const e=this.decoder.GetMetadata(t);return this._getDracoMetadata(e)}_getAttributeMetadata(t,e){const n=this.decoder.GetAttributeMetadata(t,e);return this._getDracoMetadata(n)}_getDracoMetadata(t){if(!t||!t.ptr)return{};const e={},n=this.metadataQuerier.NumEntries(t);for(let r=0;r<n;r++){const n=this.metadataQuerier.GetEntryName(t,r);e[n]=this._getDracoMetadataField(t,n)}return e}_getDracoMetadataField(t,e){const n=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(t,e,n);const r=function(t){const e=t.size(),n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=t.GetValue(r);return n}(n);return{int:this.metadataQuerier.GetIntEntry(t,e),string:this.metadataQuerier.GetStringEntry(t,e),double:this.metadataQuerier.GetDoubleEntry(t,e),intArray:r}}finally{this.draco.destroy(n)}}_disableAttributeTransforms(t){const{quantizedAttributes:e=[],octahedronAttributes:n=[]}=t,r=[...e,...n];for(const t of r)this.decoder.SkipAttributeTransform(this.draco[t])}_getQuantizationTransform(t,e){const{quantizedAttributes:n=[]}=e,r=t.attribute_type();if(n.map(t=>this.decoder[t]).includes(r)){const e=new this.draco.AttributeQuantizationTransform;try{if(e.InitFromAttribute(t))return{quantization_bits:e.quantization_bits(),range:e.range(),min_values:new Float32Array([1,2,3]).map(t=>e.min_value(t))}}finally{this.draco.destroy(e)}}return null}_getOctahedronTransform(t,e){const{octahedronAttributes:n=[]}=e,r=t.attribute_type();if(n.map(t=>this.decoder[t]).includes(r)){const e=new this.draco.AttributeQuantizationTransform;try{if(e.InitFromAttribute(t))return{quantization_bits:e.quantization_bits()}}finally{this.draco.destroy(e)}}return null}}const v=null,T=null,B=null,C=null;const O={};async function S(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e&&(t=w(t,e,n)),O[t]=O[t]||I(t),await O[t]}function w(t,e,n){if(t.startsWith("http"))return t;const r=n.modules||{};return r[t]?r[t]:l.b?n.CDN?(function(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat("3.4.14","/dist/libs/").concat(t)):l.c?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}async function I(t){if(t.endsWith("wasm")){const e=await fetch(t);return await e.arrayBuffer()}if(!l.b)try{return r&&B&&await B(t)}catch{return null}if(l.c)return importScripts(t);const e=await fetch(t);return function(t,e){if(!l.b)return C&&C(t,e);if(l.c)return eval.call(l.a,t),null;const n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch(e){n.text=t}return document.body.appendChild(n),null}(await e.text(),t)}const R="https://www.gstatic.com/draco/versioned/decoders/".concat("1.5.5"),x="".concat(R,"/draco_decoder.js"),M="".concat(R,"/draco_wasm_wrapper.js"),N="".concat(R,"/draco_decoder.wasm");"https://raw.githubusercontent.com/google/draco/".concat("1.4.1","/javascript/draco_encoder.js");let F;async function L(t){const e=t.modules||{};return F=e.draco3d?F||e.draco3d.createDecoderModule({}).then(t=>({draco:t})):F||async function(t){let e,n;switch(t.draco&&t.draco.decoderType){case"js":e=await S(x,"draco",t);break;case"wasm":default:[e,n]=await Promise.all([await S(M,"draco",t),await S(N,"draco",t)])}return e=e||globalThis.DracoDecoderModule,await function(t,e){const n={};e&&(n.wasmBinary=e);return new Promise(e=>{t({...n,onModuleLoaded:t=>e({draco:t})})})}(e,n)}(t),await F}l.b;const D={...f,parse:async function(t,e){const{draco:n}=await L(e),r=new y(n);try{return r.parseSync(t,null==e?void 0:e.draco)}finally{r.destroy()}}};const P={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130},U={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,...P};var G=n(957);const j={[P.DOUBLE]:Float64Array,[P.FLOAT]:Float32Array,[P.UNSIGNED_SHORT]:Uint16Array,[P.UNSIGNED_INT]:Uint32Array,[P.UNSIGNED_BYTE]:Uint8Array,[P.BYTE]:Int8Array,[P.SHORT]:Int16Array,[P.INT]:Int32Array},H={DOUBLE:P.DOUBLE,FLOAT:P.FLOAT,UNSIGNED_SHORT:P.UNSIGNED_SHORT,UNSIGNED_INT:P.UNSIGNED_INT,UNSIGNED_BYTE:P.UNSIGNED_BYTE,BYTE:P.BYTE,SHORT:P.SHORT,INT:P.INT};class k{static fromTypedArray(t){t=ArrayBuffer.isView(t)?t.constructor:t;for(const e in j){if(j[e]===t)return e}throw new Error("Failed to convert GL type")}static fromName(t){const e=H[t];if(!e)throw new Error("Failed to convert GL type");return e}static getArrayType(t){switch(t){case P.UNSIGNED_SHORT_5_6_5:case P.UNSIGNED_SHORT_4_4_4_4:case P.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;default:const e=j[t];if(!e)throw new Error("Failed to convert GL type");return e}}static getByteSize(t){return k.getArrayType(t).BYTES_PER_ELEMENT}static validate(t){return Boolean(k.getArrayType(t))}static createTypedArray(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;void 0===r&&(r=(e.byteLength-n)/k.getByteSize(t));return new(k.getArrayType(t))(e,n,r)}}class V{constructor(t,e){Object(d.a)(this,"json",void 0),Object(d.a)(this,"buffer",void 0),Object(d.a)(this,"featuresLength",0),Object(d.a)(this,"_cachedTypedArrays",{}),this.json=t,this.buffer=e}getExtension(t){return this.json.extensions&&this.json.extensions[t]}hasProperty(t){return Boolean(this.json[t])}getGlobalProperty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U.UNSIGNED_INT,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=this.json[t];return r&&Number.isFinite(r.byteOffset)?this._getTypedArrayFromBinary(t,e,n,1,r.byteOffset):r}getPropertyArray(t,e,n){const r=this.json[t];return r&&Number.isFinite(r.byteOffset)?("componentType"in r&&(e=k.fromName(r.componentType)),this._getTypedArrayFromBinary(t,e,n,this.featuresLength,r.byteOffset)):this._getTypedArrayFromArray(t,e,r)}getProperty(t,e,n,r,i){const s=this.json[t];if(!s)return s;const o=this.getPropertyArray(t,e,n);if(1===n)return o[r];for(let t=0;t<n;++t)i[t]=o[n*r+t];return i}_getTypedArrayFromBinary(t,e,n,r,i){const s=this._cachedTypedArrays;let o=s[t];return o||(o=k.createTypedArray(e,this.buffer.buffer,this.buffer.byteOffset+i,r*n),s[t]=o),o}_getTypedArrayFromArray(t,e,n){const r=this._cachedTypedArrays;let i=r[t];return i||(i=k.createTypedArray(e,n),r[t]=i),i}}const z={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},X={SCALAR:(t,e)=>t[e],VEC2:(t,e)=>[t[2*e+0],t[2*e+1]],VEC3:(t,e)=>[t[3*e+0],t[3*e+1],t[3*e+2]],VEC4:(t,e)=>[t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]],MAT2:(t,e)=>[t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]],MAT3:(t,e)=>[t[9*e+0],t[9*e+1],t[9*e+2],t[9*e+3],t[9*e+4],t[9*e+5],t[9*e+6],t[9*e+7],t[9*e+8]],MAT4:(t,e)=>[t[16*e+0],t[16*e+1],t[16*e+2],t[16*e+3],t[16*e+4],t[16*e+5],t[16*e+6],t[16*e+7],t[16*e+8],t[16*e+9],t[16*e+10],t[16*e+11],t[16*e+12],t[16*e+13],t[16*e+14],t[16*e+15]]},J={SCALAR:(t,e,n)=>{e[n]=t},VEC2:(t,e,n)=>{e[2*n+0]=t[0],e[2*n+1]=t[1]},VEC3:(t,e,n)=>{e[3*n+0]=t[0],e[3*n+1]=t[1],e[3*n+2]=t[2]},VEC4:(t,e,n)=>{e[4*n+0]=t[0],e[4*n+1]=t[1],e[4*n+2]=t[2],e[4*n+3]=t[3]},MAT2:(t,e,n)=>{e[4*n+0]=t[0],e[4*n+1]=t[1],e[4*n+2]=t[2],e[4*n+3]=t[3]},MAT3:(t,e,n)=>{e[9*n+0]=t[0],e[9*n+1]=t[1],e[9*n+2]=t[2],e[9*n+3]=t[3],e[9*n+4]=t[4],e[9*n+5]=t[5],e[9*n+6]=t[6],e[9*n+7]=t[7],e[9*n+8]=t[8],e[9*n+9]=t[9]},MAT4:(t,e,n)=>{e[16*n+0]=t[0],e[16*n+1]=t[1],e[16*n+2]=t[2],e[16*n+3]=t[3],e[16*n+4]=t[4],e[16*n+5]=t[5],e[16*n+6]=t[6],e[16*n+7]=t[7],e[16*n+8]=t[8],e[16*n+9]=t[9],e[16*n+10]=t[10],e[16*n+11]=t[11],e[16*n+12]=t[12],e[16*n+13]=t[13],e[16*n+14]=t[14],e[16*n+15]=t[15]}};const W=t=>void 0!==t;function K(t,e,n){if(!e)return null;let r=t.getExtension("3DTILES_batch_table_hierarchy");const i=e.HIERARCHY;return i&&(console.warn("3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy."),e.extensions=e.extensions||{},e.extensions["3DTILES_batch_table_hierarchy"]=i,r=i),r?function(t,e){let n,r,i;const s=t.instancesLength,o=t.classes;let a,c=t.classIds,u=t.parentCounts,l=t.parentIds,h=s;W(c.byteOffset)&&(c.componentType=defaultValue(c.componentType,GL.UNSIGNED_SHORT),c.type=AttributeType.SCALAR,i=getBinaryAccessor(c),c=i.createArrayBufferView(e.buffer,e.byteOffset+c.byteOffset,s));if(W(u))for(W(u.byteOffset)&&(u.componentType=defaultValue(u.componentType,GL.UNSIGNED_SHORT),u.type=AttributeType.SCALAR,i=getBinaryAccessor(u),u=i.createArrayBufferView(e.buffer,e.byteOffset+u.byteOffset,s)),a=new Uint16Array(s),h=0,n=0;n<s;++n)a[n]=h,h+=u[n];W(l)&&W(l.byteOffset)&&(l.componentType=defaultValue(l.componentType,GL.UNSIGNED_SHORT),l.type=AttributeType.SCALAR,i=getBinaryAccessor(l),l=i.createArrayBufferView(e.buffer,e.byteOffset+l.byteOffset,h));const f=o.length;for(n=0;n<f;++n){const t=o[n].length,r=o[n].instances,i=getBinaryProperties(t,r,e);o[n].instances=combine(i,r)}const d=new Array(f).fill(0),g=new Uint16Array(s);for(n=0;n<s;++n)r=c[n],g[n]=d[r],++d[r];const m={classes:o,classIds:c,classIndexes:g,parentCounts:u,parentIndexes:a,parentIds:l};return function(t){const e=t.classIds.length;for(let n=0;n<e;++n)Q(t,n,stack)}(m),m}(r,n):null}function q(t,e,n){if(!t)return;const r=t.parentCounts;return t.parentIds?n(t,e):r>0?function(t,e,n){const r=t.classIds,i=t.parentCounts,s=t.parentIds,o=t.parentIndexes,a=r.length,c=scratchVisited;c.length=Math.max(c.length,a);const u=++marker,l=scratchStack;l.length=0,l.push(e);for(;l.length>0;){if(e=l.pop(),c[e]===u)continue;c[e]=u;const r=n(t,e);if(W(r))return r;const a=i[e],h=o[e];for(let t=0;t<a;++t){const n=s[h+t];n!==e&&l.push(n)}}return null}(t,e,n):function(t,e,n){let r=!0;for(;r;){const i=n(t,e);if(W(i))return i;const s=t.parentIds[e];r=s!==e,e=s}throw new Error("traverseHierarchySingleParent")}(t,e,n)}function Q(t,e,n){const r=t.parentCounts,i=t.parentIds,s=t.parentIndexes,o=t.classIds.length;if(!W(i))return;assert(e<o,"Parent index ".concat(e," exceeds the total number of instances: ").concat(o)),assert(-1===n.indexOf(e),"Circular dependency detected in the batch table hierarchy."),n.push(e);const a=W(r)?r[e]:1,c=W(r)?s[e]:e;for(let r=0;r<a;++r){const s=i[c+r];s!==e&&Q(t,s,n)}n.pop(e)}function Y(t){return null!=t}const Z=(t,e)=>t,$={HIERARCHY:!0,extensions:!0,extras:!0};class tt{constructor(t,e,n){var r;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Object(d.a)(this,"json",void 0),Object(d.a)(this,"binary",void 0),Object(d.a)(this,"featureCount",void 0),Object(d.a)(this,"_extensions",void 0),Object(d.a)(this,"_properties",void 0),Object(d.a)(this,"_binaryProperties",void 0),Object(d.a)(this,"_hierarchy",void 0),Object(a.a)(n>=0),this.json=t||{},this.binary=e,this.featureCount=n,this._extensions=(null===(r=this.json)||void 0===r?void 0:r.extensions)||{},this._properties={};for(const t in this.json)$[t]||(this._properties[t]=this.json[t]);this._binaryProperties=this._initializeBinaryProperties(),i["3DTILES_batch_table_hierarchy"]&&(this._hierarchy=K(this,this.json,this.binary))}getExtension(t){return this.json&&this.json.extensions&&this.json.extensions[t]}memorySizeInBytes(){return 0}isClass(t,e){if(this._checkBatchId(t),Object(a.a)("string"==typeof e,e),this._hierarchy){return Y(q(this._hierarchy,t,(t,n)=>{const r=t.classIds[n];return t.classes[r].name===e}))}return!1}isExactClass(t,e){return Object(a.a)("string"==typeof e,e),this.getExactClassName(t)===e}getExactClassName(t){if(this._checkBatchId(t),this._hierarchy){const e=this._hierarchy.classIds[t];return this._hierarchy.classes[e].name}}hasProperty(t,e){return this._checkBatchId(t),Object(a.a)("string"==typeof e,e),Y(this._properties[e])||this._hasPropertyInHierarchy(t,e)}getPropertyNames(t,e){this._checkBatchId(t),(e=Y(e)?e:[]).length=0;const n=Object.keys(this._properties);return e.push(...n),this._hierarchy&&this._getPropertyNamesInHierarchy(t,e),e}getProperty(t,e){if(this._checkBatchId(t),Object(a.a)("string"==typeof e,e),this._binaryProperties){const n=this._binaryProperties[e];if(Y(n))return this._getBinaryProperty(n,t)}const n=this._properties[e];if(Y(n))return Z(n[t]);if(this._hierarchy){const n=this._getHierarchyProperty(t,e);if(Y(n))return n}}setProperty(t,e,n){const r=this.featureCount;if(this._checkBatchId(t),Object(a.a)("string"==typeof e,e),this._binaryProperties){const r=this._binaryProperties[e];if(r)return void this._setBinaryProperty(r,t,n)}if(this._hierarchy&&this._setHierarchyProperty(this,t,e,n))return;let i=this._properties[e];Y(i)||(this._properties[e]=new Array(r),i=this._properties[e]),i[t]=Z(n)}_checkBatchId(t){if(!(t>=0&&t<this.featureCount))throw new Error("batchId not in range [0, featureCount - 1].")}_getBinaryProperty(t,e){return t.unpack(t.typedArray,e)}_setBinaryProperty(t,e,n){t.pack(n,t.typedArray,e)}_initializeBinaryProperties(){let t=null;for(const e in this._properties){const n=this._properties[e],r=this._initializeBinaryProperty(e,n);r&&(t=t||{},t[e]=r)}return t}_initializeBinaryProperty(t,e){if("byteOffset"in e){const n=e;Object(a.a)(this.binary,"Property ".concat(t," requires a batch table binary.")),Object(a.a)(n.type,"Property ".concat(t," requires a type."));const r=function(t,e,n,r){const{componentType:i}=t;Object(a.a)(t.componentType);const s="string"==typeof i?k.fromName(i):i,o=z[t.type],c=X[t.type],u=J[t.type];return n+=t.byteOffset,{values:k.createTypedArray(s,e,n,o*r),type:s,size:o,unpacker:c,packer:u}}(n,this.binary.buffer,0|this.binary.byteOffset,this.featureCount);return{typedArray:r.values,componentCount:r.size,unpack:r.unpacker,pack:r.packer}}return null}_hasPropertyInHierarchy(t,e){if(!this._hierarchy)return!1;const n=q(this._hierarchy,t,(t,n)=>{const r=t.classIds[n];return Y(t.classes[r].instances[e])});return Y(n)}_getPropertyNamesInHierarchy(t,e){q(this._hierarchy,t,(t,n)=>{const r=t.classIds[n],i=t.classes[r].instances;for(const t in i)i.hasOwnProperty(t)&&-1===e.indexOf(t)&&e.push(t)})}_getHierarchyProperty(t,e){return q(this._hierarchy,t,(t,n)=>{const r=t.classIds[n],i=t.classes[r],s=t.classIndexes[n],o=i.instances[e];return Y(o)?Y(o.typedArray)?this._getBinaryProperty(o,s):Z(o[s]):null})}_setHierarchyProperty(t,e,n,r){const i=q(this._hierarchy,e,(t,i)=>{const s=t.classIds[i],o=t.classes[s],c=t.classIndexes[i],u=o.instances[n];return!!Y(u)&&(Object(a.a)(i===e,'Inherited property "'.concat(n,'" is read-only.')),Y(u.typedArray)?this._setBinaryProperty(u,c,r):u[c]=Z(r),!0)});return Y(i)}}function et(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=new DataView(e);if(t.magic=r.getUint32(n,!0),n+=4,t.version=r.getUint32(n,!0),n+=4,t.byteLength=r.getUint32(n,!0),n+=4,1!==t.version)throw new Error("3D Tile Version ".concat(t.version," not supported"));return n}function nt(t,e,n){const r=new DataView(e);let i;t.header=t.header||{};let s=r.getUint32(n,!0);n+=4;let o=r.getUint32(n,!0);n+=4;let a=r.getUint32(n,!0);n+=4;let c=r.getUint32(n,!0);return n+=4,a>=570425344?(n-=8,i=s,a=o,c=0,s=0,o=0,console.warn("b3dm tile in legacy format.")):c>=570425344&&(n-=4,i=a,a=s,c=o,s=0,o=0,console.warn("b3dm tile in legacy format.")),t.header.featureTableJsonByteLength=s,t.header.featureTableBinaryByteLength=o,t.header.batchTableJsonByteLength=a,t.header.batchTableBinaryByteLength=c,t.header.batchLength=i,n}function rt(t,e,n,r){return n=function(t,e,n,r){const{featureTableJsonByteLength:i,featureTableBinaryByteLength:s,batchLength:o}=t.header;if(t.featureTableJson={BATCH_LENGTH:o||0},i>0){const r=c(e,n,i);t.featureTableJson=JSON.parse(r)}return n+=i,t.featureTableBinary=new Uint8Array(e,n,s),n+=s}(t,e,n),n=function(t,e,n,r){const{batchTableJsonByteLength:i,batchTableBinaryByteLength:s}=t.header;if(i>0){const r=c(e,n,i);t.batchTableJson=JSON.parse(r),n+=i,s>0&&(t.batchTableBinary=new Uint8Array(e,n,s),t.batchTableBinary=new Uint8Array(t.batchTableBinary),n+=s)}return n}(t,e,n)}function it(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];const n=t>>11&31,r=t>>5&63,i=31&t;return e[0]=n<<3,e[1]=r<<2,e[2]=i<<3,e}function st(t,e,n){if(!(e||t&&t.batchIds&&n))return null;const{batchIds:r,isRGB565:i,pointCount:s}=t;if(r&&n){const t=new Uint8ClampedArray(3*s);for(let e=0;e<s;e++){const i=r[e],s=n.getProperty(i,"dimensions").map(t=>255*t);t[3*e]=s[0],t[3*e+1]=s[1],t[3*e+2]=s[2]}return{type:U.UNSIGNED_BYTE,value:t,size:3,normalized:!0}}if(i){const t=new Uint8ClampedArray(3*s);for(let n=0;n<s;n++){const r=it(e[n]);t[3*n]=r[0],t[3*n+1]=r[1],t[3*n+2]=r[2]}return{type:U.UNSIGNED_BYTE,value:t,size:3,normalized:!0}}return e&&e.length===3*s?{type:U.UNSIGNED_BYTE,value:e,size:3,normalized:!0}:{type:U.UNSIGNED_BYTE,value:e,size:4,normalized:!0}}var ot=n(2166),at=n(169);n(2164);function ct(t,e){if(!t)throw new Error("math.gl assertion failed. ".concat(e))}new ot.a,new G.a,new ot.a,new ot.a,new Uint8Array(1);function ut(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;return Object(at.a)(t,0,e)/e*2-1}function lt(t){return t<0?-1:1}function ht(t,e,n,r){if(ct(r),t<0||t>n||e<0||e>n)throw new Error("x and y must be unsigned normalized integers between 0 and ".concat(n));if(r.x=ut(t,n),r.y=ut(e,n),r.z=1-(Math.abs(r.x)+Math.abs(r.y)),r.z<0){const t=r.x;r.x=(1-Math.abs(r.y))*lt(t),r.y=(1-Math.abs(t))*lt(r.y)}return r.normalize()}function ft(t,e,n){return ht(t,e,255,n)}const dt=new G.a;function gt(t,e,n){return t.isQuantized?n["3d-tiles"]&&n["3d-tiles"].decodeQuantizedPositions?(t.isQuantized=!1,function(t,e){const n=new G.a,r=new Float32Array(3*t.pointCount);for(let i=0;i<t.pointCount;i++)n.set(e[3*i],e[3*i+1],e[3*i+2]).scale(1/t.quantizedRange).multiply(t.quantizedVolumeScale).add(t.quantizedVolumeOffset).toArray(r,3*i);return r}(t,e)):{type:U.UNSIGNED_SHORT,value:e,size:3,normalized:!0}:e}async function mt(t,e,n,r,i){n=rt(t,e,n=nt(t,e,n=et(t,e,n))),function(t){t.attributes={positions:null,colors:null,normals:null,batchIds:null},t.isQuantized=!1,t.isTranslucent=!1,t.isRGB565=!1,t.isOctEncoded16P=!1}(t);const{featureTable:s,batchTable:o}=function(t){const e=new V(t.featureTableJson,t.featureTableBinary),n=e.getGlobalProperty("POINTS_LENGTH");if(!Number.isFinite(n))throw new Error("POINTS_LENGTH must be defined");e.featuresLength=n,t.featuresLength=n,t.pointsLength=n,t.pointCount=n,t.rtcCenter=e.getGlobalProperty("RTC_CENTER",U.FLOAT,3);const r=function(t,e){let n=null;if(!t.batchIds&&e.hasProperty("BATCH_ID")&&(t.batchIds=e.getPropertyArray("BATCH_ID",U.UNSIGNED_SHORT,1),t.batchIds)){const r=e.getGlobalProperty("BATCH_LENGTH");if(!r)throw new Error("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");const{batchTableJson:i,batchTableBinary:s}=t;n=new tt(i,s,r)}return n}(t,e);return{featureTable:e,batchTable:r}}(t);return await async function(t,e,n,r,i){let s,o,a;const c=t.batchTableJson&&t.batchTableJson.extensions&&t.batchTableJson.extensions["3DTILES_draco_point_compression"];c&&(a=c.properties);const u=e.getExtension("3DTILES_draco_point_compression");if(u){o=u.properties;const e=u.byteOffset,n=u.byteLength;if(!o||!Number.isFinite(e)||!n)throw new Error("Draco properties, byteOffset, and byteLength must be defined");s=t.featureTableBinary.slice(e,e+n),t.hasPositions=Number.isFinite(o.POSITION),t.hasColors=Number.isFinite(o.RGB)||Number.isFinite(o.RGBA),t.hasNormals=Number.isFinite(o.NORMAL),t.hasBatchIds=Number.isFinite(o.BATCH_ID),t.isTranslucent=Number.isFinite(o.RGBA)}if(!s)return!0;const l={buffer:s,properties:{...o,...a},featureTableProperties:o,batchTableProperties:a,dequantizeInShader:!1};return await async function(t,e,n,r){const{parse:i}=r,s={...n,draco:{...n.draco,extraAttributes:e.batchTableProperties||{}}};delete s["3d-tiles"];const o=await i(e.buffer,D,s),a=o.attributes.POSITION&&o.attributes.POSITION.value,c=o.attributes.COLOR_0&&o.attributes.COLOR_0.value,u=o.attributes.NORMAL&&o.attributes.NORMAL.value,l=o.attributes.BATCH_ID&&o.attributes.BATCH_ID.value,h=a&&o.attributes.POSITION.value.quantization,f=u&&o.attributes.NORMAL.value.quantization;if(h){const e=o.POSITION.data.quantization,n=e.range;t.quantizedVolumeScale=new G.a(n,n,n),t.quantizedVolumeOffset=new G.a(e.minValues),t.quantizedRange=(1<<e.quantizationBits)-1,t.isQuantizedDraco=!0}f&&(t.octEncodedRange=(1<<o.NORMAL.data.quantization.quantizationBits)-1,t.isOctEncodedDraco=!0);const d={};if(e.batchTableProperties)for(const t of Object.keys(e.batchTableProperties))o.attributes[t]&&o.attributes[t].value&&(d[t.toLowerCase()]=o.attributes[t].value);t.attributes={positions:a,colors:st(t,c,void 0),normals:u,batchIds:l,...d}}(t,l,r,i)}(t,s,0,r,i),function(t,e,n){if(!t.attributes.positions)if(e.hasProperty("POSITION"))t.attributes.positions=e.getPropertyArray("POSITION",U.FLOAT,3);else if(e.hasProperty("POSITION_QUANTIZED")){const r=e.getPropertyArray("POSITION_QUANTIZED",U.UNSIGNED_SHORT,3);if(t.isQuantized=!0,t.quantizedRange=65535,t.quantizedVolumeScale=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",U.FLOAT,3),!t.quantizedVolumeScale)throw new Error("QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");if(t.quantizedVolumeOffset=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",U.FLOAT,3),!t.quantizedVolumeOffset)throw new Error("QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");t.attributes.positions=gt(t,r,n)}if(!t.attributes.positions)throw new Error("Either POSITION or POSITION_QUANTIZED must be defined.")}(t,s,r),function(t,e,n){if(!t.attributes.colors){let r=null;e.hasProperty("RGBA")?(r=e.getPropertyArray("RGBA",U.UNSIGNED_BYTE,4),t.isTranslucent=!0):e.hasProperty("RGB")?r=e.getPropertyArray("RGB",U.UNSIGNED_BYTE,3):e.hasProperty("RGB565")&&(r=e.getPropertyArray("RGB565",U.UNSIGNED_SHORT,1),t.isRGB565=!0),t.attributes.colors=st(t,r,n)}e.hasProperty("CONSTANT_RGBA")&&(t.constantRGBA=e.getGlobalProperty("CONSTANT_RGBA",U.UNSIGNED_BYTE,4))}(t,s,o),function(t,e){if(!t.attributes.normals){let n=null;e.hasProperty("NORMAL")?n=e.getPropertyArray("NORMAL",U.FLOAT,3):e.hasProperty("NORMAL_OCT16P")&&(n=e.getPropertyArray("NORMAL_OCT16P",U.UNSIGNED_BYTE,2),t.isOctEncoded16P=!0),t.attributes.normals=function(t,e){if(!e)return null;if(t.isOctEncoded16P){const n=new Float32Array(3*t.pointsLength);for(let r=0;r<t.pointsLength;r++)ft(e[2*r],e[2*r+1],dt),dt.toArray(n,3*r);return{type:U.FLOAT,size:2,value:n}}return{type:U.FLOAT,size:2,value:e}}(t,n)}}(t,s),n}var pt=n(2180),_t=n(239),bt=n(389);const At=0,Et=1;function yt(t,e,n,r){t.rotateYtoZ=!0;const i=t.byteOffset+t.byteLength-n;if(0===i)throw new Error("glTF byte length must be greater than 0.");return t.gltfUpAxis=r["3d-tiles"]&&r["3d-tiles"].assetGltfUpAxis?r["3d-tiles"].assetGltfUpAxis:"Y",t.gltfArrayBuffer=Object(bt.c)(e,n,i),t.gltfByteOffset=0,t.gltfByteLength=i,n%4==0||console.warn("".concat(t.type,": embedded glb is not aligned to a 4-byte boundary.")),t.byteOffset+t.byteLength}async function vt(t,e,n,r){const i=n["3d-tiles"]||{};if(function(t,e,n){switch(e){case At:const e=new Uint8Array(t.gltfArrayBuffer,t.gltfByteOffset),n=(new TextDecoder).decode(e);t.gltfUrl=n.replace(/[\s\0]+$/,""),delete t.gltfArrayBuffer,delete t.gltfByteOffset,delete t.gltfByteLength;break;case Et:break;default:throw new Error("b3dm: Illegal glTF format field")}}(t,e),i.loadGLTF){const{parse:e,fetch:i}=r;t.gltfUrl&&(t.gltfArrayBuffer=await i(t.gltfUrl,n),t.gltfByteOffset=0),t.gltfArrayBuffer&&(t.gltf=await e(t.gltfArrayBuffer,pt.a,n,r),t.gpuMemoryUsageInBytes=Object(_t.d)(t.gltf),delete t.gltfArrayBuffer,delete t.gltfByteOffset,delete t.gltfByteLength)}}async function Tt(t,e,n,r,i){var s;n=function(t,e,n,r,i){n=et(t,e,n),n=nt(t,e,n),n=rt(t,e,n),n=yt(t,e,n,r);const s=new V(t.featureTableJson,t.featureTableBinary);return t.rtcCenter=s.getGlobalProperty("RTC_CENTER",U.FLOAT,3),n}(t,e,n,r),await vt(t,Et,r,i);const o=null==t||null===(s=t.gltf)||void 0===s?void 0:s.extensions;return o&&o.CESIUM_RTC&&(t.rtcCenter=o.CESIUM_RTC.center),n}var Bt=n(2165),Ct=n(2162),Ot=n(1461),St=n(106);async function wt(t,e,n,r,i){return n=function(t,e,n,r,i){if(n=et(t,e,n),1!==t.version)throw new Error("Instanced 3D Model version ".concat(t.version," is not supported"));n=nt(t,e,n);const s=new DataView(e);if(t.gltfFormat=s.getUint32(n,!0),n=rt(t,e,n+=4),n=yt(t,e,n,r),0===t.featureTableJsonByteLength)throw new Error("i3dm parser: featureTableJsonByteLength is zero.");const o=new V(t.featureTableJson,t.featureTableBinary),a=o.getGlobalProperty("INSTANCES_LENGTH");if(o.featuresLength=a,!Number.isFinite(a))throw new Error("i3dm parser: INSTANCES_LENGTH must be defined");t.eastNorthUp=o.getGlobalProperty("EAST_NORTH_UP"),t.rtcCenter=o.getGlobalProperty("RTC_CENTER",U.FLOAT,3);new tt(t.batchTableJson,t.batchTableBinary,a);return function(t,e,n,r){const i=[new Array(r),t._batchTable][0],s=new G.a,o=new G.a,a=new G.a,c=new G.a,u=new Bt.a,l=new Ct.a,h=new G.a,f={},d=new Ot.a,g=[],m=[],p=new G.a,_=new G.a;for(let n=0;n<r;n++){let r;if(e.hasProperty("POSITION"))r=e.getProperty("POSITION",U.FLOAT,3,n,s);else if(e.hasProperty("POSITION_QUANTIZED")){r=e.getProperty("POSITION_QUANTIZED",U.UNSIGNED_SHORT,3,n,s);const t=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",U.FLOAT,3,p);if(!t)throw new Error("i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");const i=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",U.FLOAT,3,_);if(!i)throw new Error("i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");const o=65535;for(let e=0;e<3;e++)r[e]=r[e]/o*i[e]+t[e]}if(!r)throw new Error("i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.");s.copy(r),f.translation=s,t.normalUp=e.getProperty("NORMAL_UP",U.FLOAT,3,n,g),t.normalRight=e.getProperty("NORMAL_RIGHT",U.FLOAT,3,n,m);const b=!1;if(t.normalUp){if(!t.normalRight)throw new Error("i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.");t.hasCustomOrientation=!0}else{if(t.octNormalUp=e.getProperty("NORMAL_UP_OCT32P",U.UNSIGNED_SHORT,2,g),t.octNormalRight=e.getProperty("NORMAL_RIGHT_OCT32P",U.UNSIGNED_SHORT,2,m),t.octNormalUp){if(!t.octNormalRight)throw new Error("i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P");throw new Error("i3dm: oct-encoded orientation not implemented")}t.eastNorthUp?(St.a.WGS84.eastNorthUpToFixedFrame(s,d),d.getRotationMatrix3(u)):u.identity()}b&&(c.copy(o).cross(a).normalize(),u.setColumn(0,o),u.setColumn(1,a),u.setColumn(2,c)),l.fromMatrix3(u),f.rotation=l,h.set(1,1,1);const A=e.getProperty("SCALE",U.FLOAT,1,n);Number.isFinite(A)&&h.multiplyByScalar(A);const E=e.getProperty("SCALE_NON_UNIFORM",U.FLOAT,3,n,g);E&&h.scale(E),f.scale=h;let y=e.getProperty("BATCH_ID",U.UNSIGNED_SHORT,1,n);void 0===y&&(y=n);const v=(new Ot.a).fromQuaternion(f.rotation);d.identity(),d.translate(f.translation),d.multiplyRight(v),d.scale(f.scale);const T=d.clone();i[n]={modelMatrix:T,batchId:y}}t.instances=i}(t,o,0,a),n}(t,e,n,r),await vt(t,t.gltfFormat,r,i),n}async function It(t,e,n,r,i,s){n=et(t,e,n);const o=new DataView(e);for(t.tilesLength=o.getUint32(n,!0),n+=4,t.tiles=[];t.tiles.length<t.tilesLength&&t.byteLength-n>12;){const o={};t.tiles.push(o),n=await s(e,n,r,i,o)}return n}async function Rt(t,e,n,r){t.rotateYtoZ=!0,t.gltfUpAxis=n["3d-tiles"]&&n["3d-tiles"].assetGltfUpAxis?n["3d-tiles"].assetGltfUpAxis:"Y";const{parse:i}=r;t.gltf=await i(e,pt.a,n,r),t.gpuMemoryUsageInBytes=Object(_t.d)(t.gltf)}async function xt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};switch(i.byteOffset=e,i.type=u(t,e),i.type){case o.COMPOSITE:return await It(i,t,e,n,r,xt);case o.BATCHED_3D_MODEL:return await Tt(i,t,e,n,r);case o.GLTF:return await Rt(i,t,n,r);case o.INSTANCED_3D_MODEL:return await wt(i,t,e,n,r);case o.POINT_CLOUD:return await mt(i,t,e,n,r);default:throw new Error("3DTileLoader: unknown type ".concat(i.type))}}async function Mt(t,e,n,r){const i=t[e].bufferView,s=t.bufferViews[i],o=t.buffers[s.buffer];if(null==r||!r.url||!r.fetch)throw new Error("Url is not provided");if(!r.fetch)throw new Error("fetch is not provided");if(o.uri){const t=function(t,e){if(e.startsWith("http")){const n=new URL(t,e);return decodeURI(n.toString())}const n="http://".concat(e),r=new URL(t,n);return"/".concat(r.host).concat(r.pathname)}(o.uri,null==r?void 0:r.url),e=await r.fetch(t),n=await e.arrayBuffer();return new Uint8Array(n,s.byteOffset,s.byteLength)}return new Uint8Array(n,s.byteOffset,s.byteLength)}function Nt(t){const e=new DataView(t);return e.getUint32(0,!0)+2**32*e.getUint32(4,!0)}const Ft={id:"3d-tiles-subtree",name:"3D Tiles Subtree",module:"3d-tiles",version:"3.4.14",extensions:["subtree"],mimeTypes:["application/octet-stream"],tests:["subtree"],parse:async function(t,e,n){if(1952609651!==new Uint32Array(t.slice(0,4))[0])throw new Error("Wrong subtree file magic number");if(1!==new Uint32Array(t.slice(4,8))[0])throw new Error("Wrong subtree file verson, must be 1");const r=Nt(t.slice(8,16)),i=new Uint8Array(t,24,r),s=new TextDecoder("utf8").decode(i),o=JSON.parse(s),a=Nt(t.slice(16,24));let c=new ArrayBuffer(0);return a&&(c=t.slice(24+r)),"bufferView"in o.tileAvailability&&(o.tileAvailability.explicitBitstream=await Mt(o,"tileAvailability",c,n)),"bufferView"in o.contentAvailability&&(o.contentAvailability.explicitBitstream=await Mt(o,"contentAvailability",c,n)),"bufferView"in o.childSubtreeAvailability&&(o.childSubtreeAvailability.explicitBitstream=await Mt(o,"childSubtreeAvailability",c,n)),o},options:{}};var Lt=n(2160),Dt=n(428),Pt=n.n(Dt);function Ut(t){"X"===t&&(t="");const e=t.padEnd(16,"0");return Pt.a.fromString(e,!0,16)}var Gt=n(429);const jt=180/Math.PI;function Ht(t,e,n){const r=1<<e;return[(t[0]+n[0])/r,(t[1]+n[1])/r]}function kt(t){return t>=.5?1/3*(4*t*t-1):1/3*(1-4*(1-t)*(1-t))}function Vt(t){return[kt(t[0]),kt(t[1])]}function zt(t,e){let[n,r]=e;switch(t){case 0:return[1,n,r];case 1:return[-n,1,r];case 2:return[-n,-r,1];case 3:return[-1,-r,-n];case 4:return[r,-1,-n];case 5:return[r,n,-1];default:throw new Error("Invalid face")}}function Xt(t){let[e,n,r]=t;const i=Math.atan2(r,Math.sqrt(e*e+n*n));return[Math.atan2(n,e)*jt,i*jt]}function Jt(t,e,n,r){if(0===r){1===n&&(e[0]=t-1-e[0],e[1]=t-1-e[1]);const r=e[0];e[0]=e[1],e[1]=r}}function Wt(t){return function(t){if(0===t.length)throw new Error("Invalid Hilbert quad key ".concat(t));const e=t.split("/"),n=parseInt(e[0],10),r=e[1],i=r.length;let s=0;const o=[0,0];for(let t=i-1;t>=0;t--){s=i-t;const e=r[t];let n=0,a=0;"1"===e?a=1:"2"===e?(n=1,a=1):"3"===e&&(n=1);const c=Math.pow(2,s-1);Jt(c,o,n,a),o[0]+=c*n,o[1]+=c*a}if(n%2==1){const t=o[0];o[0]=o[1],o[1]=t}return{face:n,ij:o,level:s}}(function(t){if(t.indexOf("/")>0)return t;return function(t){if(t.isZero())return"";let e=t.toString(2);for(;e.length<64;)e="0"+e;const n=e.lastIndexOf("1"),r=e.substring(0,3),i=e.substring(3,n),s=i.length/2,o=Pt.a.fromString(r,!0,2).toString(10);let a="";if(0!==s)for(a=Pt.a.fromString(i,!0,2).toString(4);a.length<s;)a="0"+a;return"".concat(o,"/").concat(a)}(Ut(t))}(t))}function Kt(t){const{face:e,ij:n,level:r}=t,i=[[0,0],[0,1],[1,1],[1,0],[0,0]],s=Math.max(1,Math.ceil(100*Math.pow(2,-r))),o=new Float64Array(4*s*2+2);let a=0,c=0;for(let t=0;t<4;t++){const u=i[t].slice(0),l=i[t+1],h=(l[0]-u[0])/s,f=(l[1]-u[1])/s;for(let t=0;t<s;t++){u[0]+=h,u[1]+=f;const t=Xt(zt(e,Vt(Ht(n,r,u))));Math.abs(t[1])>89.999&&(t[0]=c);const i=t[0]-c;t[0]+=i>180?-360:i<-180?360:0,o[a++]=t[0],o[a++]=t[1],c=t[0]}}return o[a++]=o[0],o[a++]=o[1],o}function qt(t){if(t.length%2!=0)throw new Error("Invalid corners");const e=[],n=[];for(let r=0;r<t.length;r+=2)e.push(t[r]),n.push(t[r+1]);return e.sort((t,e)=>t-e),n.sort((t,e)=>t-e),{west:e[0],east:e[e.length-1],north:n[n.length-1],south:n[0]}}function Qt(t,e){const n=(null==e?void 0:e.minimumHeight)||0,r=(null==e?void 0:e.maximumHeight)||0,i=function(t){let e;if(2===t.face||5===t.face){let n=null,r=0;for(let e=0;e<4;e++){const i=Kt(Wt("".concat(t.face,"/").concat(e)));null==n&&(n=new Float64Array(4*i.length)),n.set(i,r),r+=i.length}e=qt(n)}else{e=qt(Kt(t))}return e}(Wt(t)),s=i.west,o=i.south,a=i.east,c=i.north,u=[];return u.push(new G.a(s,c,n)),u.push(new G.a(a,c,n)),u.push(new G.a(a,o,n)),u.push(new G.a(s,o,n)),u.push(new G.a(s,c,r)),u.push(new G.a(a,c,r)),u.push(new G.a(a,o,r)),u.push(new G.a(s,o,r)),u}function Yt(t){return function(t){const e=Vt(Ht(t.ij,t.level,[.5,.5]));return Xt(zt(t.face,e))}(Wt(t))}function Zt(t){const e=t.token,n={minimumHeight:t.minimumHeight,maximumHeight:t.maximumHeight},r=Qt(e,n),i=Yt(e),s=i[0],o=i[1],a=St.a.WGS84.cartographicToCartesian([s,o,n.maximumHeight]),c=new G.a(a[0],a[1],a[2]);r.push(c);const u=Object(Gt.d)(r);return[...u.center,...u.halfAxes]}const $t={QUADTREE:4,OCTREE:8};function te(t,e,n){if(null!=t&&t.box){const r=function(t){if(t.isZero())return"X";let e=t.countTrailingZeros();e=(e-e%4)/4;const n=e;e*=4;const r=t.shiftRightUnsigned(e).toString(16).replace(/0+$/,"");return Array(17-n-r.length).join("0")+r}(function(t,e){const n=function(t){return t.and(t.not().add(1))}(t).shiftRightUnsigned(2);return t.add(Pt.a.fromNumber(2*e+1-4).multiply(n))}(Ut(t.s2VolumeInfo.token),e)),i={...t.s2VolumeInfo};switch(i.token=r,n){case"OCTREE":const e=t.s2VolumeInfo,n=e.maximumHeight-e.minimumHeight,r=n/2,i=e.minimumHeight+n/2;e.minimumHeight=i-r,e.maximumHeight=i+r}return{box:Zt(i),s2VolumeInfo:i}}}function ee(t,e){return"constant"in t?Boolean(t.constant):!!t.explicitBitstream&&function(t,e){const n=Math.floor(t/8),r=t%8;return 1==(e[n]>>r&1)}(e,t.explicitBitstream)}function ne(t,e,n,r,i){const{basePath:s,refine:o,getRefine:a,lodMetricType:c,getTileType:u,rootLodMetricValue:l,rootBoundingVolume:h}=r,f=t.contentUrl&&t.contentUrl.replace("".concat(s,"/"),""),d=l/2**e,g=function(t,e,n){if(e.region){const{childTileX:r,childTileY:i,childTileZ:s}=n,[o,a,c,u,l,h]=e.region,f=2**t,d=(c-o)/f,g=(u-a)/f,m=(h-l)/f,[p,_]=[o+d*r,o+d*(r+1)],[b,A]=[a+g*i,a+g*(i+1)],[E,y]=[l+m*s,l+m*(s+1)];return{region:[p,b,_,A,E,y]}}if(e.box)return e;throw new Error("Unsupported bounding volume type ".concat(e))}(e,null!=i&&i.box?{box:i.box}:h,n);return{children:t.children,contentUrl:t.contentUrl,content:{uri:f},id:t.contentUrl,refine:a(o),type:u(t),lodMetricType:c,lodMetricValue:d,geometricError:d,transform:t.transform,boundingVolume:g}}function re(t,e){return parseInt(t.toString(2)+e.toString(2),2)}function ie(t,e,n,r,i){const s=function(t){const e={};for(const n in t)e["{".concat(n,"}")]=t[n];return e}({level:e,x:n,y:r,z:i});return t.replace(/{level}|{x}|{y}|{z}/gi,t=>s[t])}function se(t){if(!t.contentUrl)return s.f.EMPTY;const e=t.contentUrl.split("?")[0].split(".").pop();switch(e){case"pnts":return s.f.POINTCLOUD;case"i3dm":case"b3dm":case"glb":case"gltf":return s.f.SCENEGRAPH;default:return e}}function oe(t){switch(t){case"REPLACE":case"replace":return s.e.REPLACE;case"ADD":case"add":return s.e.ADD;default:return t}}function ae(t,e){if(/^[a-z][0-9a-z+.-]*:/i.test(e)){const n=new URL(t,"".concat(e,"/"));return decodeURI(n.toString())}return t.startsWith("/")?t:"".concat(e,"/").concat(t)}function ce(t,e){if(!t)return null;if(t.content){const n=t.content.uri||t.content.url;t.contentUrl=ae(n,e.basePath)}return t.id=t.contentUrl,t.lodMetricType=s.a.GEOMETRIC_ERROR,t.lodMetricValue=t.geometricError,t.transformMatrix=t.transform,t.type=se(t),t.refine=oe(t.refine),t}async function ue(t,e,n,r){var i,o;const a=e.basePath,{subdivisionScheme:c,maximumLevel:u,subtreeLevels:l,subtrees:{uri:h}}=n,f=ae(ie(h,0,0,0,0),a),d=await Object(Lt.a)(f,Ft,r),g=ae(t.content.uri,a),m=null==e||null===(i=e.root)||void 0===i?void 0:i.refine,p=t.geometricError,_=null===(o=t.boundingVolume.extensions)||void 0===o?void 0:o["3DTILES_bounding_volume_S2"];if(_){const e={box:Zt(_),s2VolumeInfo:_};t.boundingVolume=e}const b=t.boundingVolume,A={contentUrlTemplate:g,subtreesUriTemplate:h,subdivisionScheme:c,subtreeLevels:l,maximumLevel:u,refine:m,basePath:a,lodMetricType:s.a.GEOMETRIC_ERROR,rootLodMetricValue:p,rootBoundingVolume:b,getTileType:se,getRefine:oe};return await async function(t,e,n){if(!t)return null;t.lodMetricType=s.a.GEOMETRIC_ERROR,t.lodMetricValue=t.geometricError,t.transformMatrix=t.transform;const{children:r,contentUrl:i}=await async function t(e){const{options:n,parentData:r={mortonIndex:0,x:0,y:0,z:0},childIndex:i=0,globalData:s={level:0,mortonIndex:0,x:0,y:0,z:0},s2VolumeBox:o}=e;let{subtree:a,level:c=0}=e;const{subdivisionScheme:u,subtreeLevels:l,maximumLevel:h,contentUrlTemplate:f,subtreesUriTemplate:d,basePath:g}=n,m={children:[],lodMetricValue:0,contentUrl:""},p=$t[u],_=1&i,b=i>>1&1,A=i>>2&1,E=(p**c-1)/(p-1);let y=re(r.mortonIndex,i),v=E+y,T=re(r.x,_),B=re(r.y,b),C=re(r.z,A),O=!1;c+1>l&&(O=ee(a.childSubtreeAvailability,y));const S=re(s.x,T),w=re(s.y,B),I=re(s.z,C),R=c+s.level;if(O){const t=ie("".concat(g,"/").concat(d),R,S,w,I);a=await Object(Lt.a)(t,Ft),s.mortonIndex=y,s.x=T,s.y=B,s.z=C,s.level=c,y=0,v=0,T=0,B=0,C=0,c=0}if(!ee(a.tileAvailability,v)||c>h)return m;ee(a.contentAvailability,v)&&(m.contentUrl=ie(f,R,S,w,I));const x=c+1,M={mortonIndex:y,x:T,y:B,z:C};for(let e=0;e<p;e++){const r=te(o,e,u),i=await t({subtree:a,options:n,parentData:M,childIndex:e,level:x,globalData:s,s2VolumeBox:r});if(i.contentUrl||i.children.length){const t=ne(i,R+1,{childTileX:T,childTileY:B,childTileZ:C},n,o);m.children.push(t)}}return m}({subtree:e,options:n,s2VolumeBox:t});i&&(t.contentUrl=i,t.content={uri:i.replace("".concat(n.basePath,"/"),"")});return t.refine=oe(t.refine),t.type=se(t),t.children=r,t.id=t.contentUrl,t}(t,d,A)}function le(t){var e;return(null==t||null===(e=t.extensions)||void 0===e?void 0:e["3DTILES_implicit_tiling"])||(null==t?void 0:t.implicitTiling)}const he={id:"3d-tiles",name:"3D Tiles",module:"3d-tiles",version:"3.4.14",extensions:["cmpt","pnts","b3dm","i3dm"],mimeTypes:["application/octet-stream"],tests:["cmpt","pnts","b3dm","i3dm"],parse:async function(t,e,n){const r=e["3d-tiles"]||{};let o;o="auto"===r.isTileset?n.url&&-1!==n.url.indexOf(".json"):r.isTileset;t=o?await async function(t,e,n){var r;const o=JSON.parse((new TextDecoder).decode(t));return o.loader=e.loader||he,o.url=n.url,o.queryString=n.queryString,o.basePath=function(t){return i.a.dirname(t.url)}(o),o.root=await async function(t,e){const n=t.basePath;let r;const i=le(null==t?void 0:t.root);r=i&&t.root?await ue(t.root,t,i,e):ce(t.root,t);const s=[];for(s.push(r);s.length>0;){const r=(s.pop()||{}).children||[];for(let i of r){const r=le(i);r?i=await ue(i,t,r,e):ce(i,{basePath:n}),s.push(i)}}return r}(o,e),o.type=s.c.TILES3D,o.lodMetricType=s.a.GEOMETRIC_ERROR,o.lodMetricValue=(null===(r=o.root)||void 0===r?void 0:r.lodMetricValue)||0,o}(t,e,n):await async function(t,e,n){const r={content:{featureIds:null}};return await xt(t,0,e,n,r.content),r.content}(t,e,n);return t},options:{"3d-tiles":{loadGLTF:!0,decodeQuantizedPositions:!1,isTileset:"auto",assetGltfUpAxis:null}}}},2184:function(t,e,n){"use strict";n.d(e,"a",(function(){return Gt}));var r=n(3),i=n(1461),s=n(957),o=n(106),a=n(577);class c{constructor(t,e){this.name=void 0,this.type=void 0,this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=t,this.type=e,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Object(a.a)(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Object(a.a)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class u{constructor(t){this.id=void 0,this.stats={},this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(const t of Object.values(this.stats))t.reset();return this}forEach(t){for(const e of Object.values(this.stats))t(e)}getTable(){const t={};return this.forEach(e=>{t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}}),t}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(t=>this._getOrCreate(t))}_getOrCreate(t){const{name:e,type:n}=t;let r=this.stats[e];return r||(r=t instanceof c?t:new c(e,n),this.stats[e]=r),r}}var l=n(84),h=n(1376);class f{constructor(t,e,n){Object(r.a)(this,"item",void 0),Object(r.a)(this,"previous",void 0),Object(r.a)(this,"next",void 0),this.item=t,this.previous=e,this.next=n}}class d{constructor(){Object(r.a)(this,"head",null),Object(r.a)(this,"tail",null),Object(r.a)(this,"_length",0)}get length(){return this._length}add(t){const e=new f(t,this.tail,null);return this.tail?(this.tail.next=e,this.tail=e):(this.head=e,this.tail=e),++this._length,e}remove(t){t&&(t.previous&&t.next?(t.previous.next=t.next,t.next.previous=t.previous):t.previous?(t.previous.next=null,this.tail=t.previous):t.next?(t.next.previous=null,this.head=t.next):(this.head=null,this.tail=null),t.next=null,t.previous=null,--this._length)}splice(t,e){t!==e&&(this.remove(e),this._insert(t,e))}_insert(t,e){const n=t.next;t.next=e,this.tail===t?this.tail=e:n.previous=e,e.next=n,e.previous=t,++this._length}}class g{constructor(){Object(r.a)(this,"_list",void 0),Object(r.a)(this,"_sentinel",void 0),Object(r.a)(this,"_trimTiles",void 0),this._list=new d,this._sentinel=this._list.add("sentinel"),this._trimTiles=!1}reset(){this._list.splice(this._list.tail,this._sentinel)}touch(t){const e=t._cacheNode;e&&this._list.splice(this._sentinel,e)}add(t,e,n){e._cacheNode||(e._cacheNode=this._list.add(e),n&&n(t,e))}unloadTile(t,e,n){const r=e._cacheNode;r&&(this._list.remove(r),e._cacheNode=null,n&&n(t,e))}unloadTiles(t,e){const n=this._trimTiles;this._trimTiles=!1;const r=this._list,i=1024*t.maximumMemoryUsage*1024,s=this._sentinel;let o=r.head;for(;o!==s&&(t.gpuMemoryUsageInBytes>i||n);){const n=o.item;o=o.next,this.unloadTile(t,n,e)}}trim(){this._trimTiles=!0}}var m=n(416);const p=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});new s.a,new s.a;var _=n(46);const b=new s.a,A=new s.a;class E{constructor(t=[0,0,0],e=0){this.radius=-0,this.center=new s.a,this.fromCenterRadius(t,e)}fromCenterRadius(t,e){return this.center.from(t),this.radius=e,this}fromCornerPoints(t,e){return e=b.from(e),this.center=(new s.a).from(t).add(e).scale(.5),this.radius=this.center.distance(e),this}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new E(this.center,this.radius)}union(t){const e=this.center,n=this.radius,r=t.center,i=t.radius,s=b.copy(r).subtract(e),o=s.magnitude();if(n>=o+i)return this.clone();if(i>=o+n)return t.clone();const a=.5*(n+o+i);return A.copy(s).scale((-n+a)/o).add(e),this.center.copy(A),this.radius=a,this}expand(t){const e=(t=b.from(t)).subtract(this.center).magnitude();return e>this.radius&&(this.radius=e),this}transform(t){this.center.transform(t);const e=_.e(b,t);return this.radius=Math.max(e[0],Math.max(e[1],e[2]))*this.radius,this}distanceSquaredTo(t){return(t=b.from(t)).subtract(this.center).lengthSquared()-this.radius*this.radius}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}intersectPlane(t){const e=this.center,n=this.radius,r=t.normal.dot(e)+t.distance;return r<-n?p.OUTSIDE:r<n?p.INTERSECTING:p.INSIDE}}var y=n(2165),v=n(2162);const T=new s.a,B=new s.a,C=new s.a,O=new s.a,S=new s.a,w=new s.a,I=new s.a,R=0,x=1,M=2,N=3,F=4,L=5,D=6,P=7,U=8;class G{constructor(t=[0,0,0],e=[0,0,0,0,0,0,0,0,0]){this.center=(new s.a).from(t),this.halfAxes=new y.a(e)}get halfSize(){const t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new s.a(t).len(),new s.a(e).len(),new s.a(n).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),r=new s.a(t).normalize(),i=new s.a(e).normalize(),o=new s.a(n).normalize();return(new v.a).fromMatrix3(new y.a([...r,...i,...o]))}fromCenterHalfSizeQuaternion(t,e,n){const r=new v.a(n),i=(new y.a).fromQuaternion(r);return i[0]=i[0]*e[0],i[1]=i[1]*e[0],i[2]=i[2]*e[0],i[3]=i[3]*e[1],i[4]=i[4]*e[1],i[5]=i[5]*e[1],i[6]=i[6]*e[2],i[7]=i[7]*e[2],i[8]=i[8]*e[2],this.center=(new s.a).from(t),this.halfAxes=i,this}clone(){return new G(this.center,this.halfAxes)}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(t=new E){const e=this.halfAxes,n=e.getColumn(0,C),r=e.getColumn(1,O),i=e.getColumn(2,S),s=T.copy(n).add(r).add(i);return t.center.copy(this.center),t.radius=s.magnitude(),t}intersectPlane(t){const e=this.center,n=t.normal,r=this.halfAxes,i=n.x,s=n.y,o=n.z,a=Math.abs(i*r[R]+s*r[x]+o*r[M])+Math.abs(i*r[N]+s*r[F]+o*r[L])+Math.abs(i*r[D]+s*r[P]+o*r[U]),c=n.dot(e)+t.distance;return c<=-a?p.OUTSIDE:c>=a?p.INSIDE:p.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const e=B.from(t).subtract(this.center),n=this.halfAxes,r=n.getColumn(0,C),i=n.getColumn(1,O),s=n.getColumn(2,S),o=r.magnitude(),a=i.magnitude(),c=s.magnitude();r.normalize(),i.normalize(),s.normalize();let u,l=0;return u=Math.abs(e.dot(r))-o,u>0&&(l+=u*u),u=Math.abs(e.dot(i))-a,u>0&&(l+=u*u),u=Math.abs(e.dot(s))-c,u>0&&(l+=u*u),l}computePlaneDistances(t,e,n=[-0,-0]){let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;const s=this.center,o=this.halfAxes,a=o.getColumn(0,C),c=o.getColumn(1,O),u=o.getColumn(2,S),l=w.copy(a).add(c).add(u).add(s),h=I.copy(l).subtract(t);let f=e.dot(h);return r=Math.min(f,r),i=Math.max(f,i),l.copy(s).add(a).add(c).subtract(u),h.copy(l).subtract(t),f=e.dot(h),r=Math.min(f,r),i=Math.max(f,i),l.copy(s).add(a).subtract(c).add(u),h.copy(l).subtract(t),f=e.dot(h),r=Math.min(f,r),i=Math.max(f,i),l.copy(s).add(a).subtract(c).subtract(u),h.copy(l).subtract(t),f=e.dot(h),r=Math.min(f,r),i=Math.max(f,i),s.copy(l).subtract(a).add(c).add(u),h.copy(l).subtract(t),f=e.dot(h),r=Math.min(f,r),i=Math.max(f,i),s.copy(l).subtract(a).add(c).subtract(u),h.copy(l).subtract(t),f=e.dot(h),r=Math.min(f,r),i=Math.max(f,i),s.copy(l).subtract(a).subtract(c).add(u),h.copy(l).subtract(t),f=e.dot(h),r=Math.min(f,r),i=Math.max(f,i),s.copy(l).subtract(a).subtract(c).subtract(u),h.copy(l).subtract(t),f=e.dot(h),r=Math.min(f,r),i=Math.max(f,i),n[0]=r,n[1]=i,n}transform(t){this.center.transformAsPoint(t);const e=this.halfAxes.getColumn(0,C);e.transformAsPoint(t);const n=this.halfAxes.getColumn(1,O);n.transformAsPoint(t);const r=this.halfAxes.getColumn(2,S);return r.transformAsPoint(t),this.halfAxes=new y.a([...e,...n,...r]),this}getTransform(){throw new Error("not implemented")}}var j=n(197),H=n(169);const k=new s.a,V=new s.a;class z{constructor(t=[0,0,1],e=0){this.normal=new s.a,this.distance=-0,this.fromNormalDistance(t,e)}fromNormalDistance(t,e){return Object(j.a)(Number.isFinite(e)),this.normal.from(t).normalize(),this.distance=e,this}fromPointNormal(t,e){t=k.from(t),this.normal.from(e).normalize();const n=-this.normal.dot(t);return this.distance=n,this}fromCoefficients(t,e,n,r){return this.normal.set(t,e,n),Object(j.a)(Object(H.d)(this.normal.len(),1)),this.distance=r,this}clone(t){return new z(this.normal,this.distance)}equals(t){return Object(H.d)(this.distance,t.distance)&&Object(H.d)(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const e=V.copy(this.normal).transformAsVector(t).normalize(),n=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(n,e)}projectPointOntoPlane(t,e=[0,0,0]){t=k.from(t);const n=this.getPointDistance(t),r=V.copy(this.normal).scale(n);return t.subtract(r).to(e)}}const X=[new s.a([1,0,0]),new s.a([0,1,0]),new s.a([0,0,1])],J=new s.a,W=new s.a;new z(new s.a(1,0,0),0);class K{static get MASK_OUTSIDE(){return 4294967295}static get MASK_INSIDE(){return 0}static get MASK_INDETERMINATE(){return 2147483647}constructor(t=[]){this.planes=t,Object(j.a)(this.planes.every(t=>t instanceof z))}fromBoundingSphere(t){this.planes.length=2*X.length;const e=t.center,n=t.radius;let r=0;for(const t of X){let i=this.planes[r],s=this.planes[r+1];i||(i=this.planes[r]=new z),s||(s=this.planes[r+1]=new z);const o=J.copy(t).scale(-n).add(e);t.dot(o);i.fromPointNormal(o,t);const a=J.copy(t).scale(n).add(e),c=W.copy(t).negate();c.dot(a);s.fromPointNormal(a,c),r+=2}return this}computeVisibility(t){Object(j.a)(t);let e=p.INSIDE;for(const n of this.planes){switch(t.intersectPlane(n)){case p.OUTSIDE:return p.OUTSIDE;case p.INTERSECTING:e=p.INTERSECTING}}return e}computeVisibilityWithPlaneMask(t,e){if(Object(j.a)(t,"boundingVolume is required."),Object(j.a)(Number.isFinite(e),"parentPlaneMask is required."),e===K.MASK_OUTSIDE||e===K.MASK_INSIDE)return e;let n=K.MASK_INSIDE;const r=this.planes;for(let i=0;i<this.planes.length;++i){const s=i<31?1<<i:0;if(i<31&&0==(e&s))continue;const o=r[i],a=t.intersectPlane(o);if(a===p.OUTSIDE)return K.MASK_OUTSIDE;a===p.INTERSECTING&&(n|=s)}return n}}new s.a,new s.a,new s.a,new s.a,new s.a;new s.a,new s.a,new s.a,new s.a,new s.a,new s.a,new s.a,new s.a,new s.a,new s.a,new s.a,new s.a,Math.PI;n(2164);new y.a,new y.a,new y.a,new y.a,new y.a;new s.a,new s.a,new s.a,new s.a,new s.a,new y.a,new y.a,new y.a;const q=new s.a,Q=new s.a,Y=new K([new z,new z,new z,new z,new z,new z]);function Z(t,e){const{cameraDirection:n,cameraUp:r,height:i}=t,{metersPerUnit:a}=t.distanceScales,c=tt(t,t.center),u=o.a.WGS84.eastNorthUpToFixedFrame(c),l=t.unprojectPosition(t.cameraPosition),h=o.a.WGS84.cartographicToCartesian(l,new s.a),f=new s.a(u.transformAsVector(new s.a(n).scale(a))).normalize(),d=new s.a(u.transformAsVector(new s.a(r).scale(a))).normalize();!function(t){const e=t.getFrustumPlanes(),n=$(e.near,t.cameraPosition),r=tt(t,n),i=tt(t,t.cameraPosition,Q);let s=0;Y.planes[s++].fromPointNormal(r,q.copy(r).subtract(i));for(const i in e){if("near"===i)continue;const o=$(e[i],n,Q),a=tt(t,o,Q);Y.planes[s++].fromPointNormal(a,q.copy(r).subtract(a))}}(t);const g=t.constructor,{longitude:m,latitude:p,width:_,bearing:b,zoom:A}=t;return{camera:{position:h,direction:f,up:d},viewport:t,topDownViewport:new g({longitude:m,latitude:p,height:i,width:_,bearing:b,zoom:A,pitch:0}),height:i,cullingVolume:Y,frameNumber:e,sseDenominator:1.15}}function $(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new s.a;const r=t.normal.dot(e);return n.copy(t.normal).scale(t.distance-r).add(e),n}function tt(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new s.a;const r=t.unprojectPosition(e);return o.a.WGS84.cartographicToCartesian(r,n)}const et=new s.a;function nt(t,e){if(t instanceof G){const{halfAxes:n}=t,r=function(t){t.getColumn(0,et);const e=t.getColumn(1),n=t.getColumn(2),r=et.add(e).add(n);return r.len()}(n);return Math.log2(6356752.314245179/(r+e[2]))}if(t instanceof E){const{radius:n}=t;return Math.log2(6356752.314245179/(n+e[2]))}if(t.width&&t.height){const{width:e,height:n}=t;return(Math.log2(6378137/e)+Math.log2(6378137/n))/2}return 1}function rt(t,e,n){const r=o.a.WGS84.cartographicToCartesian([t.xmax,t.ymax,t.zmax],new s.a),i=Math.sqrt(Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2)+Math.pow(r[2]-n[2],2));return Math.log2(6356752.314245179/(i+e[2]))}var it=n(2160),st=n(90);function ot(t){return null!=t}const at=new s.a,ct=new s.a,ut=new s.a,lt=new s.a;function ht(t,e,n){if(Object(m.a)(t,"3D Tile: boundingVolume must be defined"),t.box)return function(t,e,n){const r=new s.a(t[0],t[1],t[2]);e.transform(r,r);let i=[];if(10===t.length){const e=t.slice(3,6),n=new v.a;n.fromArray(t,6);const r=new s.a([1,0,0]),o=new s.a([0,1,0]),a=new s.a([0,0,1]);r.transformByQuaternion(n),r.scale(e[0]),o.transformByQuaternion(n),o.scale(e[1]),a.transformByQuaternion(n),a.scale(e[2]),i=[...r.toArray(),...o.toArray(),...a.toArray()]}else i=[...t.slice(3,6),...t.slice(6,9),...t.slice(9,12)];const o=e.transformAsVector(i.slice(0,3)),a=e.transformAsVector(i.slice(3,6)),c=e.transformAsVector(i.slice(6,9)),u=new y.a([o[0],o[1],o[2],a[0],a[1],a[2],c[0],c[1],c[2]]);if(ot(n))return n.center=r,n.halfAxes=u,n;return new G(r,u)}(t.box,e,n);if(t.region){const[e,n,r,a,c,u]=t.region,l=o.a.WGS84.cartographicToCartesian([Object(H.c)(e),Object(H.c)(a),c],ut),h=o.a.WGS84.cartographicToCartesian([Object(H.c)(r),Object(H.c)(n),u],lt),f=(new s.a).addVectors(l,h).multiplyScalar(.5),d=(new s.a).subVectors(l,h).len()/2;return dt([f[0],f[1],f[2],d],new i.a)}if(t.sphere)return dt(t.sphere,e,n);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")}function ft(t,e){if(t.box)return function(t){const e=gt(),{halfAxes:n}=t,r=new s.a(n.getColumn(0)),i=new s.a(n.getColumn(1)),o=new s.a(n.getColumn(2));for(let n=0;n<2;n++){for(let n=0;n<2;n++){for(let n=0;n<2;n++)at.copy(t.center),at.add(r),at.add(i),at.add(o),mt(e,at),o.negate();i.negate()}r.negate()}return e}(e);if(t.region){const[e,n,r,i,s,o]=t.region;return[[Object(H.c)(e),Object(H.c)(n),s],[Object(H.c)(r),Object(H.c)(i),o]]}if(t.sphere)return function(t){const e=gt(),{center:n,radius:r}=t,i=o.a.WGS84.scaleToGeodeticSurface(n,at);let a;a=i?o.a.WGS84.geodeticSurfaceNormal(i):new s.a(0,0,1);let c=new s.a(a[2],-a[1],0);c.len()>0?c.normalize():c=new s.a(0,1,0);const u=c.clone().cross(a);for(const t of[c,u,a]){ct.copy(t).scale(r);for(let t=0;t<2;t++)at.copy(n),at.add(ct),mt(e,at),ct.negate()}return e}(e);throw new Error("Unkown boundingVolume type")}function dt(t,e,n){const r=new s.a(t[0],t[1],t[2]);e.transform(r,r);const i=e.getScale(ct),o=Math.max(Math.max(i[0],i[1]),i[2]),a=t[3]*o;return ot(n)?(n.center=r,n.radius=a,n):new E(r,a)}function gt(){return[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]]}function mt(t,e){o.a.WGS84.cartesianToCartographic(e,at),t[0][0]=Math.min(t[0][0],at[0]),t[0][1]=Math.min(t[0][1],at[1]),t[0][2]=Math.min(t[0][2],at[2]),t[1][0]=Math.max(t[1][0],at[0]),t[1][1]=Math.max(t[1][1],at[1]),t[1][2]=Math.max(t[1][2],at[2])}new s.a,new s.a,new i.a,new s.a,new s.a,new s.a;function pt(t,e){if(t.dynamicScreenSpaceError&&t.dynamicScreenSpaceErrorComputedDensity){const n=t.dynamicScreenSpaceErrorComputedDensity,r=t.dynamicScreenSpaceErrorFactor;return function(t,e){const n=t*e;return 1-Math.exp(-n*n)}(e,n)*r}return 0}const _t=new s.a,bt=new s.a,At=new s.a,Et=new s.a,yt=new s.a,vt=new i.a,Tt=new i.a;function Bt(t,e){const{topDownViewport:n}=e,r=t.header.mbs[1],i=t.header.mbs[0],s=t.header.mbs[2],a=t.header.mbs[3],c=[...t.boundingVolume.center],u=n.unprojectPosition(n.cameraPosition);o.a.WGS84.cartographicToCartesian(u,_t),bt.copy(_t).subtract(c).normalize(),o.a.WGS84.eastNorthUpToFixedFrame(c,vt),Tt.copy(vt).invert(),At.copy(_t).transform(Tt);const l=Math.sqrt(At[0]*At[0]+At[1]*At[1]),h=l*l/At[2];Et.copy([At[0],At[1],h]);const f=Et.transform(vt).subtract(c).normalize(),d=bt.cross(f).normalize().scale(a).add(c),g=o.a.WGS84.cartesianToCartographic(d),m=n.project([i,r,s]),p=n.project(g);return yt.copy(m).subtract(p).magnitude()}class Ct{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Object(r.a)(this,"_map",new Map),Object(r.a)(this,"_array",void 0),Object(r.a)(this,"_length",void 0),this._array=new Array(t),this._length=t}get length(){return this._length}set length(t){this._length=t,t>this._array.length&&(this._array.length=t)}get values(){return this._array}get(t){return Object(m.a)(t<this._array.length),this._array[t]}set(t,e){Object(m.a)(t>=0),t>=this.length&&(this.length=t+1),this._map.has(this._array[t])&&this._map.delete(this._array[t]),this._array[t]=e,this._map.set(e,t)}delete(t){const e=this._map.get(t);e>=0&&(this._array.splice(e,1),this._map.delete(t),this.length--)}peek(){return this._array[this._length-1]}push(t){if(!this._map.has(t)){const e=this.length++;this._array[e]=t,this._map.set(t,e)}}pop(){const t=this._array[--this.length];return this._map.delete(t),t}reserve(t){Object(m.a)(t>=0),t>this._array.length&&(this._array.length=t)}resize(t){Object(m.a)(t>=0),this.length=t}trim(t){null==t&&(t=this.length),this._array.length=t}reset(){this._array=[],this._map=new Map,this._length=0}find(t){return this._map.has(t)}}const Ot={loadSiblings:!1,skipLevelOfDetail:!1,maximumScreenSpaceError:2,updateTransforms:!0,onTraversalEnd:()=>{},viewportTraversersMap:{},basePath:""};class St{traversalFinished(t){return!0}constructor(t){Object(r.a)(this,"options",void 0),Object(r.a)(this,"root",null),Object(r.a)(this,"selectedTiles",{}),Object(r.a)(this,"requestedTiles",{}),Object(r.a)(this,"emptyTiles",{}),Object(r.a)(this,"lastUpdate",(new Date).getTime()),Object(r.a)(this,"updateDebounceTime",1e3),Object(r.a)(this,"_traversalStack",new Ct),Object(r.a)(this,"_emptyTraversalStack",new Ct),Object(r.a)(this,"_frameNumber",null),this.options={...Ot,...t}}traverse(t,e,n){this.root=t,this.options={...this.options,...n},this.reset(),this.updateTile(t,e),this._frameNumber=e.frameNumber,this.executeTraversal(t,e)}reset(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()}executeTraversal(t,e){const n=this._traversalStack;for(t._selectionDepth=1,n.push(t);n.length>0;){const t=n.pop();let r=!1;this.canTraverse(t,e)&&(this.updateChildTiles(t,e),r=this.updateAndPushChildren(t,e,n,t.hasRenderContent?t._selectionDepth+1:t._selectionDepth));const i=t.parent,s=Boolean(!i||i._shouldRefine),o=!r;t.hasRenderContent?t.refine===st.e.ADD?(this.loadTile(t,e),this.selectTile(t,e)):t.refine===st.e.REPLACE&&(this.loadTile(t,e),o&&this.selectTile(t,e)):(this.emptyTiles[t.id]=t,this.loadTile(t,e),o&&this.selectTile(t,e)),this.touchTile(t,e),t._shouldRefine=r&&s}const r=(new Date).getTime();(this.traversalFinished(e)||r-this.lastUpdate>this.updateDebounceTime)&&(this.lastUpdate=r,this.options.onTraversalEnd(e))}updateChildTiles(t,e){const n=t.children;for(const t of n)this.updateTile(t,e)}updateAndPushChildren(t,e,n,r){const{loadSiblings:i,skipLevelOfDetail:s}=this.options,o=t.children;o.sort(this.compareDistanceToCamera.bind(this));const a=t.refine===st.e.REPLACE&&t.hasRenderContent&&!s;let c=!1,u=!0;for(const t of o)if(t._selectionDepth=r,t.isVisibleAndInRequestVolume?(n.find(t)&&n.delete(t),n.push(t),c=!0):(a||i)&&(this.loadTile(t,e),this.touchTile(t,e)),a){let n;if(n=!!t._inRequestVolume&&(t.hasRenderContent?t.contentAvailable:this.executeEmptyTraversal(t,e)),u=u&&n,!u)return!1}return c||(u=!1),u}updateTile(t,e){this.updateTileVisibility(t,e)}selectTile(t,e){this.shouldSelectTile(t)&&(t._selectedFrame=e.frameNumber,this.selectedTiles[t.id]=t)}loadTile(t,e){this.shouldLoadTile(t)&&(t._requestedFrame=e.frameNumber,t._priority=t._getPriority(),this.requestedTiles[t.id]=t)}touchTile(t,e){t.tileset._cache.touch(t),t._touchedFrame=e.frameNumber}canTraverse(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!!t.hasChildren&&(t.hasTilesetContent?!t.contentExpired:!(!r&&!t.isVisibleAndInRequestVolume)&&this.shouldRefine(t,e,n))}shouldLoadTile(t){return t.hasUnloadedContent||t.contentExpired}shouldSelectTile(t){return t.contentAvailable&&!this.options.skipLevelOfDetail}shouldRefine(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t._screenSpaceError;return n&&(r=t.getScreenSpaceError(e,!0)),r>this.options.maximumScreenSpaceError}updateTileVisibility(t,e){const n=[];if(this.options.viewportTraversersMap)for(const t in this.options.viewportTraversersMap){this.options.viewportTraversersMap[t]===e.viewport.id&&n.push(t)}else n.push(e.viewport.id);t.updateVisibility(e,n)}compareDistanceToCamera(t,e){return t._distanceToCamera-e._distanceToCamera}anyChildrenVisible(t,e){let n=!1;for(const r of t.children)r.updateVisibility(e),n=n||r.isVisibleAndInRequestVolume;return n}executeEmptyTraversal(t,e){let n=!0;const r=this._emptyTraversalStack;for(r.push(t);r.length>0&&n;){const t=r.pop();this.updateTile(t,e),t.isVisibleAndInRequestVolume||this.loadTile(t,e),this.touchTile(t,e);if(!t.hasRenderContent&&this.canTraverse(t,e,!1,!0)){const e=t.children;for(const t of e)r.find(t)&&r.delete(t),r.push(t)}else t.contentAvailable||t.hasEmptyContent||(n=!1)}return n}}const wt=new s.a;class It{constructor(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";Object(r.a)(this,"tileset",void 0),Object(r.a)(this,"header",void 0),Object(r.a)(this,"id",void 0),Object(r.a)(this,"url",void 0),Object(r.a)(this,"parent",void 0),Object(r.a)(this,"refine",void 0),Object(r.a)(this,"type",void 0),Object(r.a)(this,"contentUrl",void 0),Object(r.a)(this,"lodMetricType","geometricError"),Object(r.a)(this,"lodMetricValue",0),Object(r.a)(this,"boundingVolume",null),Object(r.a)(this,"content",null),Object(r.a)(this,"contentState",st.d.UNLOADED),Object(r.a)(this,"gpuMemoryUsageInBytes",0),Object(r.a)(this,"children",[]),Object(r.a)(this,"depth",0),Object(r.a)(this,"viewportIds",[]),Object(r.a)(this,"transform",new i.a),Object(r.a)(this,"extensions",null),Object(r.a)(this,"implicitTiling",null),Object(r.a)(this,"userData",{}),Object(r.a)(this,"computedTransform",void 0),Object(r.a)(this,"hasEmptyContent",!1),Object(r.a)(this,"hasTilesetContent",!1),Object(r.a)(this,"traverser",new St({})),Object(r.a)(this,"_cacheNode",null),Object(r.a)(this,"_frameNumber",null),Object(r.a)(this,"_expireDate",null),Object(r.a)(this,"_expiredContent",null),Object(r.a)(this,"_boundingBox",void 0),Object(r.a)(this,"_distanceToCamera",0),Object(r.a)(this,"_screenSpaceError",0),Object(r.a)(this,"_visibilityPlaneMask",void 0),Object(r.a)(this,"_visible",void 0),Object(r.a)(this,"_contentBoundingVolume",void 0),Object(r.a)(this,"_viewerRequestVolume",void 0),Object(r.a)(this,"_initialTransform",new i.a),Object(r.a)(this,"_priority",0),Object(r.a)(this,"_selectedFrame",0),Object(r.a)(this,"_requestedFrame",0),Object(r.a)(this,"_selectionDepth",0),Object(r.a)(this,"_touchedFrame",0),Object(r.a)(this,"_centerZDepth",0),Object(r.a)(this,"_shouldRefine",!1),Object(r.a)(this,"_stackLength",0),Object(r.a)(this,"_visitedFrame",0),Object(r.a)(this,"_inRequestVolume",!1),Object(r.a)(this,"_lodJudge",null),this.header=e,this.tileset=t,this.id=s||e.id,this.url=e.url,this.parent=n,this.refine=this._getRefine(e.refine),this.type=e.type,this.contentUrl=e.contentUrl,this._initializeLodMetric(e),this._initializeTransforms(e),this._initializeBoundingVolumes(e),this._initializeContent(e),this._initializeRenderingState(e),Object.seal(this)}destroy(){this.header=null}isDestroyed(){return null===this.header}get selected(){return this._selectedFrame===this.tileset._frameNumber}get isVisible(){return this._visible}get isVisibleAndInRequestVolume(){return this._visible&&this._inRequestVolume}get hasRenderContent(){return!this.hasEmptyContent&&!this.hasTilesetContent}get hasChildren(){return this.children.length>0||this.header.children&&this.header.children.length>0}get contentReady(){return this.contentState===st.d.READY||this.hasEmptyContent}get contentAvailable(){return Boolean(this.contentReady&&this.hasRenderContent||this._expiredContent&&!this.contentFailed)}get hasUnloadedContent(){return this.hasRenderContent&&this.contentUnloaded}get contentUnloaded(){return this.contentState===st.d.UNLOADED}get contentExpired(){return this.contentState===st.d.EXPIRED}get contentFailed(){return this.contentState===st.d.FAILED}get distanceToCamera(){return this._distanceToCamera}get screenSpaceError(){return this._screenSpaceError}get boundingBox(){return this._boundingBox||(this._boundingBox=ft(this.header.boundingVolume,this.boundingVolume)),this._boundingBox}getScreenSpaceError(t,e){switch(this.tileset.type){case st.c.I3S:return Bt(this,t);case st.c.TILES3D:return function(t,e,n){const r=t.tileset,i=t.parent&&t.parent.lodMetricValue||t.lodMetricValue,s=n?i:t.lodMetricValue;if(0===s)return 0;const o=Math.max(t._distanceToCamera,1e-7),{height:a,sseDenominator:c}=e,{viewDistanceScale:u}=r.options;let l=s*a*(u||1)/(o*c);return l-=pt(r,o),l}(this,t,e);default:throw new Error("Unsupported tileset type")}}unselect(){this._selectedFrame=0}_getGpuMemoryUsageInBytes(){return this.content.gpuMemoryUsageInBytes||this.content.byteLength||0}_getPriority(){const t=this.tileset._traverser,{skipLevelOfDetail:e}=t.options,n=this.refine===st.e.ADD||e;if(n&&!this.isVisible&&void 0!==this._visible)return-1;if(this.tileset._frameNumber-this._touchedFrame>=1)return-1;if(this.contentState===st.d.UNLOADED)return-1;const r=this.parent,i=r&&(!n||0===this._screenSpaceError||r.hasTilesetContent)?r._screenSpaceError:this._screenSpaceError,s=t.root?t.root._screenSpaceError:0;return Math.max(s-i,0)}async loadContent(){if(this.hasEmptyContent)return!1;if(this.content)return!0;this.contentExpired&&(this._expireDate=null),this.contentState=st.d.LOADING;const t=await this.tileset._requestScheduler.scheduleRequest(this.id,this._getPriority.bind(this));if(!t)return this.contentState=st.d.UNLOADED,!1;try{const e=this.tileset.getTileUrl(this.contentUrl),n=this.tileset.loader,r={...this.tileset.loadOptions,[n.id]:{...this.tileset.loadOptions[n.id],isTileset:"json"===this.type,...this._getLoaderSpecificOptions(n.id)}};return this.content=await Object(it.a)(e,n,r),this.tileset.options.contentLoader&&await this.tileset.options.contentLoader(this),this._isTileset()&&this.tileset._initializeTileHeaders(this.content,this),this.contentState=st.d.READY,this._onContentLoaded(),!0}catch(t){throw this.contentState=st.d.FAILED,t}finally{t.done()}}unloadContent(){return this.content&&this.content.destroy&&this.content.destroy(),this.content=null,this.header.content&&this.header.content.destroy&&this.header.content.destroy(),this.header.content=null,this.contentState=st.d.UNLOADED,!0}updateVisibility(t,e){if(this._frameNumber===t.frameNumber)return;const n=this.parent,r=n?n._visibilityPlaneMask:K.MASK_INDETERMINATE;if(this.tileset._traverser.options.updateTransforms){const t=n?n.computedTransform:this.tileset.modelMatrix;this._updateTransform(t)}this._distanceToCamera=this.distanceToTile(t),this._screenSpaceError=this.getScreenSpaceError(t,!1),this._visibilityPlaneMask=this.visibility(t,r),this._visible=this._visibilityPlaneMask!==K.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(t),this._frameNumber=t.frameNumber,this.viewportIds=e}visibility(t,e){const{cullingVolume:n}=t,{boundingVolume:r}=this;return n.computeVisibilityWithPlaneMask(r,e)}contentVisibility(){return!0}distanceToTile(t){const e=this.boundingVolume;return Math.sqrt(Math.max(e.distanceSquaredTo(t.camera.position),0))}cameraSpaceZDepth(t){let{camera:e}=t;const n=this.boundingVolume;return wt.subVectors(n.center,e.position),e.direction.dot(wt)}insideViewerRequestVolume(t){const e=this._viewerRequestVolume;return!e||e.distanceSquaredTo(t.camera.position)<=0}updateExpiration(){if(null!=this._expireDate&&this.contentReady&&!this.hasEmptyContent){const t=Date.now();Date.lessThan(this._expireDate,t)&&(this.contentState=st.d.EXPIRED,this._expiredContent=this.content)}}get extras(){return this.header.extras}_initializeLodMetric(t){"lodMetricType"in t?this.lodMetricType=t.lodMetricType:(this.lodMetricType=this.parent&&this.parent.lodMetricType||this.tileset.lodMetricType,console.warn("3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType")),"lodMetricValue"in t?this.lodMetricValue=t.lodMetricValue:(this.lodMetricValue=this.parent&&this.parent.lodMetricValue||this.tileset.lodMetricValue,console.warn("3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue"))}_initializeTransforms(t){this.transform=t.transform?new i.a(t.transform):new i.a;const e=this.parent,n=this.tileset,r=e&&e.computedTransform?e.computedTransform.clone():n.modelMatrix.clone();this.computedTransform=new i.a(r).multiplyRight(this.transform);const s=e&&e._initialTransform?e._initialTransform.clone():new i.a;this._initialTransform=new i.a(s).multiplyRight(this.transform)}_initializeBoundingVolumes(t){this._contentBoundingVolume=null,this._viewerRequestVolume=null,this._updateBoundingVolume(t)}_initializeContent(t){this.content={_tileset:this.tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=st.d.UNLOADED,this.hasTilesetContent=!1,t.contentUrl&&(this.content=null,this.hasEmptyContent=!1)}_initializeRenderingState(t){this.depth=t.level||(this.parent?this.parent.depth+1:0),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=K.MASK_INDETERMINATE,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._frameNumber=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._priority=0}_getRefine(t){return t||this.parent&&this.parent.refine||st.e.REPLACE}_isTileset(){return-1!==this.contentUrl.indexOf(".json")}_onContentLoaded(){switch(this.content&&this.content.type){case"vctr":case"geom":this.tileset._traverser.disableSkipLevelOfDetail=!0}this._isTileset()?this.hasTilesetContent=!0:this.gpuMemoryUsageInBytes=this._getGpuMemoryUsageInBytes()}_updateBoundingVolume(t){this.boundingVolume=ht(t.boundingVolume,this.computedTransform,this.boundingVolume);const e=t.content;e&&(e.boundingVolume&&(this._contentBoundingVolume=ht(e.boundingVolume,this.computedTransform,this._contentBoundingVolume)),t.viewerRequestVolume&&(this._viewerRequestVolume=ht(t.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)))}_updateTransform(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.a).clone().multiplyRight(this.transform);!t.equals(this.computedTransform)&&(this.computedTransform=t,this._updateBoundingVolume(this.header))}_getLoaderSpecificOptions(t){switch(t){case"i3s":return{...this.tileset.options.i3s,_tileOptions:{attributeUrls:this.header.attributeUrls,textureUrl:this.header.textureUrl,textureFormat:this.header.textureFormat,textureLoaderOptions:this.header.textureLoaderOptions,materialDefinition:this.header.materialDefinition,isDracoGeometry:this.header.isDracoGeometry,mbs:this.header.mbs},_tilesetOptions:{store:this.tileset.tileset.store,attributeStorageInfo:this.tileset.tileset.attributeStorageInfo,fields:this.tileset.tileset.fields},isTileHeader:!1};case"3d-tiles":case"cesium-ion":default:return{assetGltfUpAxis:(e=this.tileset.tileset).asset&&e.asset.gltfUpAxis||"Y"}}var e}}class Rt extends St{compareDistanceToCamera(t,e){return 0===e._distanceToCamera&&0===t._distanceToCamera?e._centerZDepth-t._centerZDepth:e._distanceToCamera-t._distanceToCamera}updateTileVisibility(t,e){if(super.updateTileVisibility(t,e),!t.isVisibleAndInRequestVolume)return;const n=t.children.length>0;if(t.hasTilesetContent&&n){const n=t.children[0];return this.updateTileVisibility(n,e),void(t._visible=n._visible)}if(this.meetsScreenSpaceErrorEarly(t,e))return void(t._visible=!1);const r=t.refine===st.e.REPLACE,i=t._optimChildrenWithinParent===st.b.USE_OPTIMIZATION;r&&i&&n&&!this.anyChildrenVisible(t,e)&&(t._visible=!1)}meetsScreenSpaceErrorEarly(t,e){const{parent:n}=t;return!(!n||n.hasTilesetContent||n.refine!==st.e.ADD)&&!this.shouldRefine(t,e,!0)}}class xt{constructor(){Object(r.a)(this,"frameNumberMap",new Map)}register(t,e){const n=this.frameNumberMap.get(t)||new Map,r=n.get(e)||0;n.set(e,r+1),this.frameNumberMap.set(t,n)}deregister(t,e){const n=this.frameNumberMap.get(t);if(!n)return;const r=n.get(e)||1;n.set(e,r-1)}isZero(t,e){var n;return 0===((null===(n=this.frameNumberMap.get(t))||void 0===n?void 0:n.get(e))||0)}}const Mt="REQUESTED",Nt="COMPLETED",Ft="ERROR";class Lt{constructor(){Object(r.a)(this,"_statusMap",void 0),Object(r.a)(this,"pendingTilesRegister",new xt),this._statusMap={}}add(t,e,n,r){if(!this._statusMap[e]){const{frameNumber:i,viewport:{id:s}}=r;this._statusMap[e]={request:t,callback:n,key:e,frameState:r,status:Mt},this.pendingTilesRegister.register(s,i),t().then(t=>{this._statusMap[e].status=Nt;const{frameNumber:n,viewport:{id:i}}=this._statusMap[e].frameState;this.pendingTilesRegister.deregister(i,n),this._statusMap[e].callback(t,r)}).catch(t=>{this._statusMap[e].status=Ft;const{frameNumber:r,viewport:{id:i}}=this._statusMap[e].frameState;this.pendingTilesRegister.deregister(i,r),n(t)})}}update(t,e){if(this._statusMap[t]){const{frameNumber:n,viewport:{id:r}}=this._statusMap[t].frameState;this.pendingTilesRegister.deregister(r,n);const{frameNumber:i,viewport:{id:s}}=e;this.pendingTilesRegister.register(s,i),this._statusMap[t].frameState=e}}find(t){return this._statusMap[t]}hasPendingTiles(t,e){return!this.pendingTilesRegister.isZero(t,e)}}class Dt extends St{constructor(t){super(t),Object(r.a)(this,"_tileManager",void 0),this._tileManager=new Lt}traversalFinished(t){return!this._tileManager.hasPendingTiles(t.viewport.id,this._frameNumber||0)}shouldRefine(t,e){return t._lodJudge=function(t,e){if(0===t.lodMetricValue||isNaN(t.lodMetricValue))return"DIG";const n=2*Bt(t,e);return n<2?"OUT":!t.header.children||n<=t.lodMetricValue?"DRAW":t.header.children?"DIG":"OUT"}(t,e),"DIG"===t._lodJudge}updateChildTiles(t,e){const n=t.header.children||[],r=t.children,i=t.tileset;for(const s of n){const n="".concat(s.id,"-").concat(e.viewport.id),o=r&&r.find(t=>t.id===n);if(o)o&&this.updateTile(o,e);else{let r=()=>this._loadTile(s.id,i);this._tileManager.find(n)?this._tileManager.update(n,e):(i.tileset.nodePages&&(r=()=>i.tileset.nodePagesTile.formTileFromNodePages(s.id)),this._tileManager.add(r,n,e=>this._onTileLoad(e,t,n),e))}}return!1}async _loadTile(t,e){const{loader:n}=e,r=e.getTileUrl("".concat(e.url,"/nodes/").concat(t)),i={...e.loadOptions,i3s:{...e.loadOptions.i3s,isTileHeader:!0}};return await Object(it.a)(r,n,i)}_onTileLoad(t,e,n){const r=new It(e.tileset,t,e,n);e.children.push(r);const i=this._tileManager.find(r.id).frameState;this.updateTile(r,i),this._frameNumber===i.frameNumber&&(this.traversalFinished(i)||(new Date).getTime()-this.lastUpdate>this.updateDebounceTime)&&this.executeTraversal(r,i)}}const Pt={description:"",ellipsoid:o.a.WGS84,modelMatrix:new i.a,throttleRequests:!0,maxRequests:64,maximumMemoryUsage:32,maximumTilesSelected:0,debounceTime:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{},onTraversalComplete:t=>t,contentLoader:void 0,viewDistanceScale:1,maximumScreenSpaceError:8,loadTiles:!0,updateTransforms:!0,viewportTraversersMap:null,loadOptions:{fetch:{}},attributions:[],basePath:"",i3s:{}},Ut="Tiles In Tileset(s)";class Gt{constructor(t,e){Object(r.a)(this,"options",void 0),Object(r.a)(this,"loadOptions",void 0),Object(r.a)(this,"type",void 0),Object(r.a)(this,"tileset",void 0),Object(r.a)(this,"loader",void 0),Object(r.a)(this,"url",void 0),Object(r.a)(this,"basePath",void 0),Object(r.a)(this,"modelMatrix",void 0),Object(r.a)(this,"ellipsoid",void 0),Object(r.a)(this,"lodMetricType",void 0),Object(r.a)(this,"lodMetricValue",void 0),Object(r.a)(this,"refine",void 0),Object(r.a)(this,"root",null),Object(r.a)(this,"roots",{}),Object(r.a)(this,"asset",{}),Object(r.a)(this,"description",""),Object(r.a)(this,"properties",void 0),Object(r.a)(this,"extras",null),Object(r.a)(this,"attributions",{}),Object(r.a)(this,"credits",{}),Object(r.a)(this,"stats",void 0),Object(r.a)(this,"contentFormats",{draco:!1,meshopt:!1,dds:!1,ktx2:!1}),Object(r.a)(this,"cartographicCenter",null),Object(r.a)(this,"cartesianCenter",null),Object(r.a)(this,"zoom",1),Object(r.a)(this,"boundingVolume",null),Object(r.a)(this,"dynamicScreenSpaceErrorComputedDensity",0),Object(r.a)(this,"maximumMemoryUsage",32),Object(r.a)(this,"gpuMemoryUsageInBytes",0),Object(r.a)(this,"_frameNumber",0),Object(r.a)(this,"_queryParams",{}),Object(r.a)(this,"_extensionsUsed",[]),Object(r.a)(this,"_tiles",{}),Object(r.a)(this,"_pendingCount",0),Object(r.a)(this,"selectedTiles",[]),Object(r.a)(this,"traverseCounter",0),Object(r.a)(this,"geometricError",0),Object(r.a)(this,"lastUpdatedVieports",null),Object(r.a)(this,"_requestedTiles",[]),Object(r.a)(this,"_emptyTiles",[]),Object(r.a)(this,"frameStateData",{}),Object(r.a)(this,"_traverser",void 0),Object(r.a)(this,"_cache",new g),Object(r.a)(this,"_requestScheduler",void 0),Object(r.a)(this,"updatePromise",null),Object(r.a)(this,"tilesetInitializationPromise",void 0),this.options={...Pt,...e},this.tileset=t,this.loader=t.loader,this.type=t.type,this.url=t.url,this.basePath=t.basePath||l.a.dirname(this.url),this.modelMatrix=this.options.modelMatrix,this.ellipsoid=this.options.ellipsoid,this.lodMetricType=t.lodMetricType,this.lodMetricValue=t.lodMetricValue,this.refine=t.root.refine,this.loadOptions=this.options.loadOptions||{},this._traverser=this._initializeTraverser(),this._requestScheduler=new h.a({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this.stats=new u({id:this.url}),this._initializeStats(),this.tilesetInitializationPromise=this._initializeTileSet(t)}destroy(){this._destroy()}isLoaded(){return 0===this._pendingCount&&0!==this._frameNumber&&0===this._requestedTiles.length}get tiles(){return Object.values(this._tiles)}get frameNumber(){return this._frameNumber}get queryParams(){return new URLSearchParams(this._queryParams).toString()}setProps(t){this.options={...this.options,...t}}setOptions(t){this.options={...this.options,...t}}getTileUrl(t){return t.startsWith("data:")?t:"".concat(t).concat(t.includes("?")?"&":"?").concat(this.queryParams)}hasExtension(t){return Boolean(this._extensionsUsed.indexOf(t)>-1)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.tilesetInitializationPromise.then(()=>{!t&&this.lastUpdatedVieports?t=this.lastUpdatedVieports:this.lastUpdatedVieports=t,t&&this.doUpdate(t)})}async selectTiles(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return await this.tilesetInitializationPromise,t&&(this.lastUpdatedVieports=t),this.updatePromise||(this.updatePromise=new Promise(t=>{setTimeout(()=>{this.lastUpdatedVieports&&this.doUpdate(this.lastUpdatedVieports),t(this._frameNumber),this.updatePromise=null},this.options.debounceTime)})),this.updatePromise}doUpdate(t){if("loadTiles"in this.options&&!this.options.loadTiles)return;if(this.traverseCounter>0)return;const e=t instanceof Array?t:[t];this._cache.reset(),this._frameNumber++,this.traverseCounter=e.length;const n=[];for(const t of e){const e=t.id;this._needTraverse(e)?n.push(e):this.traverseCounter--}for(const t of e){const e=t.id;if(this.roots[e]||(this.roots[e]=this._initializeTileHeaders(this.tileset,null)),!n.includes(e))continue;const r=Z(t,this._frameNumber);this._traverser.traverse(this.roots[e],r,this.options)}}_needTraverse(t){let e=t;return this.options.viewportTraversersMap&&(e=this.options.viewportTraversersMap[t]),e===t}_onTraversalEnd(t){const e=t.viewport.id;this.frameStateData[e]||(this.frameStateData[e]={selectedTiles:[],_requestedTiles:[],_emptyTiles:[]});const n=this.frameStateData[e],r=Object.values(this._traverser.selectedTiles),[i,s]=function(t,e,n){if(0===n||t.length<=n)return[t,[]];const r=[],{longitude:i,latitude:s}=e.viewport;for(const[e,n]of t.entries()){const[t,o]=n.header.mbs,a=Math.abs(i-t),c=Math.abs(s-o),u=Math.sqrt(c*c+a*a);r.push([e,u])}const o=r.sort((t,e)=>t[1]-e[1]),a=[];for(let e=0;e<n;e++)a.push(t[o[e][0]]);const c=[];for(let e=n;e<o.length;e++)c.push(t[o[e][0]]);return[a,c]}(r,t,this.options.maximumTilesSelected);n.selectedTiles=i;for(const t of s)t.unselect();n._requestedTiles=Object.values(this._traverser.requestedTiles),n._emptyTiles=Object.values(this._traverser.emptyTiles),this.traverseCounter--,this.traverseCounter>0||this._updateTiles()}_updateTiles(){this.selectedTiles=[],this._requestedTiles=[],this._emptyTiles=[];for(const t in this.frameStateData){const e=this.frameStateData[t];this.selectedTiles=this.selectedTiles.concat(e.selectedTiles),this._requestedTiles=this._requestedTiles.concat(e._requestedTiles),this._emptyTiles=this._emptyTiles.concat(e._emptyTiles)}this.selectedTiles=this.options.onTraversalComplete(this.selectedTiles);for(const t of this.selectedTiles)this._tiles[t.id]=t;this._loadTiles(),this._unloadTiles(),this._updateStats()}_tilesChanged(t,e){if(t.length!==e.length)return!0;const n=new Set(t.map(t=>t.id)),r=new Set(e.map(t=>t.id));let i=t.filter(t=>!r.has(t.id)).length>0;return i=i||e.filter(t=>!n.has(t.id)).length>0,i}_loadTiles(){for(const t of this._requestedTiles)t.contentUnloaded&&this._loadTile(t)}_unloadTiles(){this._cache.unloadTiles(this,(t,e)=>t._unloadTile(e))}_updateStats(){let t=0,e=0;for(const n of this.selectedTiles)n.contentAvailable&&n.content&&(t++,n.content.pointCount?e+=n.content.pointCount:e+=n.content.vertexCount);this.stats.get("Tiles In View").count=this.selectedTiles.length,this.stats.get("Tiles To Render").count=t,this.stats.get("Points/Vertices").count=e}async _initializeTileSet(t){this.type===st.c.I3S&&(this.calculateViewPropsI3S(),t.root=await t.root),this.root=this._initializeTileHeaders(t,null),this.type===st.c.TILES3D&&(this._initializeTiles3DTileset(t),this.calculateViewPropsTiles3D()),this.type===st.c.I3S&&this._initializeI3STileset()}calculateViewPropsI3S(){var t;const e=this.tileset.fullExtent;if(e){const{xmin:t,xmax:n,ymin:r,ymax:i,zmin:a,zmax:c}=e;return this.cartographicCenter=new s.a(t+(n-t)/2,r+(i-r)/2,a+(c-a)/2),this.cartesianCenter=o.a.WGS84.cartographicToCartesian(this.cartographicCenter,new s.a),void(this.zoom=rt(e,this.cartographicCenter,this.cartesianCenter))}const n=null===(t=this.tileset.store)||void 0===t?void 0:t.extent;if(n){const[t,e,r,i]=n;return this.cartographicCenter=new s.a(t+(r-t)/2,e+(i-e)/2,0),this.cartesianCenter=o.a.WGS84.cartographicToCartesian(this.cartographicCenter,new s.a),void(this.zoom=function(t,e,n){const[r,i,s,o]=t;return rt({xmin:r,xmax:s,ymin:i,ymax:o,zmin:0,zmax:0},e,n)}(n,this.cartographicCenter,this.cartesianCenter))}console.warn("Extent is not defined in the tileset header"),this.cartographicCenter=new s.a,this.zoom=1}calculateViewPropsTiles3D(){const t=this.root,{center:e}=t.boundingVolume;if(!e)return console.warn("center was not pre-calculated for the root tile"),this.cartographicCenter=new s.a,void(this.zoom=1);0!==e[0]||0!==e[1]||0!==e[2]?this.cartographicCenter=o.a.WGS84.cartesianToCartographic(e,new s.a):this.cartographicCenter=new s.a(0,0,-o.a.WGS84.radii[0]),this.cartesianCenter=e,this.zoom=nt(t.boundingVolume,this.cartographicCenter)}_initializeStats(){this.stats.get(Ut),this.stats.get("Tiles Loading"),this.stats.get("Tiles In Memory"),this.stats.get("Tiles In View"),this.stats.get("Tiles To Render"),this.stats.get("Tiles Loaded"),this.stats.get("Tiles Unloaded"),this.stats.get("Failed Tile Loads"),this.stats.get("Points/Vertices"),this.stats.get("Tile Memory Use","memory")}_initializeTileHeaders(t,e){const n=new It(this,t.root,e);if(e&&(e.children.push(n),n.depth=e.depth+1),this.type===st.c.TILES3D){const t=[];for(t.push(n);t.length>0;){const e=t.pop();this.stats.get(Ut).incrementCount();const n=e.header.children||[];for(const i of n){var r;const n=new It(this,i,e);if(null!==(r=n.contentUrl)&&void 0!==r&&r.includes("?session=")){const t=new URL(n.contentUrl).searchParams.get("session");t&&(this._queryParams.session=t)}e.children.push(n),n.depth=e.depth+1,t.push(n)}}}return n}_initializeTraverser(){let t;switch(this.type){case st.c.TILES3D:t=Rt;break;case st.c.I3S:t=Dt;break;default:t=St}return new t({basePath:this.basePath,onTraversalEnd:this._onTraversalEnd.bind(this)})}_destroyTileHeaders(t){this._destroySubtree(t)}async _loadTile(t){let e;try{this._onStartTileLoading(),e=await t.loadContent()}catch(e){this._onTileLoadError(t,e instanceof Error?e:new Error("load failed"))}finally{this._onEndTileLoading(),this._onTileLoad(t,e)}}_onTileLoadError(t,e){this.stats.get("Failed Tile Loads").incrementCount();const n=e.message||e.toString(),r=t.url;console.error("A 3D tile failed to load: ".concat(t.url," ").concat(n)),this.options.onTileError(t,n,r)}_onTileLoad(t,e){if(e){if(this.type===st.c.I3S){var n,r;const t=(null===(n=this.tileset)||void 0===n||null===(r=n.nodePagesTile)||void 0===r?void 0:r.nodesInNodePages)||0;this.stats.get(Ut).reset(),this.stats.get(Ut).addCount(t)}t&&t.content&&function(t,e){Object(m.a)(t),Object(m.a)(e);const{rtcCenter:n,gltfUpAxis:r}=e,{computedTransform:a,boundingVolume:{center:c}}=t;let u=new i.a(a);switch(n&&u.translate(n),r){case"Z":break;case"Y":const t=(new i.a).rotateX(Math.PI/2);u=u.multiplyRight(t);break;case"X":const e=(new i.a).rotateY(-Math.PI/2);u=u.multiplyRight(e)}e.isQuantized&&u.translate(e.quantizedVolumeOffset).scale(e.quantizedVolumeScale);const l=new s.a(c);e.cartesianModelMatrix=u,e.cartesianOrigin=l;const h=o.a.WGS84.cartesianToCartographic(l,new s.a),f=o.a.WGS84.eastNorthUpToFixedFrame(l).invert();e.cartographicModelMatrix=f.multiplyRight(u),e.cartographicOrigin=h,e.coordinateSystem||(e.modelMatrix=e.cartographicModelMatrix)}(t,t.content),this.updateContentTypes(t),this._addTileToCache(t),this.options.onTileLoad(t)}}updateContentTypes(t){if(this.type===st.c.I3S)switch(t.header.isDracoGeometry&&(this.contentFormats.draco=!0),t.header.textureFormat){case"dds":this.contentFormats.dds=!0;break;case"ktx2":this.contentFormats.ktx2=!0}else if(this.type===st.c.TILES3D){var e;const{extensionsRemoved:n=[]}=(null===(e=t.content)||void 0===e?void 0:e.gltf)||{};n.includes("KHR_draco_mesh_compression")&&(this.contentFormats.draco=!0),n.includes("EXT_meshopt_compression")&&(this.contentFormats.meshopt=!0),n.includes("KHR_texture_basisu")&&(this.contentFormats.ktx2=!0)}}_onStartTileLoading(){this._pendingCount++,this.stats.get("Tiles Loading").incrementCount()}_onEndTileLoading(){this._pendingCount--,this.stats.get("Tiles Loading").decrementCount()}_addTileToCache(t){this._cache.add(this,t,e=>e._updateCacheStats(t))}_updateCacheStats(t){this.stats.get("Tiles Loaded").incrementCount(),this.stats.get("Tiles In Memory").incrementCount(),this.gpuMemoryUsageInBytes+=t.gpuMemoryUsageInBytes||0,this.stats.get("Tile Memory Use").count=this.gpuMemoryUsageInBytes}_unloadTile(t){this.gpuMemoryUsageInBytes-=t.gpuMemoryUsageInBytes||0,this.stats.get("Tiles In Memory").decrementCount(),this.stats.get("Tiles Unloaded").incrementCount(),this.stats.get("Tile Memory Use").count=this.gpuMemoryUsageInBytes,this.options.onTileUnload(t),t.unloadContent()}_destroy(){const t=[];for(this.root&&t.push(this.root);t.length>0;){const e=t.pop();for(const n of e.children)t.push(n);this._destroyTile(e)}this.root=null}_destroySubtree(t){const e=t,n=[];for(n.push(e);n.length>0;){t=n.pop();for(const e of t.children)n.push(e);t!==e&&this._destroyTile(t)}e.children=[]}_destroyTile(t){this._cache.unloadTile(this,t),this._unloadTile(t),t.destroy()}_initializeTiles3DTileset(t){if(t.queryString){const e=new URLSearchParams(t.queryString),n=Object.fromEntries(e.entries());this._queryParams={...this._queryParams,...n}}if(this.asset=t.asset,!this.asset)throw new Error("Tileset must have an asset property.");if("0.0"!==this.asset.version&&"1.0"!==this.asset.version)throw new Error("The tileset must be 3D Tiles version 0.0 or 1.0.");"tilesetVersion"in this.asset&&(this._queryParams.v=this.asset.tilesetVersion),this.credits={attributions:this.options.attributions||[]},this.description=this.options.description||"",this.properties=t.properties,this.geometricError=t.geometricError,this._extensionsUsed=t.extensionsUsed||[],this.extras=t.extras}_initializeI3STileset(){this.loadOptions.i3s&&"token"in this.loadOptions.i3s&&(this._queryParams.token=this.loadOptions.i3s.token)}}},2186:function(t,e,n){"use strict";n.d(e,"a",(function(){return k}));var r=n(3),i=n(2193),s=n(518);class o extends s.a{constructor(t){super(t)}async getMetadata(){throw new Error("ImageSource.getMetadata not implemented")}async getImage(t){const e=this.getGranularParameters(t),n=this.getURLFromTemplate(e),r=await this.fetch(n),s=await r.arrayBuffer();return await i.a.parse(s)}getGranularParameters(t){const[e,n,r,i]=t.bbox;return{...t,east:e,north:n,south:i,west:r}}getURLFromTemplate(t){let e=this.props.url;for(const[n,r]of Object.entries(t))e=e.replace("${".concat(n,"}"),String(r)),e=e.replace("{".concat(n,"}"),String(r));return e}}Object(r.a)(o,"type","template"),Object(r.a)(o,"testURL",t=>t.toLowerCase().includes("{"));var a=n(1153);const c={ontext:()=>{},onprocessinginstruction:()=>{},onsgmldeclaration:()=>{},ondoctype:()=>{},oncomment:()=>{},onopentagstart:()=>{},onattribute:()=>{},onopentag:()=>{},onclosetag:()=>{},onopencdata:()=>{},oncdata:()=>{},onclosecdata:()=>{},onerror:()=>{},onend:()=>{},onready:()=>{},onscript:()=>{},onopennamespace:()=>{},onclosenamespace:()=>{}},u={...c,strict:!1,MAX_BUFFER_LENGTH:65536,lowercase:!1,lowercasetags:!1,noscript:!1,strictEntities:!1,xmlns:void 0,position:void 0,trim:void 0,normalize:void 0},l=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],h=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"],f=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,p={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(p).forEach(t=>{const e=p[t];p[t]="number"==typeof e?String.fromCharCode(e):e});class _{constructor(){Object(r.a)(this,"EVENTS",l),Object(r.a)(this,"ENTITIES",{...p}),Object(r.a)(this,"events",void 0),Object(r.a)(this,"XML_ENTITIES",{amp:"&",gt:">",lt:"<",quot:'"',apos:"'"}),Object(r.a)(this,"S",0),Object(r.a)(this,"opt",void 0),Object(r.a)(this,"trackPosition",!1),Object(r.a)(this,"column",0),Object(r.a)(this,"line",0),Object(r.a)(this,"c",""),Object(r.a)(this,"error",void 0),Object(r.a)(this,"q",""),Object(r.a)(this,"bufferCheckPosition",void 0),Object(r.a)(this,"closed",!1),Object(r.a)(this,"tags",[]),Object(r.a)(this,"looseCase",""),Object(r.a)(this,"closedRoot",!1),Object(r.a)(this,"sawRoot",!1),Object(r.a)(this,"strict",!1),Object(r.a)(this,"tag",void 0),Object(r.a)(this,"strictEntities",void 0),Object(r.a)(this,"state",void 0),Object(r.a)(this,"noscript",!1),Object(r.a)(this,"attribList",[]),Object(r.a)(this,"ns",void 0),Object(r.a)(this,"position",0),Object(r.a)(this,"STATE",{BEGIN:this.S++,BEGIN_WHITESPACE:this.S++,TEXT:this.S++,TEXT_ENTITY:this.S++,OPEN_WAKA:this.S++,SGML_DECL:this.S++,SGML_DECL_QUOTED:this.S++,DOCTYPE:this.S++,DOCTYPE_QUOTED:this.S++,DOCTYPE_DTD:this.S++,DOCTYPE_DTD_QUOTED:this.S++,COMMENT_STARTING:this.S++,COMMENT:this.S++,COMMENT_ENDING:this.S++,COMMENT_ENDED:this.S++,CDATA:this.S++,CDATA_ENDING:this.S++,CDATA_ENDING_2:this.S++,PROC_INST:this.S++,PROC_INST_BODY:this.S++,PROC_INST_ENDING:this.S++,OPEN_TAG:this.S++,OPEN_TAG_SLASH:this.S++,ATTRIB:this.S++,ATTRIB_NAME:this.S++,ATTRIB_NAME_SAW_WHITE:this.S++,ATTRIB_VALUE:this.S++,ATTRIB_VALUE_QUOTED:this.S++,ATTRIB_VALUE_CLOSED:this.S++,ATTRIB_VALUE_UNQUOTED:this.S++,ATTRIB_VALUE_ENTITY_Q:this.S++,ATTRIB_VALUE_ENTITY_U:this.S++,CLOSE_TAG:this.S++,CLOSE_TAG_SAW_WHITE:this.S++,SCRIPT:this.S++,SCRIPT_ENDING:this.S++}),Object(r.a)(this,"BUFFERS",h),Object(r.a)(this,"CDATA","[CDATA["),Object(r.a)(this,"DOCTYPE","DOCTYPE"),Object(r.a)(this,"XML_NAMESPACE","http://www.w3.org/XML/1998/namespace"),Object(r.a)(this,"XMLNS_NAMESPACE","http://www.w3.org/2000/xmlns/"),Object(r.a)(this,"rootNS",{xml:this.XML_NAMESPACE,xmlns:this.XMLNS_NAMESPACE}),Object(r.a)(this,"comment",void 0),Object(r.a)(this,"sgmlDecl",void 0),Object(r.a)(this,"textNode",""),Object(r.a)(this,"tagName",void 0),Object(r.a)(this,"doctype",void 0),Object(r.a)(this,"procInstName",void 0),Object(r.a)(this,"procInstBody",void 0),Object(r.a)(this,"entity",""),Object(r.a)(this,"attribName",void 0),Object(r.a)(this,"attribValue",void 0),Object(r.a)(this,"cdata",""),Object(r.a)(this,"script",""),Object(r.a)(this,"startTagPosition",0),this.S=0;for(const t in this.STATE)this.STATE.hasOwnProperty(t)&&(this.STATE[this.STATE[t]]=t);this.S=this.STATE}static charAt(t,e){let n="";return e<t.length&&(n=t.charAt(e)),n}static isWhitespace(t){return" "===t||"\n"===t||"\r"===t||"\t"===t}static isQuote(t){return'"'===t||"'"===t}static isAttribEnd(t){return">"===t||_.isWhitespace(t)}static isMatch(t,e){return t.test(e)}static notMatch(t,e){return!_.isMatch(t,e)}static qname(t,e){const n=t.indexOf(":")<0?["",t]:t.split(":");let r=n[0],i=n[1];return e&&"xmlns"===t&&(r="xmlns",i=""),{prefix:r,local:i}}write(t){if(this.error)throw this.error;if(this.closed)return this.errorFunction("Cannot write after close. Assign an onready handler.");if(null===t)return this.end();"object"==typeof t&&(t=t.toString());let e,n=0;for(;e=_.charAt(t,n++),this.c=e,e;)switch(this.trackPosition&&(this.position++,"\n"===e?(this.line++,this.column=0):this.column++),this.state){case this.S.BEGIN:if(this.state=this.S.BEGIN_WHITESPACE,"\ufeff"===e)continue;this.beginWhiteSpace(e);continue;case this.S.BEGIN_WHITESPACE:this.beginWhiteSpace(e);continue;case this.S.TEXT:if(this.sawRoot&&!this.closedRoot){const r=n-1;for(;e&&"<"!==e&&"&"!==e;)e=_.charAt(t,n++),e&&this.trackPosition&&(this.position++,"\n"===e?(this.line++,this.column=0):this.column++);this.textNode+=t.substring(r,n-1)}"<"!==e||this.sawRoot&&this.closedRoot&&!this.strict?(_.isWhitespace(e)||this.sawRoot&&!this.closedRoot||this.strictFail("Text data outside of root node."),"&"===e?this.state=this.S.TEXT_ENTITY:this.textNode+=e):(this.state=this.S.OPEN_WAKA,this.startTagPosition=this.position);continue;case this.S.SCRIPT:"<"===e?this.state=this.S.SCRIPT_ENDING:this.script+=e;continue;case this.S.SCRIPT_ENDING:"/"===e?this.state=this.S.CLOSE_TAG:(this.script+="<".concat(e),this.state=this.S.SCRIPT);continue;case this.S.OPEN_WAKA:if("!"===e)this.state=this.S.SGML_DECL,this.sgmlDecl="";else if(_.isWhitespace(e));else if(_.isMatch(f,e))this.state=this.S.OPEN_TAG,this.tagName=e;else if("/"===e)this.state=this.S.CLOSE_TAG,this.tagName="";else if("?"===e)this.state=this.S.PROC_INST,this.procInstName=this.procInstBody="";else{if(this.strictFail("Unencoded <"),this.startTagPosition+1<this.position){const t=this.position-this.startTagPosition;e=new Array(t).join(" ")+e}this.textNode+="<".concat(e),this.state=this.S.TEXT}continue;case this.S.SGML_DECL:(this.sgmlDecl+e).toUpperCase()===this.CDATA?(this.emitNode("onopencdata"),this.state=this.S.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+e==="--"?(this.state=this.S.COMMENT,this.comment="",this.sgmlDecl=""):(this.sgmlDecl+e).toUpperCase()===this.DOCTYPE?(this.state=this.S.DOCTYPE,(this.doctype||this.sawRoot)&&this.strictFail("Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===e?(this.emitNode("onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=this.S.TEXT):_.isQuote(e)?(this.state=this.S.SGML_DECL_QUOTED,this.sgmlDecl+=e):this.sgmlDecl+=e;continue;case this.S.SGML_DECL_QUOTED:e===this.q&&(this.state=this.S.SGML_DECL,this.q=""),this.sgmlDecl+=e;continue;case this.S.DOCTYPE:">"===e?(this.state=this.S.TEXT,this.emitNode("ondoctype",this.doctype),this.doctype=!0):(this.doctype+=e,"["===e?this.state=this.S.DOCTYPE_DTD:_.isQuote(e)&&(this.state=this.S.DOCTYPE_QUOTED,this.q=e));continue;case this.S.DOCTYPE_QUOTED:this.doctype+=e,e===this.q&&(this.q="",this.state=this.S.DOCTYPE);continue;case this.S.DOCTYPE_DTD:this.doctype+=e,"]"===e?this.state=this.S.DOCTYPE:_.isQuote(e)&&(this.state=this.S.DOCTYPE_DTD_QUOTED,this.q=e);continue;case this.S.DOCTYPE_DTD_QUOTED:this.doctype+=e,e===this.q&&(this.state=this.S.DOCTYPE_DTD,this.q="");continue;case this.S.COMMENT:"-"===e?this.state=this.S.COMMENT_ENDING:this.comment+=e;continue;case this.S.COMMENT_ENDING:"-"===e?(this.state=this.S.COMMENT_ENDED,this.comment=this.textApplyOptions(this.comment),this.comment&&this.emitNode("oncomment",this.comment),this.comment=""):(this.comment+="-".concat(e),this.state=this.S.COMMENT);continue;case this.S.COMMENT_ENDED:">"!==e?(this.strictFail("Malformed comment"),this.comment+="--".concat(e),this.state=this.S.COMMENT):this.state=this.S.TEXT;continue;case this.S.CDATA:"]"===e?this.state=this.S.CDATA_ENDING:this.cdata+=e;continue;case this.S.CDATA_ENDING:"]"===e?this.state=this.S.CDATA_ENDING_2:(this.cdata+="]".concat(e),this.state=this.S.CDATA);continue;case this.S.CDATA_ENDING_2:">"===e?(this.cdata&&this.emitNode("oncdata",this.cdata),this.emitNode("onclosecdata"),this.cdata="",this.state=this.S.TEXT):"]"===e?this.cdata+="]":(this.cdata+="]]".concat(e),this.state=this.S.CDATA);continue;case this.S.PROC_INST:"?"===e?this.state=this.S.PROC_INST_ENDING:_.isWhitespace(e)?this.state=this.S.PROC_INST_BODY:this.procInstName+=e;continue;case this.S.PROC_INST_BODY:if(!this.procInstBody&&_.isWhitespace(e))continue;"?"===e?this.state=this.S.PROC_INST_ENDING:this.procInstBody+=e;continue;case this.S.PROC_INST_ENDING:">"===e?(this.emitNode("onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=this.S.TEXT):(this.procInstBody+="?".concat(e),this.state=this.S.PROC_INST_BODY);continue;case this.S.OPEN_TAG:_.isMatch(d,e)?this.tagName+=e:(this.newTag(),">"===e?this.openTag():"/"===e?this.state=this.S.OPEN_TAG_SLASH:(_.isWhitespace(e)||this.strictFail("Invalid character in tag name"),this.state=this.S.ATTRIB));continue;case this.S.OPEN_TAG_SLASH:">"===e?(this.openTag(!0),this.closeTag()):(this.strictFail("Forward-slash in opening tag not followed by >"),this.state=this.S.ATTRIB);continue;case this.S.ATTRIB:if(_.isWhitespace(e))continue;">"===e?this.openTag():"/"===e?this.state=this.S.OPEN_TAG_SLASH:_.isMatch(f,e)?(this.attribName=e,this.attribValue="",this.state=this.S.ATTRIB_NAME):this.strictFail("Invalid attribute name");continue;case this.S.ATTRIB_NAME:"="===e?this.state=this.S.ATTRIB_VALUE:">"===e?(this.strictFail("Attribute without value"),this.attribValue=this.attribName,this.attrib(),this.openTag()):_.isWhitespace(e)?this.state=this.S.ATTRIB_NAME_SAW_WHITE:_.isMatch(d,e)?this.attribName+=e:this.strictFail("Invalid attribute name");continue;case this.S.ATTRIB_NAME_SAW_WHITE:if("="===e)this.state=this.S.ATTRIB_VALUE;else{if(_.isWhitespace(e))continue;this.strictFail("Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",this.emitNode("onattribute",{name:this.attribName,value:""}),this.attribName="",">"===e?this.openTag():_.isMatch(f,e)?(this.attribName=e,this.state=this.S.ATTRIB_NAME):(this.strictFail("Invalid attribute name"),this.state=this.S.ATTRIB)}continue;case this.S.ATTRIB_VALUE:if(_.isWhitespace(e))continue;_.isQuote(e)?(this.q=e,this.state=this.S.ATTRIB_VALUE_QUOTED):(this.strictFail("Unquoted attribute value"),this.state=this.S.ATTRIB_VALUE_UNQUOTED,this.attribValue=e);continue;case this.S.ATTRIB_VALUE_QUOTED:if(e!==this.q){"&"===e?this.state=this.S.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=e;continue}this.attrib(),this.q="",this.state=this.S.ATTRIB_VALUE_CLOSED;continue;case this.S.ATTRIB_VALUE_CLOSED:_.isWhitespace(e)?this.state=this.S.ATTRIB:">"===e?this.openTag():"/"===e?this.state=this.S.OPEN_TAG_SLASH:_.isMatch(f,e)?(this.strictFail("No whitespace between attributes"),this.attribName=e,this.attribValue="",this.state=this.S.ATTRIB_NAME):this.strictFail("Invalid attribute name");continue;case this.S.ATTRIB_VALUE_UNQUOTED:if(!_.isAttribEnd(e)){"&"===e?this.state=this.S.ATTRIB_VALUE_ENTITY_U:this.attribValue+=e;continue}this.attrib(),">"===e?this.openTag():this.state=this.S.ATTRIB;continue;case this.S.CLOSE_TAG:if(this.tagName)">"===e?this.closeTag():_.isMatch(d,e)?this.tagName+=e:this.script?(this.script+="</".concat(this.tagName),this.tagName="",this.state=this.S.SCRIPT):(_.isWhitespace(e)||this.strictFail("Invalid tagname in closing tag"),this.state=this.S.CLOSE_TAG_SAW_WHITE);else{if(_.isWhitespace(e))continue;_.notMatch(f,e)?this.script?(this.script+="</".concat(e),this.state=this.S.SCRIPT):this.strictFail("Invalid tagname in closing tag."):this.tagName=e}continue;case this.S.CLOSE_TAG_SAW_WHITE:if(_.isWhitespace(e))continue;">"===e?this.closeTag():this.strictFail("Invalid characters in closing tag");continue;case this.S.TEXT_ENTITY:case this.S.ATTRIB_VALUE_ENTITY_Q:case this.S.ATTRIB_VALUE_ENTITY_U:let r,i;switch(this.state){case this.S.TEXT_ENTITY:r=this.S.TEXT,i="textNode";break;case this.S.ATTRIB_VALUE_ENTITY_Q:r=this.S.ATTRIB_VALUE_QUOTED,i="attribValue";break;case this.S.ATTRIB_VALUE_ENTITY_U:r=this.S.ATTRIB_VALUE_UNQUOTED,i="attribValue";break;default:throw new Error("Unknown state: ".concat(this.state))}";"===e?(this[i]+=this.parseEntity(),this.entity="",this.state=r):_.isMatch(this.entity.length?m:g,e)?this.entity+=e:(this.strictFail("Invalid character in entity name"),this[i]+="&".concat(this.entity).concat(e),this.entity="",this.state=r);continue;default:throw new Error("Unknown state: ".concat(this.state))}return this.position>=this.bufferCheckPosition&&this.checkBufferLength(),this}emit(t,e){if(this.events.hasOwnProperty(t)){const n=t.replace(/^on/,"");this.events[t](e,n,this)}}clearBuffers(){for(let t=0,e=this.BUFFERS.length;t<e;t++)this[this[t]]=""}flushBuffers(){this.closeText(),""!==this.cdata&&(this.emitNode("oncdata",this.cdata),this.cdata=""),""!==this.script&&(this.emitNode("onscript",this.script),this.script="")}end(){return this.sawRoot&&!this.closedRoot&&this.strictFail("Unclosed root tag"),this.state!==this.S.BEGIN&&this.state!==this.S.BEGIN_WHITESPACE&&this.state!==this.S.TEXT&&this.errorFunction("Unexpected end"),this.closeText(),this.c="",this.closed=!0,this.emit("onend"),new b(this.opt)}errorFunction(t){this.closeText(),this.trackPosition&&(t+="\nLine: ".concat(this.line,"\nColumn: ").concat(this.column,"\nChar: ").concat(this.c));const e=new Error(t);return this.error=e,this.emit("onerror",e),this}attrib(){if(this.strict||(this.attribName=this.attribName[this.looseCase]()),-1!==this.attribList.indexOf(this.attribName)||this.tag.attributes.hasOwnProperty(this.attribName))this.attribName=this.attribValue="";else{if(this.opt.xmlns){const t=_.qname(this.attribName,!0),e=t.prefix,n=t.local;if("xmlns"===e)if("xml"===n&&this.attribValue!==this.XML_NAMESPACE)this.strictFail("xml: prefix must be bound to ".concat(this.XML_NAMESPACE,"\n")+"Actual: ".concat(this.attribValue));else if("xmlns"===n&&this.attribValue!==this.XMLNS_NAMESPACE)this.strictFail("xmlns: prefix must be bound to ".concat(this.XMLNS_NAMESPACE,"\n")+"Actual: ".concat(this.attribValue));else{const t=this.tag,e=this.tags[this.tags.length-1]||this;t.ns===e.ns&&(t.ns=Object.create(e.ns)),t.ns[n]=this.attribValue}this.attribList.push([this.attribName,this.attribValue])}else this.tag.attributes[this.attribName]=this.attribValue,this.emitNode("onattribute",{name:this.attribName,value:this.attribValue});this.attribName=this.attribValue=""}}newTag(){this.strict||(this.tagName=this.tagName[this.looseCase]());const t=this.tags[this.tags.length-1]||this,e=this.tag={name:this.tagName,attributes:{}};this.opt.xmlns&&(e.ns=t.ns),this.attribList.length=0,this.emitNode("onopentagstart",e)}parseEntity(){let t=this.entity;const e=t.toLowerCase();let n=NaN,r="";return this.ENTITIES[t]?this.ENTITIES[t]:this.ENTITIES[e]?this.ENTITIES[e]:(t=e,"#"===t.charAt(0)&&("x"===t.charAt(1)?(t=t.slice(2),n=parseInt(t,16),r=n.toString(16)):(t=t.slice(1),n=parseInt(t,10),r=n.toString(10))),t=t.replace(/^0+/,""),isNaN(n)||r.toLowerCase()!==t?(this.strictFail("Invalid character entity"),"&".concat(this.entity,";")):String.fromCodePoint(n))}beginWhiteSpace(t){"<"===t?(this.state=this.S.OPEN_WAKA,this.startTagPosition=this.position):_.isWhitespace(t)||(this.strictFail("Non-whitespace before first tag."),this.textNode=t,this.state=this.S.TEXT)}strictFail(t){if("object"!=typeof this||!(this instanceof b))throw new Error("bad call to strictFail");this.strict&&this.errorFunction(t)}textApplyOptions(t){return this.opt.trim&&(t=t.trim()),this.opt.normalize&&(t=t.replace(/\s+/g," ")),t}emitNode(t,e){this.textNode&&this.closeText(),this.emit(t,e)}closeText(){this.textNode=this.textApplyOptions(this.textNode),void 0!==this.textNode&&""!==this.textNode&&"undefined"!==this.textNode&&this.emit("ontext",this.textNode),this.textNode=""}checkBufferLength(){const t=Math.max(this.opt.MAX_BUFFER_LENGTH,10);let e=0;for(let r=0,i=this.BUFFERS.length;r<i;r++){var n;const i=(null===(n=this[this.BUFFERS[r]])||void 0===n?void 0:n.length)||0;if(i>t)switch(this.BUFFERS[r]){case"textNode":this.closeText();break;case"cdata":this.emitNode("oncdata",this.cdata),this.cdata="";break;case"script":this.emitNode("onscript",this.script),this.script="";break;default:this.errorFunction("Max buffer length exceeded: ".concat(this.BUFFERS[r]))}e=Math.max(e,i)}const r=this.opt.MAX_BUFFER_LENGTH-e;this.bufferCheckPosition=r+this.position}openTag(t){if(this.opt.xmlns){const t=this.tag,e=_.qname(this.tagName);t.prefix=e.prefix,t.local=e.local,t.uri=t.ns[e.prefix]||"",t.prefix&&!t.uri&&(this.strictFail("Unbound namespace prefix: ".concat(JSON.stringify(this.tagName))),t.uri=e.prefix);const n=this.tags[this.tags.length-1]||this;if(t.ns&&n.ns!==t.ns){const e=this;Object.keys(t.ns).forEach(n=>{e.emitNode("onopennamespace",{prefix:n,uri:t.ns[n]})})}for(let e=0,n=this.attribList.length;e<n;e++){const n=this.attribList[e],r=n[0],i=n[1],s=_.qname(r,!0),o=s.prefix,a=s.local,c=""===o?"":t.ns[o]||"",u={name:r,value:i,prefix:o,local:a,uri:c};o&&"xmlns"!==o&&!c&&(this.strictFail("Unbound namespace prefix: ".concat(JSON.stringify(o))),u.uri=o),this.tag.attributes[r]=u,this.emitNode("onattribute",u)}this.attribList.length=0}this.tag.isSelfClosing=Boolean(t),this.sawRoot=!0,this.tags.push(this.tag),this.emitNode("onopentag",this.tag),t||(this.noscript||"script"!==this.tagName.toLowerCase()?this.state=this.S.TEXT:this.state=this.S.SCRIPT,this.tag=null,this.tagName=""),this.attribName=this.attribValue="",this.attribList.length=0}closeTag(){if(!this.tagName)return this.strictFail("Weird empty close tag."),this.textNode+="</>",void(this.state=this.S.TEXT);if(this.script){if("script"!==this.tagName)return this.script+="</".concat(this.tagName,">"),this.tagName="",void(this.state=this.S.SCRIPT);this.emitNode("onscript",this.script),this.script=""}let t=this.tags.length,e=this.tagName;for(this.strict||(e=e[this.looseCase]());t--;){if(this.tags[t].name===e)break;this.strictFail("Unexpected close tag")}if(t<0)return this.strictFail("Unmatched closing tag: ".concat(this.tagName)),this.textNode+="</".concat(this.tagName,">"),void(this.state=this.S.TEXT);this.tagName=e;let n=this.tags.length;for(;n-- >t;){const t=this.tag=this.tags.pop();this.tagName=this.tag.name,this.emitNode("onclosetag",this.tagName);const e={};for(const n in t.ns)t.ns.hasOwnProperty(n)&&(e[n]=t.ns[n]);const n=this.tags[this.tags.length-1]||this;if(this.opt.xmlns&&t.ns!==n.ns){const e=this;Object.keys(t.ns).forEach(n=>{const r=t.ns[n];e.emitNode("onclosenamespace",{prefix:n,uri:r})})}}0===t&&(this.closedRoot=!0),this.tagName=this.attribValue=this.attribName="",this.attribList.length=0,this.state=this.S.TEXT}}class b extends _{constructor(t){super(),Object(r.a)(this,"opt",u),Object(r.a)(this,"events",c),this.clearBuffers(),this.opt=t={...this.opt,...t},this.events={...this.events,...t},this.q=this.c="",this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.bufferCheckPosition=this.opt.MAX_BUFFER_LENGTH,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=Boolean(this.opt.strict),this.noscript=Boolean(this.opt.strict||this.opt.noscript),this.state=this.S.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(this.XML_ENTITIES):Object.create(this.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(this.rootNS)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),this.emit("onready")}resume(){return this.error=null,this}close(){return this.write(null)}flush(){this.flushBuffers()}}Object(r.a)(b,"ENTITIES",p);var A=n(1422);const E={name:"XML",id:"xml",module:"xml",version:"3.4.14",worker:!1,extensions:["xml"],mimeTypes:["application/xml","text/xml"],testText:function(t){return t.startsWith("<?xml")},options:{xml:{parser:"fast-xml-parser",uncapitalizeKeys:!1,removeNSPrefix:!1,textNodeName:"value",arrayPaths:[]}},parse:async(t,e)=>y((new TextDecoder).decode(t),e),parseTextSync:(t,e)=>y(t,e)};function y(t,e){var n;const r={...E.options.xml,...null==e?void 0:e.xml};switch(r.parser){case"fast-xml-parser":const i=function(t,e){return new A.XMLParser({ignoreAttributes:!1,attributeNamePrefix:"",...e}).parse(t)}(t,{allowBooleanAttributes:!0,ignoreDeclaration:!0,removeNSPrefix:r.removeNSPrefix,textNodeName:r.textNodeName,isArray:(t,e,n,i)=>{var s;return Boolean(null==r||null===(s=r.arrayPaths)||void 0===s?void 0:s.some(t=>e===t))},...null==e?void 0:e._fastXML});return r.uncapitalizeKeys?function t(e){if(Array.isArray(e))return e.map(e=>t(e));if(e&&"object"==typeof e){const r={};for(const[i,s]of Object.entries(e))r[(n=i,"string"==typeof n?n.charAt(0).toLowerCase()+n.slice(1):n)]=t(s);return r}var n;return e}(i):i;default:throw new Error(null==e||null===(n=e.xml)||void 0===n?void 0:n.parser)}}function v(t){return Array.isArray(t)?t:t?[t]:[]}function T(t){const e=v(t);return e.length>0&&e.every(t=>"string"==typeof t)?e:[]}function B(t){switch(typeof t){case"number":return t;case"string":return parseFloat(t);default:return}}function C(t){switch(typeof t){case"number":return t;case"string":return parseInt(t,10);default:return}}function O(t){switch(t){case"true":return!0;case"false":return!1;case"1":return!0;case"0":default:return!1}}function S(t,e){const n=E.parseTextSync(t,e),r=n.WMT_MS_Capabilities||n.WMS_Capabilities||n,i=function(t){var e,n,r,i,s,o,a,c,u,l,h,f,d,g,m,p;const _={version:String(t.version||""),name:String((null===(e=t.Service)||void 0===e?void 0:e.Name)||"unnamed"),title:null!==(n=t.Service)&&void 0!==n&&n.Title?String(null===(r=t.Service)||void 0===r?void 0:r.Title):void 0,abstract:null!==(i=t.Service)&&void 0!==i&&i.Abstract?String(null===(s=t.Service)||void 0===s?void 0:s.Abstract):void 0,keywords:T(null===(o=t.Service)||void 0===o||null===(a=o.KeywordList)||void 0===a?void 0:a.Keyword),fees:null!==(c=t.Service)&&void 0!==c&&c.Fees?JSON.stringify(null===(u=t.Service)||void 0===u?void 0:u.Fees):void 0,accessConstraints:null!==(l=t.Service)&&void 0!==l&&l.AccessConstraints?JSON.stringify(null===(h=t.Service)||void 0===h?void 0:h.AccessConstraints):void 0,layerLimit:C(null===(f=t.Service)||void 0===f?void 0:f.LayerLimit),maxWidth:C(null===(d=t.Service)||void 0===d?void 0:d.maxWidth),maxHeight:C(null===(g=t.Service)||void 0===g?void 0:g.maxHeight),layers:[],requests:w(null===(m=t.Capability)||void 0===m?void 0:m.Request),exceptions:I(t.Exception)},b=v(null===(p=t.Capability)||void 0===p?void 0:p.Layer);for(const t of b)_.layers.push(R(t));for(const[t,e]of Object.entries(_))void 0===e&&delete _[t];return _}(r);if(null!=e&&e.inheritedLayerProps)for(const t of i.layers)x(t,null);return(null!=e&&e.includeRawData||null!=e&&e.raw)&&(i.raw=r),null!=e&&e.includeXMLText&&(i.xml=t),i}function w(t){const e={};for(const[n,r]of Object.entries(t||{})){const t=T(null==r?void 0:r.Format);e[n]={mimeTypes:t}}return e}function I(t){if(v(null==t?void 0:t.Format).length>0)return{mimeTypes:T(t)}}function R(t){var e;const n={title:String((null==t?void 0:t.Title)||""),name:(null==t?void 0:t.Name)&&String(null==t?void 0:t.Name),abstract:(null==t?void 0:t.Name)&&String(null==t?void 0:t.Abstract),keywords:T(null===(e=t.KeywordList)||void 0===e?void 0:e.Keyword)},r=(null==t?void 0:t.CRS)||(null==t?void 0:t.SRS);r&&Array.isArray(r)&&r.every(t=>"string"==typeof t)&&(n.crs=r);let i=(null==t?void 0:t.EX_GeographicBoundingBox)&&function(t){const{westBoundLongitude:e,northBoundLatitude:n,eastBoundLongitude:r,southBoundLatitude:i}=t;return[[e,i],[r,n]]}(null==t?void 0:t.EX_GeographicBoundingBox);i&&(n.geographicBoundingBox=i),i=(null==t?void 0:t.LatLonBoundingBox)&&function(t){const{minx:e,miny:n,maxx:r,maxy:i}=t;return[[e,n],[r,i]]}(null==t?void 0:t.LatLonBoundingBox),i&&(n.geographicBoundingBox=i);const s=(null==t?void 0:t.BoundingBox)&&v(null==t?void 0:t.BoundingBox).map(t=>function(t){const{CRS:e,SRS:n,minx:r,miny:i,maxx:s,maxy:o,resx:a,resy:c}=t,u={crs:e||n,boundingBox:[[B(r),B(i)],[B(s),B(o)]]};return a&&(u.xResolution=a),c&&(u.yResolution=c),u}(t));s&&s.length>0&&(n.boundingBoxes=s);const o=v(null==t?void 0:t.Dimension).map(t=>function(t){const{name:e,units:n,value:r}=t,i={name:e,units:n,extent:r};t.unitSymbol&&(i.unitSymbol=t.unitSymbol);t.default&&(i.defaultValue=t.default);t.multipleValues&&(i.multipleValues=O(t.multipleValues));t.nearestValue&&(i.nearestValue=O(t.nearestValue));t.current&&(i.current=O(t.current));return i}(t));o.length&&(n.dimensions=o),null!=t&&t.opaque&&(n.opaque=O(null==t?void 0:t.opaque)),null!=t&&t.cascaded&&(n.cascaded=O(null==t?void 0:t.cascaded)),null!=t&&t.queryable&&(n.queryable=O(null==t?void 0:t.queryable));const a=v(null==t?void 0:t.Layer),c=[];for(const t of a)c.push(R(t));c.length>0&&(n.layers=c);for(const[t,e]of Object.entries(n))void 0===e&&delete n[t];return n}function x(t,e){null!=e&&e.geographicBoundingBox&&!t.geographicBoundingBox&&(t.geographicBoundingBox=[...e.geographicBoundingBox]),null!=e&&e.crs&&!t.crs&&(t.crs=[...e.crs]),null!=e&&e.boundingBoxes&&!t.boundingBoxes&&(t.boundingBoxes=[...e.boundingBoxes]),null!=e&&e.dimensions&&!t.dimensions&&(t.dimensions=[...e.dimensions]);for(const e of t.layers||[])x(e,t)}const M={id:"wms-capabilities",name:"WMS Capabilities",module:"wms",version:"3.4.14",worker:!1,extensions:["xml"],mimeTypes:["application/vnd.ogc.wms_xml","application/xml","text/xml"],testText:function(t){return t.startsWith("<?xml")},options:{wms:{}},parse:async(t,e)=>S((new TextDecoder).decode(t),null==e?void 0:e.wms),parseTextSync:(t,e)=>S(t,null==e?void 0:e.wms)};function N(t,e){var n;const r=(null===(n=E.parseTextSync(t,e).FeatureInfoResponse)||void 0===n?void 0:n.FIELDS)||[];return{features:(Array.isArray(r)?r:[r]).map(t=>function(t){return{attributes:t||{},type:"",bounds:{bottom:0,top:0,left:0,right:0}}}(t))}}const F={...M,id:"wms-feature-info",name:"WMS FeatureInfo",parse:async(t,e)=>N((new TextDecoder).decode(t),e),parseTextSync:(t,e)=>N(t,e)};function L(t,e){var n;return null===(n=E.parseTextSync)||void 0===n?void 0:n.call(E,t,e)}const D={...M,id:"wms-layer-description",name:"WMS DescribeLayer",parse:async(t,e)=>L((new TextDecoder).decode(t),e),parseTextSync:(t,e)=>L(t,e)};const P={id:"wms-error",name:"WMS Error",module:"wms",version:"3.4.14",worker:!1,extensions:["xml"],mimeTypes:["application/vnd.ogc.se_xml","application/xml","text/xml"],testText:function(t){return t.startsWith("<?xml")},options:{wms:{throwOnError:!1}},parse:async(t,e)=>U((new TextDecoder).decode(t),e),parseSync:(t,e)=>U((new TextDecoder).decode(t),e),parseTextSync:(t,e)=>U(t,e)};function U(t,e){const n={...P.options.wms,...null==e?void 0:e.wms},r=function(t,e){var n,r,i;const s=null===(n=E.parseTextSync)||void 0===n?void 0:n.call(E,t,e),o=(null==s||null===(r=s.ServiceExceptionReport)||void 0===r?void 0:r.ServiceException)||(null==s||null===(i=s["ogc:ServiceExceptionReport"])||void 0===i?void 0:i["ogc:ServiceException"]);return"string"==typeof o?o:o.value||o.code||"Unknown error"}(t,n),i=n.minimalErrors?r:"WMS Service error: ".concat(r);if(n.throwOnError)throw new Error(i);return i}class G extends s.a{constructor(t){var e;super(t),Object(r.a)(this,"url",void 0),Object(r.a)(this,"substituteCRS84",void 0),Object(r.a)(this,"flipCRS",void 0),Object(r.a)(this,"wmsParameters",void 0),Object(r.a)(this,"vendorParameters",void 0),Object(r.a)(this,"capabilities",null),this.url=t.url,this.substituteCRS84=null!==(e=t.substituteCRS84)&&void 0!==e&&e,this.flipCRS=["EPSG:4326"],this.wmsParameters={layers:void 0,query_layers:void 0,styles:void 0,version:"1.3.0",crs:"EPSG:4326",format:"image/png",info_format:"text/plain",transparent:void 0,time:void 0,elevation:void 0,...t.wmsParameters},this.vendorParameters=t.vendorParameters||{}}async getMetadata(){const t=await this.getCapabilities();return this.normalizeMetadata(t)}async getImage(t){return await this.getMap(t)}normalizeMetadata(t){return t}async getCapabilities(t,e){const n=this.getCapabilitiesURL(t,e),r=await this.fetch(n),i=await r.arrayBuffer();this._checkResponse(r,i);const s=await M.parse(i,this.loadOptions);return this.capabilities=s,s}async getMap(t,e){const n=this.getMapURL(t,e),r=await this.fetch(n),s=await r.arrayBuffer();this._checkResponse(r,s);try{return await i.a.parse(s,this.loadOptions)}catch{throw this._parseError(s)}}async getFeatureInfo(t,e){const n=this.getFeatureInfoURL(t,e),r=await this.fetch(n),i=await r.arrayBuffer();return this._checkResponse(r,i),await F.parse(i,this.loadOptions)}async getFeatureInfoText(t,e){const n=this.getFeatureInfoURL(t,e),r=await this.fetch(n),i=await r.arrayBuffer();return this._checkResponse(r,i),(new TextDecoder).decode(i)}async describeLayer(t,e){const n=this.describeLayerURL(t,e),r=await this.fetch(n),i=await r.arrayBuffer();return this._checkResponse(r,i),await D.parse(i,this.loadOptions)}async getLegendGraphic(t,e){const n=this.getLegendGraphicURL(t,e),r=await this.fetch(n),s=await r.arrayBuffer();this._checkResponse(r,s);try{return await i.a.parse(s,this.loadOptions)}catch{throw this._parseError(s)}}getCapabilitiesURL(t,e){const n={version:this.wmsParameters.version,...t};return this._getWMSUrl("GetCapabilities",n,e)}getMapURL(t,e){t=this._getWMS130Parameters(t);const n={version:this.wmsParameters.version,format:this.wmsParameters.format,transparent:this.wmsParameters.transparent,time:this.wmsParameters.time,elevation:this.wmsParameters.elevation,layers:this.wmsParameters.layers,styles:this.wmsParameters.styles,crs:this.wmsParameters.crs,...t};return this._getWMSUrl("GetMap",n,e)}getFeatureInfoURL(t,e){const n={version:this.wmsParameters.version,info_format:this.wmsParameters.info_format,layers:this.wmsParameters.layers,query_layers:this.wmsParameters.query_layers,styles:this.wmsParameters.styles,crs:this.wmsParameters.crs,...t};return this._getWMSUrl("GetFeatureInfo",n,e)}describeLayerURL(t,e){const n={version:this.wmsParameters.version,...t};return this._getWMSUrl("DescribeLayer",n,e)}getLegendGraphicURL(t,e){const n={version:this.wmsParameters.version,...t};return this._getWMSUrl("GetLegendGraphic",n,e)}_parseWMSUrl(t){const[e,n]=t.split("?"),r=n.split("&"),i={};for(const t of r){const[e,n]=t.split("=");i[e]=n}return{url:e,parameters:i}}_getWMSUrl(t,e,n){let r=this.url,i=!0;const s={service:"WMS",version:e.version,request:t,...e,...this.vendorParameters,...n},o=["transparent","time","elevation"];for(const[t,n]of Object.entries(s))o.includes(t)&&!n||(r+=i?"?":"&",i=!1,r+=this._getURLParameter(t,n,e));return encodeURI(r)}_getWMS130Parameters(t){const e={...t};return e.srs&&(e.crs=e.crs||e.srs,delete e.srs),e}_getURLParameter(t,e,n){switch(t){case"crs":"1.3.0"!==n.version?t="srs":this.substituteCRS84&&"EPSG:4326"===e&&(e="CRS:84");break;case"srs":"1.3.0"===n.version&&(t="crs");break;case"bbox":const r=this._flipBoundingBox(e,n);r&&(e=r)}return t=t.toUpperCase(),Array.isArray(e)?"".concat(t,"=").concat(e.join(",")):"".concat(t,"=").concat(e?String(e):"")}_flipBoundingBox(t,e){if(!Array.isArray(t)||4!==t.length)return null;const n=t;return"1.3.0"===e.version&&this.flipCRS.includes(e.crs||"")&&!(this.substituteCRS84&&"EPSG:4326"===e.crs)?[n[1],n[0],n[3],n[2]]:n}async _fetchArrayBuffer(t){const e=await this.fetch(t),n=await e.arrayBuffer();return this._checkResponse(e,n),n}_checkResponse(t,e){const n=t.headers["content-type"];if(!t.ok||P.mimeTypes.includes(n)){const t=Object(a.a)(this.loadOptions,{wms:{throwOnError:!0}}),n=P.parseSync(e,t);throw new Error(n)}}_parseError(t){const e=P.parseSync(t,this.loadOptions);return new Error(e)}}Object(r.a)(G,"type","wms"),Object(r.a)(G,"testURL",t=>t.toLowerCase().includes("wms"));class j extends s.a{constructor(t){super(t)}async getMetadata(){return await this.metadata()}async getImage(t){throw new Error("not implemented")}async metadata(){throw new Error("not implemented")}exportImage(t){throw new Error("not implemented")}metadataURL(t){return"".concat(this.props.url,"?f=pjson")}exportImageURL(t){const e="bbox=".concat(t.bbox[0],",").concat(t.bbox[1],",").concat(t.bbox[2],",").concat(t.bbox[3]),n="size=".concat(t.width,",").concat(t.height),r={...t,bbox:e,size:n};return delete r.width,delete r.height,this.getUrl("exportImage",r)}getUrl(t,e,n){let r="".concat(this.props.url,"/").concat(t),i=!0;for(const[t,n]of Object.entries(e))r+=i?"?":"&",i=!1,Array.isArray(n)?r+="".concat(t.toUpperCase(),"=").concat(n.join(",")):r+="".concat(t.toUpperCase(),"=").concat(n?String(n):"");return r}async checkResponse(t){if(!t.ok)throw new Error("error")}}Object(r.a)(j,"type","arcgis-image-server"),Object(r.a)(j,"testURL",t=>t.toLowerCase().includes("ImageServer"));const H=[G,j,o];function k(t){const{type:e="auto"}=t;switch("auto"===e?function(t){for(const e of H)if(e.testURL&&e.testURL(t))return e.type;return"wms"}(t.url):e){case"template":return new o(t);case"wms":return new G(t);default:throw new Error("Not a valid image source type")}}},2189:function(t,e,n){"use strict";function r(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";return t instanceof Date?"date-millisecond":t instanceof Number?e:"string"==typeof t?"utf8":"null"}function i(t){let e=function(t){switch(t.constructor){case Int8Array:return"int8";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int16Array:return"int16";case Uint16Array:return"uint16";case Int32Array:return"int32";case Uint32Array:return"uint32";case Float32Array:return"float32";case Float64Array:return"float64";default:return"null"}}(t);return"null"!==e?{type:e,nullable:!1}:t.length>0?(e=r(t[0]),{type:e,nullable:!0}):{type:"null",nullable:!0}}function s(t){const e=[];for(const[n,r]of Object.entries(t)){const t=a(r,n);e.push(t)}return{fields:e,metadata:{}}}function o(t){if(!t.length)throw new Error("deduce from empty table");const e=[],n=t[0];for(const[t,r]of Object.entries(n))e.push(c(r,t));return{fields:e,metadata:{}}}function a(t,e){if(ArrayBuffer.isView(t)){const n=i(t);return{name:e,type:n.type||"null",nullable:n.nullable}}if(Array.isArray(t)&&t.length>0){return{name:e,type:r(t[0]),nullable:!0}}throw new Error("empty table")}function c(t,e){return{name:e,type:r(t),nullable:!0}}function u(t){let e;switch(function(t){if(Array.isArray(t)){if(0===t.length)throw new Error("cannot deduce type of empty table");const e=t[0];if(Array.isArray(e))return"array-row-table";if(e&&"object"==typeof e)return"object-row-table"}if(t&&"object"==typeof t)return"columnar-table";throw new Error("invalid table")}(t)){case"array-row-table":e={shape:"array-row-table",data:t};break;case"object-row-table":e={shape:"object-row-table",data:t};break;case"columnar-table":e={shape:"columnar-table",data:t};break;default:throw new Error("table")}const n=function(t){switch(t.shape){case"array-row-table":case"object-row-table":return o(t.data);case"columnar-table":return s(t.data);case"arrow-table":default:throw new Error("Deduce schema")}}(e);return{...e,schema:n}}function l(t,e){try{var n;const r=JSON.parse(t);if(null!==(n=e.json)&&void 0!==n&&n.table){return u(function t(e){if(Array.isArray(e))return e;if(e&&"object"==typeof e)for(const n of Object.values(e)){const e=t(n);if(e)return e}return null}(r)||r)}return r}catch(t){throw new Error("JSONLoader: failed to parse JSON")}}n.d(e,"a",(function(){return $}));class h{constructor(t,e){if(this.schema=void 0,this.options=void 0,this.shape=void 0,this.length=0,this.rows=null,this.cursor=0,this._headers=[],this.options=e,this.schema=t,!Array.isArray(t)){this._headers=[];for(const e in t)this._headers[t[e].index]=t[e].name}}rowCount(){return this.length}addArrayRow(t,e){Number.isFinite(e)&&(this.cursor=e),this.shape="array-row-table",this.rows=this.rows||new Array(100),this.rows[this.length]=t,this.length++}addObjectRow(t,e){Number.isFinite(e)&&(this.cursor=e),this.shape="object-row-table",this.rows=this.rows||new Array(100),this.rows[this.length]=t,this.length++}getBatch(){let t=this.rows;if(!t)return null;t=t.slice(0,this.length),this.rows=null;return{shape:this.shape||"array-row-table",batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}}}class f{constructor(t,e){if(this.schema=void 0,this.options=void 0,this.length=0,this.objectRows=null,this.arrayRows=null,this.cursor=0,this._headers=null,this.options=e,this.schema=t,t){this._headers=[];for(const e in t)this._headers[t[e].index]=t[e].name}}rowCount(){return this.length}addArrayRow(t,e){switch(Number.isFinite(e)&&(this.cursor=e),this._headers||(this._headers=function(t){const e=[];for(let n=0;n<t.length;n++){const t="column-"+n;e.push(t)}return e}(t)),this.options.shape){case"object-row-table":const n=function(t,e){if(!t)throw new Error("null row");const n={};if(e)for(let r=0;r<e.length;r++)n[e[r]]=t[r];else for(let e=0;e<t.length;e++){n["column-"+e]=t[e]}return n}(t,this._headers);this.addObjectRow(n,e);break;case"array-row-table":this.arrayRows=this.arrayRows||new Array(100),this.arrayRows[this.length]=t,this.length++}}addObjectRow(t,e){switch(Number.isFinite(e)&&(this.cursor=e),this._headers||(this._headers=function(t){return Object.keys(t)}(t)),this.options.shape){case"array-row-table":const n=function(t,e){if(!t)throw new Error("null row");if(e){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=t[e[r]];return n}return Object.values(t)}(t,this._headers);this.addArrayRow(n,e);break;case"object-row-table":this.objectRows=this.objectRows||new Array(100),this.objectRows[this.length]=t,this.length++}}getBatch(){let t=this.arrayRows||this.objectRows;return t?(t=t.slice(0,this.length),this.arrayRows=null,this.objectRows=null,{shape:this.options.shape,batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}}class d{constructor(t,e){this.schema=void 0,this.length=0,this.allocated=0,this.columns={},this.schema=t,this._reallocateColumns()}rowCount(){return this.length}addArrayRow(t){this._reallocateColumns();let e=0;for(const n in this.columns)this.columns[n][this.length]=t[e++];this.length++}addObjectRow(t){this._reallocateColumns();for(const e in t)this.columns[e][this.length]=t[e];this.length++}getBatch(){this._pruneColumns();const t=Array.isArray(this.schema)?this.columns:{};if(!Array.isArray(this.schema))for(const e in this.schema){const n=this.schema[e];t[n.name]=this.columns[n.index]}this.columns={};return{shape:"columnar-table",batchType:"data",data:t,schema:this.schema,length:this.length}}_reallocateColumns(){if(!(this.length<this.allocated)){this.allocated=this.allocated>0?this.allocated*=2:100,this.columns={};for(const t in this.schema){const e=this.schema[t],n=e.type||Float32Array,r=this.columns[e.index];if(r&&ArrayBuffer.isView(r)){const t=new n(this.allocated);t.set(r),this.columns[e.index]=t}else r?(r.length=this.allocated,this.columns[e.index]=r):this.columns[e.index]=new n(this.allocated)}}}_pruneColumns(){for(const[t,e]of Object.entries(this.columns))this.columns[t]=e.slice(0,this.length)}}const g={shape:void 0,batchSize:"auto",batchDebounceMs:0,limit:0,_limitMB:0};class m{constructor(t,e){this.schema=void 0,this.options=void 0,this.aggregator=null,this.batchCount=0,this.bytesUsed=0,this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),this.totalLength=0,this.totalBytes=0,this.rowBytes=0,this.schema=t,this.options={...g,...e}}limitReached(){var t,e;return!!(Boolean(null===(t=this.options)||void 0===t?void 0:t.limit)&&this.totalLength>=this.options.limit)||!!(Boolean(null===(e=this.options)||void 0===e?void 0:e._limitMB)&&this.totalBytes/1e6>=this.options._limitMB)}addRow(t){this.limitReached()||(this.totalLength++,this.rowBytes=this.rowBytes||this._estimateRowMB(t),this.totalBytes+=this.rowBytes,Array.isArray(t)?this.addArrayRow(t):this.addObjectRow(t))}addArrayRow(t){if(!this.aggregator){const t=this._getTableBatchType();this.aggregator=new t(this.schema,this.options)}this.aggregator.addArrayRow(t)}addObjectRow(t){if(!this.aggregator){const t=this._getTableBatchType();this.aggregator=new t(this.schema,this.options)}this.aggregator.addObjectRow(t)}chunkComplete(t){t instanceof ArrayBuffer&&(this.bytesUsed+=t.byteLength),"string"==typeof t&&(this.bytesUsed+=t.length),this.isChunkComplete=!0}getFullBatch(t){return this._isFull()?this._getBatch(t):null}getFinalBatch(t){return this._getBatch(t)}_estimateRowMB(t){return Array.isArray(t)?8*t.length:8*Object.keys(t).length}_isFull(){if(!this.aggregator||0===this.aggregator.rowCount())return!1;if("auto"===this.options.batchSize){if(!this.isChunkComplete)return!1}else if(this.options.batchSize>this.aggregator.rowCount())return!1;return!(this.options.batchDebounceMs>Date.now()-this.lastBatchEmittedMs)&&(this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),!0)}_getBatch(t){if(!this.aggregator)return null;null!=t&&t.bytesUsed&&(this.bytesUsed=t.bytesUsed);const e=this.aggregator.getBatch();return e.count=this.batchCount,e.bytesUsed=this.bytesUsed,Object.assign(e,t),this.batchCount++,this.aggregator=null,e}_getTableBatchType(){switch(this.options.shape){case"array-row-table":case"object-row-table":return f;case"columnar-table":return d;case"arrow-table":if(!m.ArrowBatch)throw new Error("TableBatchBuilder");return m.ArrowBatch;default:return h}}}m.ArrowBatch=void 0;var p=n(547);n(416);const _=Number.MAX_SAFE_INTEGER;var b=function(t){return t[t.BEGIN=0]="BEGIN",t[t.VALUE=1]="VALUE",t[t.OPEN_OBJECT=2]="OPEN_OBJECT",t[t.CLOSE_OBJECT=3]="CLOSE_OBJECT",t[t.OPEN_ARRAY=4]="OPEN_ARRAY",t[t.CLOSE_ARRAY=5]="CLOSE_ARRAY",t[t.TEXT_ESCAPE=6]="TEXT_ESCAPE",t[t.STRING=7]="STRING",t[t.BACKSLASH=8]="BACKSLASH",t[t.END=9]="END",t[t.OPEN_KEY=10]="OPEN_KEY",t[t.CLOSE_KEY=11]="CLOSE_KEY",t[t.TRUE=12]="TRUE",t[t.TRUE2=13]="TRUE2",t[t.TRUE3=14]="TRUE3",t[t.FALSE=15]="FALSE",t[t.FALSE2=16]="FALSE2",t[t.FALSE3=17]="FALSE3",t[t.FALSE4=18]="FALSE4",t[t.NULL=19]="NULL",t[t.NULL2=20]="NULL2",t[t.NULL3=21]="NULL3",t[t.NUMBER_DECIMAL_POINT=22]="NUMBER_DECIMAL_POINT",t[t.NUMBER_DIGIT=23]="NUMBER_DIGIT",t}(b||{});const A=9,E=10,y=13,v=32,T=34,B=43,C=44,O=45,S=46,w=48,I=57,R=58,x=69,M=91,N=92,F=93,L=97,D=98,P=101,U=102,G=108,j=110,H=114,k=115,V=116,z=117,X=123,J=125,W=/[\\"\n]/g,K={onready:()=>{},onopenobject:()=>{},onkey:()=>{},oncloseobject:()=>{},onopenarray:()=>{},onclosearray:()=>{},onvalue:()=>{},onerror:()=>{},onend:()=>{},onchunkparsed:()=>{}};class q{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=K,this.bufferCheckPosition=_,this.q="",this.c="",this.p="",this.closed=!1,this.closedRoot=!1,this.sawRoot=!1,this.error=null,this.state=b.BEGIN,this.stack=[],this.position=0,this.column=0,this.line=1,this.slashed=!1,this.unicodeI=0,this.unicodeS=null,this.depth=0,this.textNode=void 0,this.numberNode=void 0,this.options={...K,...t},this.textNode=void 0,this.numberNode="",this.emit("onready")}end(){return this.state===b.VALUE&&0===this.depth||this._error("Unexpected end"),this._closeValue(),this.c="",this.closed=!0,this.emit("onend"),this}resume(){return this.error=null,this}close(){return this.write(null)}emit(t,e){var n,r;null===(n=(r=this.options)[t])||void 0===n||n.call(r,e,this)}emitNode(t,e){this._closeValue(),this.emit(t,e)}write(t){if(this.error)throw this.error;if(this.closed)return this._error("Cannot write after close. Assign an onready handler.");if(null===t)return this.end();let e=0,n=t.charCodeAt(0),r=this.p;for(;n&&(r=n,this.c=n=t.charCodeAt(e++),r!==n?this.p=r:r=this.p,n);)switch(this.position++,n===E?(this.line++,this.column=0):this.column++,this.state){case b.BEGIN:n===X?this.state=b.OPEN_OBJECT:n===M?this.state=b.OPEN_ARRAY:Q(n)||this._error("Non-whitespace before {[.");continue;case b.OPEN_KEY:case b.OPEN_OBJECT:if(Q(n))continue;if(this.state===b.OPEN_KEY)this.stack.push(b.CLOSE_KEY);else{if(n===J){this.emit("onopenobject"),this.depth++,this.emit("oncloseobject"),this.depth--,this.state=this.stack.pop()||b.VALUE;continue}this.stack.push(b.CLOSE_OBJECT)}n===T?this.state=b.STRING:this._error('Malformed object key should start with "');continue;case b.CLOSE_KEY:case b.CLOSE_OBJECT:if(Q(n))continue;n===R?(this.state===b.CLOSE_OBJECT?(this.stack.push(b.CLOSE_OBJECT),this._closeValue("onopenobject"),this.depth++):this._closeValue("onkey"),this.state=b.VALUE):n===J?(this.emitNode("oncloseobject"),this.depth--,this.state=this.stack.pop()||b.VALUE):n===C?(this.state===b.CLOSE_OBJECT&&this.stack.push(b.CLOSE_OBJECT),this._closeValue(),this.state=b.OPEN_KEY):this._error("Bad object");continue;case b.OPEN_ARRAY:case b.VALUE:if(Q(n))continue;if(this.state===b.OPEN_ARRAY){if(this.emit("onopenarray"),this.depth++,this.state=b.VALUE,n===F){this.emit("onclosearray"),this.depth--,this.state=this.stack.pop()||b.VALUE;continue}this.stack.push(b.CLOSE_ARRAY)}n===T?this.state=b.STRING:n===X?this.state=b.OPEN_OBJECT:n===M?this.state=b.OPEN_ARRAY:n===V?this.state=b.TRUE:n===U?this.state=b.FALSE:n===j?this.state=b.NULL:n===O?this.numberNode+="-":w<=n&&n<=I?(this.numberNode+=String.fromCharCode(n),this.state=b.NUMBER_DIGIT):this._error("Bad value");continue;case b.CLOSE_ARRAY:if(n===C)this.stack.push(b.CLOSE_ARRAY),this._closeValue("onvalue"),this.state=b.VALUE;else if(n===F)this.emitNode("onclosearray"),this.depth--,this.state=this.stack.pop()||b.VALUE;else{if(Q(n))continue;this._error("Bad array")}continue;case b.STRING:void 0===this.textNode&&(this.textNode="");let i=e-1,s=this.slashed,o=this.unicodeI;t:for(;;){for(;o>0;)if(this.unicodeS+=String.fromCharCode(n),n=t.charCodeAt(e++),this.position++,4===o?(this.textNode+=String.fromCharCode(parseInt(this.unicodeS,16)),o=0,i=e-1):o++,!n)break t;if(n===T&&!s){this.state=this.stack.pop()||b.VALUE,this.textNode+=t.substring(i,e-1),this.position+=e-1-i;break}if(n===N&&!s&&(s=!0,this.textNode+=t.substring(i,e-1),this.position+=e-1-i,n=t.charCodeAt(e++),this.position++,!n))break;if(s){if(s=!1,n===j?this.textNode+="\n":n===H?this.textNode+="\r":n===V?this.textNode+="\t":n===U?this.textNode+="\f":n===D?this.textNode+="\b":n===z?(o=1,this.unicodeS=""):this.textNode+=String.fromCharCode(n),n=t.charCodeAt(e++),this.position++,i=e-1,n)continue;break}W.lastIndex=e;const r=W.exec(t);if(null===r){e=t.length+1,this.textNode+=t.substring(i,e-1),this.position+=e-1-i;break}if(e=r.index+1,n=t.charCodeAt(r.index),!n){this.textNode+=t.substring(i,e-1),this.position+=e-1-i;break}}this.slashed=s,this.unicodeI=o;continue;case b.TRUE:n===H?this.state=b.TRUE2:this._error("Invalid true started with t"+n);continue;case b.TRUE2:n===z?this.state=b.TRUE3:this._error("Invalid true started with tr"+n);continue;case b.TRUE3:n===P?(this.emit("onvalue",!0),this.state=this.stack.pop()||b.VALUE):this._error("Invalid true started with tru"+n);continue;case b.FALSE:n===L?this.state=b.FALSE2:this._error("Invalid false started with f"+n);continue;case b.FALSE2:n===G?this.state=b.FALSE3:this._error("Invalid false started with fa"+n);continue;case b.FALSE3:n===k?this.state=b.FALSE4:this._error("Invalid false started with fal"+n);continue;case b.FALSE4:n===P?(this.emit("onvalue",!1),this.state=this.stack.pop()||b.VALUE):this._error("Invalid false started with fals"+n);continue;case b.NULL:n===z?this.state=b.NULL2:this._error("Invalid null started with n"+n);continue;case b.NULL2:n===G?this.state=b.NULL3:this._error("Invalid null started with nu"+n);continue;case b.NULL3:n===G?(this.emit("onvalue",null),this.state=this.stack.pop()||b.VALUE):this._error("Invalid null started with nul"+n);continue;case b.NUMBER_DECIMAL_POINT:n===S?(this.numberNode+=".",this.state=b.NUMBER_DIGIT):this._error("Leading zero not followed by .");continue;case b.NUMBER_DIGIT:w<=n&&n<=I?this.numberNode+=String.fromCharCode(n):n===S?(-1!==this.numberNode.indexOf(".")&&this._error("Invalid number has two dots"),this.numberNode+="."):n===P||n===x?(-1===this.numberNode.indexOf("e")&&-1===this.numberNode.indexOf("E")||this._error("Invalid number has two exponential"),this.numberNode+="e"):n===B||n===O?(r!==P&&r!==x&&this._error("Invalid symbol in number"),this.numberNode+=String.fromCharCode(n)):(this._closeNumber(),e--,this.state=this.stack.pop()||b.VALUE);continue;default:this._error("Unknown state: "+this.state)}return this.position>=this.bufferCheckPosition&&function(t){const e=Math.max(_,10);let n=0;for(const r of["textNode","numberNode"]){const i=void 0===t[r]?0:t[r].length;if(i>e)switch(r){case"text":break;default:t._error("Max buffer length exceeded: "+r)}n=Math.max(n,i)}t.bufferCheckPosition=_-n+t.position}(this),this.emit("onchunkparsed"),this}_closeValue(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"onvalue";void 0!==this.textNode&&this.emit(t,this.textNode),this.textNode=void 0}_closeNumber(){this.numberNode&&this.emit("onvalue",parseFloat(this.numberNode)),this.numberNode=""}_error(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._closeValue(),t+=`\nLine: ${this.line}\nColumn: ${this.column}\nChar: ${this.c}`;const e=new Error(t);this.error=e,this.emit("onerror",e)}}function Q(t){return t===y||t===E||t===v||t===A}var Y=n(365);class Z extends class{constructor(t){this.parser=void 0,this.result=void 0,this.previousStates=[],this.currentState=Object.freeze({container:[],key:null}),this.jsonpath=new Y.a,this.reset(),this.parser=new q({onready:()=>{this.jsonpath=new Y.a,this.previousStates.length=0,this.currentState.container.length=0},onopenobject:t=>{this._openObject({}),void 0!==t&&this.parser.emit("onkey",t)},onkey:t=>{this.jsonpath.set(t),this.currentState.key=t},oncloseobject:()=>{this._closeObject()},onopenarray:()=>{this._openArray()},onclosearray:()=>{this._closeArray()},onvalue:t=>{this._pushOrSet(t)},onerror:t=>{throw t},onend:()=>{this.result=this.currentState.container.pop()},...t})}reset(){this.result=void 0,this.previousStates=[],this.currentState=Object.freeze({container:[],key:null}),this.jsonpath=new Y.a}write(t){this.parser.write(t)}close(){this.parser.close()}_pushOrSet(t){const{container:e,key:n}=this.currentState;null!==n?(e[n]=t,this.currentState.key=null):e.push(t)}_openArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.jsonpath.push(null),this._pushOrSet(t),this.previousStates.push(this.currentState),this.currentState={container:t,isArray:!0,key:null}}_closeArray(){this.jsonpath.pop(),this.currentState=this.previousStates.pop()}_openObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.jsonpath.push(null),this._pushOrSet(t),this.previousStates.push(this.currentState),this.currentState={container:t,isArray:!1,key:null}}_closeObject(){this.jsonpath.pop(),this.currentState=this.previousStates.pop()}}{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({onopenarray:()=>{if(!this.streamingArray&&this._matchJSONPath())return this.streamingJsonPath=this.getJsonPath().clone(),this.streamingArray=[],void this._openArray(this.streamingArray);this._openArray()},onopenobject:t=>{this.topLevelObject?this._openObject({}):(this.topLevelObject={},this._openObject(this.topLevelObject)),void 0!==t&&this.parser.emit("onkey",t)}}),this.jsonPaths=void 0,this.streamingJsonPath=null,this.streamingArray=null,this.topLevelObject=null;const e=t.jsonpaths||[];this.jsonPaths=e.map(t=>new Y.a(t))}write(t){super.write(t);let e=[];return this.streamingArray&&(e=[...this.streamingArray],this.streamingArray.length=0),e}getPartialResult(){return this.topLevelObject}getStreamingJsonPath(){return this.streamingJsonPath}getStreamingJsonPathAsString(){return this.streamingJsonPath&&this.streamingJsonPath.toString()}getJsonPath(){return this.jsonpath}_matchJSONPath(){const t=this.getJsonPath();if(0===this.jsonPaths.length)return!0;for(const e of this.jsonPaths)if(e.equals(t))return!0;return!1}}const $={name:"JSON",id:"json",module:"json",version:"4.1.0-alpha.4",extensions:["json","geojson"],mimeTypes:["application/json"],category:"table",text:!0,options:{json:{shape:void 0,table:!1,jsonpaths:[]}},parse:async function(t,e){return tt((new TextDecoder).decode(t),e)},parseTextSync:tt,parseInBatches:function(t,e){const n={...e,json:{...$.options.json,...null==e?void 0:e.json}};return async function*(t,e){const n=Object(p.a)(t),{metadata:r}=e,{jsonpaths:i}=e.json||{};let s=!0;const o=new m(null,e),a=new Z({jsonpaths:i});for await(const t of n){const n=a.write(t),i=n.length>0&&a.getStreamingJsonPathAsString();if(n.length>0&&s){if(r){var c;const t={shape:(null==e||null===(c=e.json)||void 0===c?void 0:c.shape)||"array-row-table",batchType:"partial-result",data:[],length:0,bytesUsed:0,container:a.getPartialResult(),jsonpath:i};yield t}s=!1}for(const t of n){o.addRow(t);const e=o.getFullBatch({jsonpath:i});e&&(yield e)}o.chunkComplete(t);const u=o.getFullBatch({jsonpath:i});u&&(yield u)}const u=a.getStreamingJsonPathAsString(),l=o.getFinalBatch({jsonpath:u});if(l&&(yield l),r){const t={shape:"json",batchType:"final-result",container:a.getPartialResult(),jsonpath:a.getStreamingJsonPathAsString(),data:[],length:0};yield t}}(t,n)}};function tt(t,e){return l(t,{...e,json:{...$.options.json,...null==e?void 0:e.json}})}},2192:function(t,e,n){"use strict";n.d(e,"a",(function(){return N}));var r=n(3);Math.PI,Math.PI;globalThis.mathgl=globalThis.mathgl||{config:{EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1}};globalThis.mathgl.config;const i={x:0,y:1,z:2};function s(t,e={}){const{start:n=0,end:r=t.length,plane:s="xy"}=e,o=e.size||2;let a=0;const c=i[s[0]],u=i[s[1]];for(let e=n,i=r-o;e<r;e+=o)a+=(t[e+c]-t[i+c])*(t[e+u]+t[i+u]),i=e;return a/2}function o(t,e,n=2,r,i="xy"){const s=e&&e.length,o=s?e[0]*n:t.length;let c=a(t,0,o,n,!0,r&&r[0],i);const l=[];if(!c||c.next===c.prev)return l;let h,f,d,p,_,A,E;if(s&&(c=function(t,e,n,r,i,s){const o=[];let c,u,l,h,f;for(c=0,u=e.length;c<u;c++)l=e[c]*r,h=c<u-1?e[c+1]*r:t.length,f=a(t,l,h,r,!1,i&&i[c+1],s),f===f.next&&(f.steiner=!0),o.push(b(f));for(o.sort(g),c=0;c<o.length;c++)n=m(o[c],n);return n}(t,e,c,n,r,i)),t.length>80*n){p=f=t[0],_=d=t[1];for(let e=n;e<o;e+=n)A=t[e],E=t[e+1],A<p&&(p=A),E<_&&(_=E),A>f&&(f=A),E>d&&(d=E);h=Math.max(f-p,d-_),h=0!==h?32767/h:0}return u(c,l,n,p,_,h,0),l}function a(t,e,n,r,o,a,c){let u,l;void 0===a&&(a=s(t,{start:e,end:n,size:r,plane:c}));let h=i[c[0]],f=i[c[1]];if(o===a<0)for(u=e;u<n;u+=r)l=w(u,t[u+h],t[u+f],l);else for(u=n-r;u>=e;u-=r)l=w(u,t[u+h],t[u+f],l);return l&&v(l,l.next)&&(I(l),l=l.next),l}function c(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!v(r,r.next)&&0!==y(r.prev,r,r.next))r=r.next;else{if(I(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function u(t,e,n,r,i,s,o){if(!t)return;!o&&s&&function(t,e,n,r){let i=t;do{0===i.z&&(i.z=_(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){let e,n,r,i,s,o,a,c,u=1;do{for(i=t,t=null,c=null,r=0;i;){for(r++,o=i,s=0,n=0;n<u&&(s++,o=o.nextZ,o);n++);for(a=u;s>0||a>0&&o;)0!==s&&(0===a||!o||i.z<=o.z)?(e=i,i=i.nextZ,s--):(e=o,o=o.nextZ,a--),c?c.nextZ=e:t=e,e.prevZ=c,c=e;i=o}c.nextZ=null,u*=2}while(r>1)}(i)}(t,r,i,s);let a,g,m=t;for(;t.prev!==t.next;)if(a=t.prev,g=t.next,s?h(t,r,i,s):l(t))e.push(a.i/n|0),e.push(t.i/n|0),e.push(g.i/n|0),I(t),t=g.next,m=g.next;else if((t=g)===m){o?1===o?u(t=f(c(t),e,n),e,n,r,i,s,2):2===o&&d(t,e,n,r,i,s):u(c(t),e,n,r,i,s,1);break}}function l(t){const e=t.prev,n=t,r=t.next;if(y(e,n,r)>=0)return!1;const i=e.x,s=n.x,o=r.x,a=e.y,c=n.y,u=r.y,l=i<s?i<o?i:o:s<o?s:o,h=a<c?a<u?a:u:c<u?c:u,f=i>s?i>o?i:o:s>o?s:o,d=a>c?a>u?a:u:c>u?c:u;let g=r.next;for(;g!==e;){if(g.x>=l&&g.x<=f&&g.y>=h&&g.y<=d&&A(i,a,s,c,o,u,g.x,g.y)&&y(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function h(t,e,n,r){const i=t.prev,s=t,o=t.next;if(y(i,s,o)>=0)return!1;const a=i.x,c=s.x,u=o.x,l=i.y,h=s.y,f=o.y,d=a<c?a<u?a:u:c<u?c:u,g=l<h?l<f?l:f:h<f?h:f,m=a>c?a>u?a:u:c>u?c:u,p=l>h?l>f?l:f:h>f?h:f,b=_(d,g,e,n,r),E=_(m,p,e,n,r);let v=t.prevZ,T=t.nextZ;for(;v&&v.z>=b&&T&&T.z<=E;){if(v.x>=d&&v.x<=m&&v.y>=g&&v.y<=p&&v!==i&&v!==o&&A(a,l,c,h,u,f,v.x,v.y)&&y(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,T.x>=d&&T.x<=m&&T.y>=g&&T.y<=p&&T!==i&&T!==o&&A(a,l,c,h,u,f,T.x,T.y)&&y(T.prev,T,T.next)>=0)return!1;T=T.nextZ}for(;v&&v.z>=b;){if(v.x>=d&&v.x<=m&&v.y>=g&&v.y<=p&&v!==i&&v!==o&&A(a,l,c,h,u,f,v.x,v.y)&&y(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;T&&T.z<=E;){if(T.x>=d&&T.x<=m&&T.y>=g&&T.y<=p&&T!==i&&T!==o&&A(a,l,c,h,u,f,T.x,T.y)&&y(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function f(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!v(i,s)&&T(i,r,r.next,s)&&O(i,s)&&O(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),I(r),I(r.next),r=t=s),r=r.next}while(r!==t);return c(r)}function d(t,e,n,r,i,s){let o=t;do{let t=o.next.next;for(;t!==o.prev;){if(o.i!==t.i&&E(o,t)){let a=S(o,t);return o=c(o,o.next),a=c(a,a.next),u(o,e,n,r,i,s,0),void u(a,e,n,r,i,s,0)}t=t.next}o=o.next}while(o!==t)}function g(t,e){return t.x-e.x}function m(t,e){const n=function(t,e){let n=e;const r=t.x,i=t.y;let s,o=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const t=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>o&&(o=t,s=n.x<n.next.x?n:n.next,t===r))return s}n=n.next}while(n!==e);if(!s)return null;const a=s,c=s.x,u=s.y;let l,h=1/0;n=s;do{r>=n.x&&n.x>=c&&r!==n.x&&A(i<u?r:o,i,c,u,i<u?o:r,i,n.x,n.y)&&(l=Math.abs(i-n.y)/(r-n.x),O(n,t)&&(l<h||l===h&&(n.x>s.x||n.x===s.x&&p(s,n)))&&(s=n,h=l)),n=n.next}while(n!==a);return s}(t,e);if(!n)return e;const r=S(n,t);return c(r,r.next),c(n,n.next)}function p(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function _(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function b(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function A(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function E(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&T(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(O(t,e)&&O(e,t)&&function(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||v(t,e)&&y(t.prev,t,t.next)>0&&y(e.prev,e,e.next)>0)}function y(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function v(t,e){return t.x===e.x&&t.y===e.y}function T(t,e,n,r){const i=C(y(t,e,n)),s=C(y(t,e,r)),o=C(y(n,r,t)),a=C(y(n,r,e));return i!==s&&o!==a||(!(0!==i||!B(t,n,e))||(!(0!==s||!B(t,r,e))||(!(0!==o||!B(n,t,r))||!(0!==a||!B(n,e,r)))))}function B(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function C(t){return t>0?1:t<0?-1:0}function O(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function S(t,e){const n=new R(t.i,t.x,t.y),r=new R(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function w(t,e,n,r){const i=new R(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function I(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}class R{constructor(t,e,n){Object(r.a)(this,"i",void 0),Object(r.a)(this,"x",void 0),Object(r.a)(this,"y",void 0),Object(r.a)(this,"prev",null),Object(r.a)(this,"next",null),Object(r.a)(this,"z",0),Object(r.a)(this,"prevZ",null),Object(r.a)(this,"nextZ",null),Object(r.a)(this,"steiner",!1),this.i=t,this.x=e,this.y=n}}var x=function(t){return t.points="points",t.lines="lines",t.polygons="polygons",t}(x||{});function M(){return{globalFeatureIds:{value:new Uint32Array(0),size:1},positions:{value:new Float32Array(0),size:2},properties:[],numericProps:{},featureIds:{value:new Uint32Array(0),size:1}}}function N(t,e,n){const r={polygon:"geoarrow.multipolygon"===e||"geoarrow.polygon"===e,point:"geoarrow.multipoint"===e||"geoarrow.point"===e,line:"geoarrow.multilinestring"===e||"geoarrow.linestring"===e},i=void 0!==(null==n?void 0:n.chunkIndex)&&(null==n?void 0:n.chunkIndex)>=0?[t.data[null==n?void 0:n.chunkIndex]]:t.data;let s=[1/0,1/0,-1/0,-1/0],a=(null==n?void 0:n.chunkOffset)||0;const c=[];return i.forEach(t=>{const{featureIds:i,flatCoordinateArray:u,nDim:l,geomOffset:h,triangles:f}=function(t,e,n){switch(e){case"geoarrow.point":case"geoarrow.multipoint":return function(t,e){const n="geoarrow.multipoint"===e,r=n?t.children[0]:t,i=r.children[0],s=r.stride,o=i.values,a=new Uint16Array(0),c=new Int32Array(0),u=o.length/s,l=new Uint32Array(u);if(n){const e=t.valueOffsets;for(let t=0;t<e.length-1;t++){const n=e[t],r=e[t+1];for(let e=n;e<r;e++)l[e]=t}}else for(let e=0;e<t.length;e++)l[e]=e;return{featureIds:l,flatCoordinateArray:o,nDim:s,geomOffset:c,geometryIndicies:a}}(t,e);case"geoarrow.linestring":case"geoarrow.multilinestring":return function(t,e){const n="geoarrow.multilinestring"===e,r=n?t.children[0]:t,i=r.children[0],s=i.children[0],o=i.stride,a=r.valueOffsets,c=s.values,u=new Uint16Array(0),l=c.length/o,h=new Uint32Array(l);if(n){const e=t.valueOffsets;for(let t=0;t<e.length-1;t++){const n=a[e[t]],r=a[e[t+1]];for(let e=n;e<r;e++)h[e]=t}}else for(let e=0;e<t.length;e++){const t=a[e],n=a[e+1];for(let r=t;r<n;r++)h[r]=e}return{featureIds:h,flatCoordinateArray:c,nDim:o,geomOffset:a,geometryIndicies:u}}(t,e);case"geoarrow.polygon":case"geoarrow.multipolygon":return function(t,e,n){const r="geoarrow.multipolygon"===e,i=r?t.children[0]:t,s=i.valueOffsets,a=r?t.valueOffsets.map(t=>s.at(t)||t):t.valueOffsets,c=i.children[0],u=c.children[0],l=u.children[0],h=u.stride,f=c.valueOffsets,d=l.values,g=new Uint16Array(s.length);for(let t=0;t<s.length;t++)g[t]=f[s[t]];const m=d.length/h,p=new Uint32Array(m);for(let t=0;t<a.length-1;t++){const e=f[a[t]],n=f[a[t+1]];for(let r=e;r<n;r++)p[r]=t}const _=null!=n&&n.triangulate?function(t,e,n,r){try{let i=0;const s=[];for(let a=0;a<t.length-1;a++){const c=t[a],u=t[a+1],l=n.subarray(c*r,u*r),h=[];for(;e[i]<u;)e[i]>c&&h.push(e[i]-c),i++;const f=o(l,h.length>0?h:void 0,r);if(0===f.length)throw Error("earcut failed e.g. invalid polygon");for(let t=0;t<f.length;t++)s.push(f[t]+c)}const a=new Uint32Array(s.length);for(let t=0;t<s.length;t++)a[t]=s[t];return a}catch(t){return null}}(g,f,d,h):null;return{featureIds:p,nDim:h,flatCoordinateArray:d,geomOffset:f,geometryIndicies:g,...null!=n&&n.triangulate&&_?{triangles:_}:{}}}(t,e,n);default:throw Error("invalid geoarrow encoding")}}(t,e,n),d=new Uint32Array(i.length);for(let t=0;t<i.length;t++)d[t]=i[t]+a;const g={globalFeatureIds:{value:d,size:1},positions:{value:u,size:l},featureIds:{value:i,size:1},properties:[...Array(t.length).keys()].map(t=>({index:t+a}))};a+=t.length,c.push({shape:"binary-feature-collection",points:{type:"Point",...M(),...r.point?g:{}},lines:{type:"LineString",...M(),...r.line?g:{},pathIndices:{value:r.line?h:new Uint16Array(0),size:1}},polygons:{type:"Polygon",...M(),...r.polygon?g:{},polygonIndices:{value:r.polygon?h:new Uint16Array(0),size:1},primitivePolygonIndices:{value:r.polygon?h:new Uint16Array(0),size:1},...f?{triangles:{value:f,size:1}}:{}}}),s=function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;const i=t.length/e,s=Math.max(Math.floor(i/r),1),o=[...n];for(let n=0;n<i;n+=s){const r=t[n*e],i=t[n*e+1];r<o[0]&&(o[0]=r),i<o[1]&&(o[1]=i),r>o[2]&&(o[2]=r),i>o[3]&&(o[3]=i)}return o}(u,l,s)}),{binaryGeometries:c,bounds:s,featureTypes:r,...null!=n&&n.calculateMeanCenters?{meanCenters:F(c)}:{}}}function F(t){const e=[];return t.forEach(t=>{let n=null;t.points&&t.points.positions.value.length>0?n=x.points:t.lines&&t.lines.positions.value.length>0?n=x.lines:t.polygons&&t.polygons.positions.value.length>0&&(n=x.polygons);const r=n?t[n]:null;if(r&&null!==n){var i;(function(t,e,n,r,i){const s=[],o=e.length;let a=0,c=0,u=0;for(;a<o;){const l=t[a/n],h=[0,0];let f=0;for(;a<o&&t[c]===l;)r===x.polygons&&(null==i?void 0:i[u])===c?(a+=n,u++):(h[0]+=e[a],h[1]+=e[a+1],a+=n,f++),c+=1;h[0]/=f,h[1]/=f,s.push(h)}return s})(r.featureIds.value,r.positions.value,r.positions.size,n,"Polygon"===r.type?null===(i=r.primitivePolygonIndices)||void 0===i?void 0:i.value:void 0).forEach(t=>{e.push(t)})}}),e}},2193:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var r=n(416),i=n(330);const{_parseImageNode:s}=globalThis,o="undefined"!=typeof Image,a="undefined"!=typeof ImageBitmap,c=Boolean(s),u=!!i.a||c;function l(t){const e=f(t);if(!e)throw new Error("Not an image");return e}function h(t){switch(l(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function f(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}const d=/^data:image\/svg\+xml/,g=/\.svg((\?|#).*)?$/;function m(t){return t&&(d.test(t)||g.test(t))}function p(t,e){if(m(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function _(t,e,n){const r=function(t,e){if(m(e)){let e=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(e=unescape(encodeURIComponent(e)))}catch(t){throw new Error(t.message)}return"data:image/svg+xml;base64,".concat(btoa(e))}return p(t,e)}(t,n),i=self.URL||self.webkitURL,s="string"!=typeof r&&i.createObjectURL(r);try{return await async function(t,e){const n=new Image;if(n.src=t,e.image&&e.image.decode&&n.decode)return await n.decode(),n;return await new Promise((e,r)=>{try{n.onload=()=>e(n),n.onerror=e=>r(new Error("Could not load image ".concat(t,": ").concat(e)))}catch(t){r(t)}})}(s||r,e)}finally{s&&i.revokeObjectURL(s)}}const b={};let A=!0;async function E(t,e,n){let r;if(m(n)){r=await _(t,e,n)}else r=p(t,n);const i=e&&e.imagebitmap;return await async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!y(e)&&A||(e=null);if(e)try{return await createImageBitmap(t,e)}catch(t){console.warn(t),A=!1}return await createImageBitmap(t)}(r,i)}function y(t){for(const e in t||b)return!1;return!0}function v(t){return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=T(e);for(let e=0;e<r.length;++e)if(r[e]!==t[e+n])return!1;return!0}(t,"ftyp",4)?0==(96&t[8])?null:function(t){switch((e=t,n=8,r=12,String.fromCharCode(...e.slice(n,r))).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}var e,n,r}(t):null}function T(t){return[...t].map(t=>t.charCodeAt(0))}function B(t){const e=C(t);return function(t){const e=C(t);if(!(e.byteLength>=24&&2303741511===e.getUint32(0,!1)))return null;return{mimeType:"image/png",width:e.getUint32(16,!1),height:e.getUint32(20,!1)}}(e)||function(t){const e=C(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,!1)&&255===e.getUint8(2)))return null;const{tableMarkers:n,sofMarkers:r}=function(){const t=new Set([65499,65476,65484,65501,65534]);for(let e=65504;e<65520;++e)t.add(e);const e=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:e}}();let i=2;for(;i+9<e.byteLength;){const t=e.getUint16(i,!1);if(r.has(t))return{mimeType:"image/jpeg",height:e.getUint16(i+5,!1),width:e.getUint16(i+7,!1)};if(!n.has(t))return null;i+=2,i+=e.getUint16(i,!1)}return null}(e)||function(t){const e=C(t);if(!(e.byteLength>=10&&1195984440===e.getUint32(0,!1)))return null;return{mimeType:"image/gif",width:e.getUint16(6,!0),height:e.getUint16(8,!0)}}(e)||function(t){const e=C(t);if(!(e.byteLength>=14&&16973===e.getUint16(0,!1)&&e.getUint32(2,!0)===e.byteLength))return null;return{mimeType:"image/bmp",width:e.getUint32(18,!0),height:e.getUint32(22,!0)}}(e)||function(t){const e=v(new Uint8Array(t instanceof DataView?t.buffer:t));if(!e)return null;return{mimeType:e.mimeType,width:0,height:0}}(e)}function C(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}const O={id:"image",module:"images",name:"Images",version:"3.4.14",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:async function(t,e,n){const i=((e=e||{}).image||{}).type||"auto",{url:s}=n||{};let c;switch(function(t){switch(t){case"auto":case"data":return function(){if(a)return"imagebitmap";if(o)return"image";if(u)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(t){switch(t){case"auto":return a||o||u;case"imagebitmap":return a;case"image":return o;case"data":return u;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(i)){case"imagebitmap":c=await E(t,e,s);break;case"image":c=await _(t,e,s);break;case"data":c=await async function(t,e){const{mimeType:n}=B(t)||{},i=globalThis._parseImageNode;return Object(r.a)(i),await i(t,n)}(t);break;default:Object(r.a)(!1)}return"data"===i&&(c=h(c)),c},tests:[t=>Boolean(B(new DataView(t)))],options:{image:{type:"auto",decode:!0}}}},2194:function(t,e,n){"use strict";n.d(e,"a",(function(){return X}));var r=n(602);function i(t,e,n){const r=s(t),i=Object.keys(r).filter(t=>r[t]!==Array);return function(t,e,n){const{pointPositionsCount:r,pointFeaturesCount:i,linePositionsCount:s,linePathsCount:u,lineFeaturesCount:h,polygonPositionsCount:d,polygonObjectsCount:g,polygonRingsCount:m,polygonFeaturesCount:p,propArrayTypes:_,coordLength:b}=e,{numericPropKeys:A=[],PositionDataType:E=Float32Array,triangulate:y=!0}=n,v=t[0]&&"id"in t[0],T=t.length>65535?Uint32Array:Uint16Array,B={type:"Point",positions:new E(r*b),globalFeatureIds:new T(r),featureIds:i>65535?new Uint32Array(r):new Uint16Array(r),numericProps:{},properties:[],fields:[]},C={type:"LineString",pathIndices:s>65535?new Uint32Array(u+1):new Uint16Array(u+1),positions:new E(s*b),globalFeatureIds:new T(s),featureIds:h>65535?new Uint32Array(s):new Uint16Array(s),numericProps:{},properties:[],fields:[]},O={type:"Polygon",polygonIndices:d>65535?new Uint32Array(g+1):new Uint16Array(g+1),primitivePolygonIndices:d>65535?new Uint32Array(m+1):new Uint16Array(m+1),positions:new E(d*b),globalFeatureIds:new T(d),featureIds:p>65535?new Uint32Array(d):new Uint16Array(d),numericProps:{},properties:[],fields:[]};y&&(O.triangles=[]);for(const t of[B,C,O])for(const e of A){const n=_[e];t.numericProps[e]=new n(t.positions.length/b)}C.pathIndices[u]=s,O.polygonIndices[g]=d,O.primitivePolygonIndices[m]=d;const S={pointPosition:0,pointFeature:0,linePosition:0,linePath:0,lineFeature:0,polygonPosition:0,polygonObject:0,polygonRing:0,polygonFeature:0,feature:0};for(const e of t){const t=e.geometry,n=e.properties||{};switch(t.type){case"Point":o(t,B,S,b,n),B.properties.push(f(n,A)),v&&B.fields.push({id:e.id}),S.pointFeature++;break;case"LineString":a(t,C,S,b,n),C.properties.push(f(n,A)),v&&C.fields.push({id:e.id}),S.lineFeature++;break;case"Polygon":c(t,O,S,b,n),O.properties.push(f(n,A)),v&&O.fields.push({id:e.id}),S.polygonFeature++;break;default:throw new Error("Invalid geometry type")}S.feature++}return function(t,e,n,r){const i={points:{...t,positions:{value:t.positions,size:r},globalFeatureIds:{value:t.globalFeatureIds,size:1},featureIds:{value:t.featureIds,size:1},numericProps:l(t.numericProps,1)},lines:{...e,positions:{value:e.positions,size:r},pathIndices:{value:e.pathIndices,size:1},globalFeatureIds:{value:e.globalFeatureIds,size:1},featureIds:{value:e.featureIds,size:1},numericProps:l(e.numericProps,1)},polygons:{...n,positions:{value:n.positions,size:r},polygonIndices:{value:n.polygonIndices,size:1},primitivePolygonIndices:{value:n.primitivePolygonIndices,size:1},globalFeatureIds:{value:n.globalFeatureIds,size:1},featureIds:{value:n.featureIds,size:1},numericProps:l(n.numericProps,1)}};n.triangles&&(i.polygons.triangles={value:new Uint32Array(n.triangles),size:1});return i}(B,C,O,b)}(t,{propArrayTypes:r,...e},{numericPropKeys:n&&n.numericPropKeys||i,PositionDataType:n?n.PositionDataType:Float32Array,triangulate:!n||n.triangulate})}function s(t){const e={};for(const n of t)if(n.properties)for(const t in n.properties){const r=n.properties[t];e[t]=d(r,e[t])}return e}function o(t,e,n,r,i){e.positions.set(t.data,n.pointPosition*r);const s=t.data.length/r;h(e,i,n.pointPosition,s),e.globalFeatureIds.fill(n.feature,n.pointPosition,n.pointPosition+s),e.featureIds.fill(n.pointFeature,n.pointPosition,n.pointPosition+s),n.pointPosition+=s}function a(t,e,n,r,i){e.positions.set(t.data,n.linePosition*r);const s=t.data.length/r;h(e,i,n.linePosition,s),e.globalFeatureIds.fill(n.feature,n.linePosition,n.linePosition+s),e.featureIds.fill(n.lineFeature,n.linePosition,n.linePosition+s);for(let i=0,s=t.indices.length;i<s;++i){const o=t.indices[i],a=i===s-1?t.data.length:t.indices[i+1];e.pathIndices[n.linePath++]=n.linePosition,n.linePosition+=(a-o)/r}}function c(t,e,n,r,i){e.positions.set(t.data,n.polygonPosition*r);const s=t.data.length/r;h(e,i,n.polygonPosition,s),e.globalFeatureIds.fill(n.feature,n.polygonPosition,n.polygonPosition+s),e.featureIds.fill(n.polygonFeature,n.polygonPosition,n.polygonPosition+s);for(let i=0,s=t.indices.length;i<s;++i){const s=n.polygonPosition;e.polygonIndices[n.polygonObject++]=s;const o=t.areas[i],a=t.indices[i],c=t.indices[i+1];for(let i=0,s=a.length;i<s;++i){const o=a[i],u=i===s-1?void 0===c?t.data.length:c[0]:a[i+1];e.primitivePolygonIndices[n.polygonRing++]=n.polygonPosition,n.polygonPosition+=(u-o)/r}u(e,o,a,{startPosition:s,endPosition:n.polygonPosition,coordLength:r})}}function u(t,e,n,i){let{startPosition:s,endPosition:o,coordLength:a}=i;if(!t.triangles)return;const c=s*a,u=o*a,l=t.positions.subarray(c,u),h=n[0],f=n.slice(1).map(t=>(t-h)/a),d=Object(r.a)(l,f,a,e);for(let e=0,n=d.length;e<n;++e)t.triangles.push(s+d[e])}function l(t,e){const n={};for(const r in t)n[r]={value:t[r],size:e};return n}function h(t,e,n,r){for(const i in t.numericProps)if(i in e){const s=e[i];t.numericProps[i].fill(s,n,n+r)}}function f(t,e){const n={};for(const r in t)e.includes(r)||(n[r]=t[r]);return n}function d(t,e){return e!==Array&&Number.isFinite(t)?e===Float64Array||Math.fround(t)!==t?Float64Array:Float32Array:Array}var g=n(595),m=n.n(g),p=n(3);function _(t){let e=0;for(let n,r,i=0,s=t.length-1;i<t.length;s=i++)n=t[i],r=t[s],e+=(r[0]-n[0])*(n[1]+r[1]);return e}function b(t,e,n){e&&n&&(1===t?e.id=n.readVarint():2===t?function(t,e){const n=t.readVarint()+t.pos;for(;t.pos<n;){const n=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[n]=r}}(n,e):3===t?e.type=n.readVarint():4===t&&(e._geometry=n.pos))}class A{static get types(){return["Unknown","Point","LineString","Polygon"]}constructor(t,e,n,r,i){Object(p.a)(this,"properties",void 0),Object(p.a)(this,"extent",void 0),Object(p.a)(this,"type",void 0),Object(p.a)(this,"id",void 0),Object(p.a)(this,"_pbf",void 0),Object(p.a)(this,"_geometry",void 0),Object(p.a)(this,"_keys",void 0),Object(p.a)(this,"_values",void 0),this.properties={},this.extent=n,this.type=0,this.id=null,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(b,this,e)}loadGeometry(){const t=this._pbf;t.pos=this._geometry;const e=t.readVarint()+t.pos;let n=1,r=0,i=0,s=0;const o=[];let a;for(;t.pos<e;){if(r<=0){const e=t.readVarint();n=7&e,r=e>>3}if(r--,1===n||2===n)i+=t.readSVarint(),s+=t.readSVarint(),1===n&&(a&&o.push(a),a=[]),a&&a.push([i,s]);else{if(7!==n)throw new Error("unknown command ".concat(n));a&&a.push(a[0].slice())}}return a&&o.push(a),o}bbox(){const t=this._pbf;t.pos=this._geometry;const e=t.readVarint()+t.pos;let n=1,r=0,i=0,s=0,o=1/0,a=-1/0,c=1/0,u=-1/0;for(;t.pos<e;){if(r<=0){const e=t.readVarint();n=7&e,r=e>>3}if(r--,1===n||2===n)i+=t.readSVarint(),s+=t.readSVarint(),i<o&&(o=i),i>a&&(a=i),s<c&&(c=s),s>u&&(u=s);else if(7!==n)throw new Error("unknown command ".concat(n))}return[o,c,a,u]}_toGeoJSON(t){let e,n,r=this.loadGeometry(),i=A.types[this.type];switch(this.type){case 1:const i=[];for(e=0;e<r.length;e++)i[e]=r[e][0];r=i,t(r,this);break;case 2:for(e=0;e<r.length;e++)t(r[e],this);break;case 3:for(r=function(t){const e=t.length;if(e<=1)return[t];const n=[];let r,i;for(let s=0;s<e;s++){const e=_(t[s]);0!==e&&(void 0===i&&(i=e<0),i===e<0?(r&&n.push(r),r=[t[s]]):r&&r.push(t[s]))}return r&&n.push(r),n}(r),e=0;e<r.length;e++)for(n=0;n<r[e].length;n++)t(r[e][n],this)}1===r.length?r=r[0]:i="Multi".concat(i);const s={type:"Feature",geometry:{type:i,coordinates:r},properties:this.properties};return null!==this.id&&(s.id=this.id),s}toGeoJSON(t){if("function"==typeof t)return this._toGeoJSON(t);const{x:e,y:n,z:r}=t,i=this.extent*Math.pow(2,r),s=this.extent*e,o=this.extent*n;return this._toGeoJSON((function(t){for(let e=0;e<t.length;e++){const n=t[e];n[0]=360*(n[0]+s)/i-180;const r=180-360*(n[1]+o)/i;n[1]=360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90}}))}}class E{constructor(t,e){Object(p.a)(this,"version",void 0),Object(p.a)(this,"name",void 0),Object(p.a)(this,"extent",void 0),Object(p.a)(this,"length",void 0),Object(p.a)(this,"_pbf",void 0),Object(p.a)(this,"_keys",void 0),Object(p.a)(this,"_values",void 0),Object(p.a)(this,"_features",void 0),this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(y,this,e),this.length=this._features.length}feature(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];const e=this._pbf.readVarint()+this._pbf.pos;return new A(this._pbf,e,this.extent,this._keys,this._values)}}function y(t,e,n){e&&n&&(15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){let e=null;const n=t.readVarint()+t.pos;for(;t.pos<n;){const n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(n)))}class v{constructor(t,e){Object(p.a)(this,"layers",void 0),this.layers=t.readFields(T,{},e)}}function T(t,e,n){if(3===t&&n){const t=new E(n,n.readVarint()+n.pos);t.length&&e&&(e[t.name]=t)}}function B(t){const e=t.indices.length;if(e<=1)return{type:"Polygon",data:t.data,areas:[[Object(r.b)(t.data)]],indices:[t.indices]};const n=[],i=[];let s,o=[],a=[],c=0;for(let u,l,h=0;h<e;h++){l=t.indices[h]-c,u=t.indices[h+1]-c||t.data.length;const e=t.data.slice(l,u),f=Object(r.b)(e);if(0!==f)void 0===s&&(s=f<0),s===f<0?(a.length&&(n.push(o),i.push(a)),a=[l],o=[f]):(o.push(f),a.push(l));else{const e=t.data.slice(0,l),n=t.data.slice(u);t.data=e.concat(n),c+=u-l}}return o&&n.push(o),a.length&&i.push(a),{type:"Polygon",areas:n,indices:i,data:t.data}}function C(t,e,n){e&&n&&(1===t?e.id=n.readVarint():2===t?function(t,e){const n=t.readVarint()+t.pos;for(;t.pos<n;){const n=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[n]=r}}(n,e):3===t?e.type=n.readVarint():4===t&&(e._geometry=n.pos))}let O,S,w,I,R,x,M;class N{constructor(t,e,n,r,i,s){Object(p.a)(this,"properties",void 0),Object(p.a)(this,"extent",void 0),Object(p.a)(this,"type",void 0),Object(p.a)(this,"id",void 0),Object(p.a)(this,"_pbf",void 0),Object(p.a)(this,"_geometry",void 0),Object(p.a)(this,"_keys",void 0),Object(p.a)(this,"_values",void 0),Object(p.a)(this,"_geometryInfo",void 0),this.properties={},this.extent=n,this.type=0,this.id=null,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,this._geometryInfo=s,t.readFields(C,this,e)}loadGeometry(){const t=this._pbf;t.pos=this._geometry,O=t.readVarint()+t.pos,S=1,I=0,R=0,x=0,M=0;const e=[],n=[];for(;t.pos<O;)if(I<=0&&(w=t.readVarint(),S=7&w,I=w>>3),I--,1===S||2===S)R+=t.readSVarint(),x+=t.readSVarint(),1===S&&e.push(M),n.push(R,x),M+=2;else{if(7!==S)throw new Error("unknown command ".concat(S));if(M>0){const t=e[e.length-1];n.push(n[t],n[t+1]),M+=2}}return{data:n,indices:e}}_toBinaryCoordinates(t){const e=this.loadGeometry();let n;t(e.data,this);switch(this.type){case 1:this._geometryInfo.pointFeaturesCount++,this._geometryInfo.pointPositionsCount+=e.indices.length,n={type:"Point",...e};break;case 2:this._geometryInfo.lineFeaturesCount++,this._geometryInfo.linePathsCount+=e.indices.length,this._geometryInfo.linePositionsCount+=e.data.length/2,n={type:"LineString",...e};break;case 3:n=B(e),this._geometryInfo.polygonFeaturesCount++,this._geometryInfo.polygonObjectsCount+=n.indices.length;for(const t of n.indices)this._geometryInfo.polygonRingsCount+=t.length;this._geometryInfo.polygonPositionsCount+=n.data.length/2;break;default:throw new Error("Invalid geometry type: ".concat(this.type))}const r={type:"Feature",geometry:n,properties:this.properties};return null!==this.id&&(r.id=this.id),r}toBinaryCoordinates(t){if("function"==typeof t)return this._toBinaryCoordinates(t);const{x:e,y:n,z:r}=t,i=this.extent*Math.pow(2,r),s=this.extent*e,o=this.extent*n;return this._toBinaryCoordinates(t=>function(t,e,n,r){for(let i=0,s=t.length;i<s;i+=2){t[i]=360*(t[i]+e)/r-180;const s=180-360*(t[i+1]+n)/r;t[i+1]=360/Math.PI*Math.atan(Math.exp(s*Math.PI/180))-90}}(t,s,o,i))}}class F{constructor(t,e){Object(p.a)(this,"version",void 0),Object(p.a)(this,"name",void 0),Object(p.a)(this,"extent",void 0),Object(p.a)(this,"length",void 0),Object(p.a)(this,"_pbf",void 0),Object(p.a)(this,"_keys",void 0),Object(p.a)(this,"_values",void 0),Object(p.a)(this,"_features",void 0),this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(L,this,e),this.length=this._features.length}feature(t,e){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];const n=this._pbf.readVarint()+this._pbf.pos;return new N(this._pbf,n,this.extent,this._keys,this._values,e)}}function L(t,e,n){e&&n&&(15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){let e=null;const n=t.readVarint()+t.pos;for(;t.pos<n;){const n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(n)))}class D{constructor(t,e){Object(p.a)(this,"layers",void 0),this.layers=t.readFields(P,{},e)}}function P(t,e,n){if(3===t&&n){const t=new F(n,n.readVarint()+n.pos);t.length&&e&&(e[t.name]=t)}}function U(t,e){var n,r;const i=function(t){var e;if(null==t||!t.mvt)throw new Error("mvt options required");const n="wgs84"===(null===(e=t.mvt)||void 0===e?void 0:e.coordinates),{tileIndex:r}=t.mvt,i=r&&Number.isFinite(r.x)&&Number.isFinite(r.y)&&Number.isFinite(r.z);if(n&&!i)throw new Error("MVT Loader: WGS84 coordinates need tileIndex property");return t.mvt}(e),s=(null==e||null===(n=e.gis)||void 0===n?void 0:n.format)||(null==e||null===(r=e.mvt)||void 0===r?void 0:r.shape);switch(s){case"columnar-table":return{shape:"columnar-table",data:G(t,i)};case"geojson-row-table":return{shape:"geojson-row-table",data:j(t,i)};case"geojson":return j(t,i);case"binary-geometry":case"binary":return G(t,i);default:throw new Error(s)}}function G(t,e){const[n,r]=function(t,e){const n=[],r={coordLength:2,pointPositionsCount:0,pointFeaturesCount:0,linePositionsCount:0,linePathsCount:0,lineFeaturesCount:0,polygonPositionsCount:0,polygonObjectsCount:0,polygonRingsCount:0,polygonFeaturesCount:0};if(t.byteLength<=0)return[n,r];const i=new D(new m.a(t));return(e&&Array.isArray(e.layers)?e.layers:Object.keys(i.layers)).forEach(t=>{const s=i.layers[t];if(s)for(let i=0;i<s.length;i++){const o=k(s.feature(i,r),e,t);n.push(o)}}),[n,r]}(t,e),s=i(n,r);return s.byteLength=t.byteLength,s}function j(t,e){if(t.byteLength<=0)return[];const n=[],r=new v(new m.a(t));return(Array.isArray(e.layers)?e.layers:Object.keys(r.layers)).forEach(t=>{const i=r.layers[t];if(i)for(let r=0;r<i.length;r++){const s=H(i.feature(r),e,t);n.push(s)}}),n}function H(t,e,n){const r=t.toGeoJSON("wgs84"===e.coordinates?e.tileIndex:V);return e.layerProperty&&(r.properties[e.layerProperty]=n),r}function k(t,e,n){const r=t.toBinaryCoordinates("wgs84"===e.coordinates?e.tileIndex:z);return e.layerProperty&&r.properties&&(r.properties[e.layerProperty]=n),r}function V(t,e){const{extent:n}=e;for(let e=0;e<t.length;e++){const r=t[e];r[0]/=n,r[1]/=n}}function z(t,e){const{extent:n}=e;for(let e=0,r=t.length;e<r;++e)t[e]/=n}const X={name:"Mapbox Vector Tile",id:"mvt",module:"mvt",version:"3.4.14",extensions:["mvt","pbf"],mimeTypes:["application/vnd.mapbox-vector-tile","application/x-protobuf"],worker:!0,category:"geometry",options:{mvt:{shape:"geojson",coordinates:"local",layerProperty:"layerName",layers:void 0,tileIndex:null}}}},2196:function(t,e,n){"use strict";function r(t){switch(t.shape){case"array-row-table":case"object-row-table":return t.data.length;case"geojson-table":return t.features.length;case"arrow-table":return t.data.numRows;case"columnar-table":for(const e of Object.values(t.data))return e.length||0;return 0;default:throw new Error("table")}}function i(t,e,n){var r;switch(t.shape){case"array-row-table":const i=function(t,e){var n;const r=null===(n=t.schema)||void 0===n?void 0:n.fields.findIndex(t=>t.name===e);if(void 0===r)throw new Error(e);return r}(t,n);return t.data[e][i];case"object-row-table":return t.data[e][n];case"geojson-table":return t.features[e][n];case"columnar-table":return t.data[n][e];case"arrow-table":const s=t.data,o=s.schema.fields.findIndex(t=>t.name===n);return null===(r=s.getChildAt(o))||void 0===r?void 0:r.get(e);default:throw new Error("todo")}}function s(t,e,n,r){switch(t.shape){case"object-row-table":return r?Object.fromEntries(Object.entries(t.data[e])):t.data[e];case"array-row-table":if(t.schema){const r=n||{};for(let n=0;n<t.schema.fields.length;n++)r[t.schema.fields[n].name]=t.data[e][n];return r}throw new Error("no schema");case"geojson-table":if(t.schema){const r=n||{};for(let n=0;n<t.schema.fields.length;n++)r[t.schema.fields[n].name]=t.features[e][n];return r}throw new Error("no schema");case"columnar-table":if(t.schema){const r=n||{};for(let n=0;n<t.schema.fields.length;n++)r[t.schema.fields[n].name]=t.data[t.schema.fields[n].name][e];return r}{const r=n||{};for(const[n,i]of Object.entries(t.data))r[n]=i[e];return r}case"arrow-table":const i=t.data,s=n||{},o=i.get(e),a=i.schema;for(let t=0;t<a.fields.length;t++)s[a.fields[t].name]=null==o?void 0:o[a.fields[t].name];return s;default:throw new Error("shape")}}function o(t,e,n,r){switch(t.shape){case"array-row-table":return r?Array.from(t.data[e]):t.data[e];case"object-row-table":if(t.schema){const r=n||[];for(let n=0;n<t.schema.fields.length;n++)r[n]=t.data[e][t.schema.fields[n].name];return r}return Object.values(t.data[e]);case"geojson-table":if(t.schema){const r=n||[];for(let n=0;n<t.schema.fields.length;n++)r[n]=t.features[e][t.schema.fields[n].name];return r}return Object.values(t.features[e]);case"columnar-table":if(t.schema){const r=n||[];for(let n=0;n<t.schema.fields.length;n++)r[n]=t.data[t.schema.fields[n].name][e];return r}{const r=n||[];let i=0;for(const n of Object.values(t.data))r[i]=n[e],i++;return r}case"arrow-table":const i=t.data,s=n||[],o=i.get(e),a=i.schema;for(let t=0;t<a.fields.length;t++)s[t]=null==o?void 0:o[a.fields[t].name];return s;default:throw new Error("shape")}}function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";return t instanceof Date?"date-millisecond":t instanceof Number?e:"string"==typeof t?"utf8":"null"}function c(t){let e=function(t){switch(t.constructor){case Int8Array:return"int8";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int16Array:return"int16";case Uint16Array:return"uint16";case Int32Array:return"int32";case Uint32Array:return"uint32";case Float32Array:return"float32";case Float64Array:return"float64";default:return"null"}}(t);return"null"!==e?{type:e,nullable:!1}:t.length>0?(e=a(t[0]),{type:e,nullable:!0}):{type:"null",nullable:!0}}function u(t){const e=[];for(const[n,r]of Object.entries(t)){const t=h(r,n);e.push(t)}return{fields:e,metadata:{}}}function l(t){if(!t.length)throw new Error("deduce from empty table");const e=[],n=t[0];for(const[t,r]of Object.entries(n))e.push(f(r,t));return{fields:e,metadata:{}}}function h(t,e){if(ArrayBuffer.isView(t)){const n=c(t);return{name:e,type:n.type||"null",nullable:n.nullable}}if(Array.isArray(t)&&t.length>0){return{name:e,type:a(t[0]),nullable:!0}}throw new Error("empty table")}function f(t,e){return{name:e,type:a(t),nullable:!0}}function d(t,e){return new(function(t,e){if(!e)switch(t){case"int8":return Int8Array;case"uint8":return Uint8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array}return Array}(t.type,t.nullable))(e)}function g(t,e){switch(e){case"object-row-table":return function(t){if("object-row-table"===t.shape)return t;const e=r(t),n=new Array(e);for(let r=0;r<e;r++)n[r]=s(t,r);return{shape:"object-row-table",schema:t.schema,data:n}}(t);case"array-row-table":return function(t){if("array-row-table"===t.shape)return t;const e=r(t),n=new Array(e);for(let r=0;r<e;r++)n[r]=o(t,r);return{shape:"array-row-table",schema:t.schema,data:n}}(t);case"columnar-table":return function(t){var e;const n=t.schema||function(t){switch(t.shape){case"array-row-table":case"object-row-table":return l(t.data);case"columnar-table":return u(t.data);case"arrow-table":default:throw new Error("Deduce schema")}}(t),s=(null===(e=t.schema)||void 0===e?void 0:e.fields)||[];if("columnar-table"===t.shape)return{...t,schema:n};const o=r(t),a={};for(const e of s){const n=d(e,o);a[e.name]=n;for(let r=0;r<o;r++)n[r]=i(t,r,e.name)}return{shape:"columnar-table",schema:n,data:a}}(t);case"arrow-table":return function(t){var e;const n=null===(e=globalThis.__loaders)||void 0===e?void 0:e._makeArrowTable;if(!n)throw new Error("");return n(t)}(t);default:throw new Error(e)}}n.d(e,"a",(function(){return C}));var m=n(2202);function p(t){const e=t.data,n={};for(const t of e.schema.fields){const r=e.getChild(t.name),i=null==r?void 0:r.toArray();n[t.name]=i}return{shape:"columnar-table",schema:t.schema,data:n}}n(57);var _=n(27),b=n(16);function A(t){return Object.fromEntries(t)}function E(t){return{name:t.name,type:y(t.type),nullable:t.nullable,metadata:A(t.metadata)}}function y(t){switch(t.constructor){case _.y:return"null";case _.a:return"binary";case _.b:return"bool";case _.o:const e=t;return`${e.isSigned?"u":""}int${e.bitWidth}`;case _.s:return"int8";case _.p:return"int16";case _.q:return"int32";case _.r:return"int64";case _.N:return"uint8";case _.K:return"uint16";case _.L:return"uint32";case _.M:return"uint64";case _.k:switch(t.precision){case b.f.HALF:return"float16";case b.f.SINGLE:return"float32";case b.f.DOUBLE:return"float64";default:return"float16"}case _.l:return"float16";case _.m:return"float32";case _.n:return"float64";case _.P:return"utf8";case _.g:const n=t;return{type:"decimal",bitWidth:n.bitWidth,precision:n.precision,scale:n.scale};case _.f:return t.unit===b.b.DAY?"date-day":"date-millisecond";case _.d:return"date-day";case _.e:return"date-millisecond";case _.A:switch(t.unit){case b.g.SECOND:return"time-second";case b.g.MILLISECOND:return"time-millisecond";case b.g.MICROSECOND:return"time-microsecond";case b.g.NANOSECOND:return"time-nanosecond";default:return"time-second"}case _.C:return"time-millisecond";case _.E:return"time-second";case _.B:return"time-microsecond";case _.D:return"time-nanosecond";case _.F:switch(t.unit){case b.g.SECOND:return"timestamp-second";case b.g.MILLISECOND:return"timestamp-millisecond";case b.g.MICROSECOND:return"timestamp-microsecond";case b.g.NANOSECOND:return"timestamp-nanosecond";default:return"timestamp-second"}case _.J:return"timestamp-second";case _.H:return"timestamp-millisecond";case _.G:return"timestamp-microsecond";case _.I:return"timestamp-nanosecond";case _.t:switch(t.unit){case b.c.DAY_TIME:return"interval-daytime";case b.c.YEAR_MONTH:return"interval-yearmonth";default:return"interval-daytime"}case _.u:return"interval-daytime";case _.v:return"interval-yearmonth";case _.x:const r=t;return{type:"map",keysSorted:r.keysSorted,children:r.children.map(t=>E(t))};case _.w:return{type:"list",children:[E(t.valueField)]};case _.j:const i=t;return{type:"fixed-size-list",listSize:i.listSize,children:[E(i.children[0])]};case _.z:return{type:"struct",children:t.children.map(t=>E(t))};default:throw new Error("arrow type not supported: "+t.constructor.name)}}function v(t,e){const n=m.a([new Uint8Array(t)]),r={shape:"arrow-table",schema:(i=n.schema,{fields:i.fields.map(t=>E(t)),metadata:A(i.metadata)}),data:n};var i;const s=(null==e?void 0:e.shape)||"arrow-table";switch(s){case"arrow-table":return r;case"columnar-table":return p(r);case"object-row-table":let t=p(r);return g(t,"object-row-table");case"array-row-table":return t=p(r),g(t,"array-row-table");default:throw new Error(s)}}var T=n(1451),B=n(320);const C={...{name:"Apache Arrow",id:"arrow",module:"arrow",version:"4.1.0-alpha.4",category:"table",extensions:["arrow","feather"],mimeTypes:["application/vnd.apache.arrow.file","application/vnd.apache.arrow.stream","application/octet-stream"],binary:!0,tests:["ARROW"],options:{arrow:{shape:"columnar-table"}}},parse:async(t,e)=>v(t,null==e?void 0:e.arrow),parseSync:(t,e)=>v(t,null==e?void 0:e.arrow),parseInBatches:function(t,e){return async function*(){const n=T.a.readAll(t);for await(const t of n){for await(const n of t){var r,i;void 0!==(null==e||null===(r=e.arrow)||void 0===r?void 0:r.batchDebounceMs)&&(null==e||null===(i=e.arrow)||void 0===i?void 0:i.batchDebounceMs)>0&&await new Promise(t=>{var n;return setTimeout(t,(null===(n=e.arrow)||void 0===n?void 0:n.batchDebounceMs)||0)});const t={shape:"arrow-table",batchType:"data",data:new B.a([n]),length:n.data.length};yield t}break}}()}}},2198:function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error("null row");const n={};if(e)for(let r=0;r<e.length;r++)n[e[r]]=t[r];else for(let e=0;e<t.length;e++){n["column-"+e]=t[e]}return n}function i(t,e){if(!t)throw new Error("null row");if(e){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=t[e[r]];return n}return Object.values(t)}let s;n.d(e,"a",(function(){return B}));class o extends Array{enqueue(t){return this.push(t)}dequeue(){return this.shift()}}s=Symbol.asyncIterator;class a{constructor(){this._values=void 0,this._settlers=void 0,this._closed=void 0,this._values=new o,this._settlers=new o,this._closed=!1}close(){for(;this._settlers.length>0;)this._settlers.dequeue().resolve({done:!0});this._closed=!0}[s](){return this}enqueue(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");const e=this._settlers.dequeue();t instanceof Error?e.reject(t):e.resolve({value:t})}else this._values.enqueue(t)}next(){if(this._values.length>0){const t=this._values.dequeue();return t instanceof Error?Promise.reject(t):Promise.resolve({value:t})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0})}return new Promise((t,e)=>{this._settlers.enqueue({resolve:t,reject:e})})}}class c{constructor(t,e){if(this.schema=void 0,this.options=void 0,this.shape=void 0,this.length=0,this.rows=null,this.cursor=0,this._headers=[],this.options=e,this.schema=t,!Array.isArray(t)){this._headers=[];for(const e in t)this._headers[t[e].index]=t[e].name}}rowCount(){return this.length}addArrayRow(t,e){Number.isFinite(e)&&(this.cursor=e),this.shape="array-row-table",this.rows=this.rows||new Array(100),this.rows[this.length]=t,this.length++}addObjectRow(t,e){Number.isFinite(e)&&(this.cursor=e),this.shape="object-row-table",this.rows=this.rows||new Array(100),this.rows[this.length]=t,this.length++}getBatch(){let t=this.rows;if(!t)return null;t=t.slice(0,this.length),this.rows=null;return{shape:this.shape||"array-row-table",batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}}}class u{constructor(t,e){if(this.schema=void 0,this.options=void 0,this.length=0,this.objectRows=null,this.arrayRows=null,this.cursor=0,this._headers=null,this.options=e,this.schema=t,t){this._headers=[];for(const e in t)this._headers[t[e].index]=t[e].name}}rowCount(){return this.length}addArrayRow(t,e){switch(Number.isFinite(e)&&(this.cursor=e),this._headers||(this._headers=function(t){const e=[];for(let n=0;n<t.length;n++){const t="column-"+n;e.push(t)}return e}(t)),this.options.shape){case"object-row-table":const n=r(t,this._headers);this.addObjectRow(n,e);break;case"array-row-table":this.arrayRows=this.arrayRows||new Array(100),this.arrayRows[this.length]=t,this.length++}}addObjectRow(t,e){switch(Number.isFinite(e)&&(this.cursor=e),this._headers||(this._headers=function(t){return Object.keys(t)}(t)),this.options.shape){case"array-row-table":const n=i(t,this._headers);this.addArrayRow(n,e);break;case"object-row-table":this.objectRows=this.objectRows||new Array(100),this.objectRows[this.length]=t,this.length++}}getBatch(){let t=this.arrayRows||this.objectRows;return t?(t=t.slice(0,this.length),this.arrayRows=null,this.objectRows=null,{shape:this.options.shape,batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}}class l{constructor(t,e){this.schema=void 0,this.length=0,this.allocated=0,this.columns={},this.schema=t,this._reallocateColumns()}rowCount(){return this.length}addArrayRow(t){this._reallocateColumns();let e=0;for(const n in this.columns)this.columns[n][this.length]=t[e++];this.length++}addObjectRow(t){this._reallocateColumns();for(const e in t)this.columns[e][this.length]=t[e];this.length++}getBatch(){this._pruneColumns();const t=Array.isArray(this.schema)?this.columns:{};if(!Array.isArray(this.schema))for(const e in this.schema){const n=this.schema[e];t[n.name]=this.columns[n.index]}this.columns={};return{shape:"columnar-table",batchType:"data",data:t,schema:this.schema,length:this.length}}_reallocateColumns(){if(!(this.length<this.allocated)){this.allocated=this.allocated>0?this.allocated*=2:100,this.columns={};for(const t in this.schema){const e=this.schema[t],n=e.type||Float32Array,r=this.columns[e.index];if(r&&ArrayBuffer.isView(r)){const t=new n(this.allocated);t.set(r),this.columns[e.index]=t}else r?(r.length=this.allocated,this.columns[e.index]=r):this.columns[e.index]=new n(this.allocated)}}}_pruneColumns(){for(const[t,e]of Object.entries(this.columns))this.columns[t]=e.slice(0,this.length)}}const h={shape:void 0,batchSize:"auto",batchDebounceMs:0,limit:0,_limitMB:0};class f{constructor(t,e){this.schema=void 0,this.options=void 0,this.aggregator=null,this.batchCount=0,this.bytesUsed=0,this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),this.totalLength=0,this.totalBytes=0,this.rowBytes=0,this.schema=t,this.options={...h,...e}}limitReached(){var t,e;return!!(Boolean(null===(t=this.options)||void 0===t?void 0:t.limit)&&this.totalLength>=this.options.limit)||!!(Boolean(null===(e=this.options)||void 0===e?void 0:e._limitMB)&&this.totalBytes/1e6>=this.options._limitMB)}addRow(t){this.limitReached()||(this.totalLength++,this.rowBytes=this.rowBytes||this._estimateRowMB(t),this.totalBytes+=this.rowBytes,Array.isArray(t)?this.addArrayRow(t):this.addObjectRow(t))}addArrayRow(t){if(!this.aggregator){const t=this._getTableBatchType();this.aggregator=new t(this.schema,this.options)}this.aggregator.addArrayRow(t)}addObjectRow(t){if(!this.aggregator){const t=this._getTableBatchType();this.aggregator=new t(this.schema,this.options)}this.aggregator.addObjectRow(t)}chunkComplete(t){t instanceof ArrayBuffer&&(this.bytesUsed+=t.byteLength),"string"==typeof t&&(this.bytesUsed+=t.length),this.isChunkComplete=!0}getFullBatch(t){return this._isFull()?this._getBatch(t):null}getFinalBatch(t){return this._getBatch(t)}_estimateRowMB(t){return Array.isArray(t)?8*t.length:8*Object.keys(t).length}_isFull(){if(!this.aggregator||0===this.aggregator.rowCount())return!1;if("auto"===this.options.batchSize){if(!this.isChunkComplete)return!1}else if(this.options.batchSize>this.aggregator.rowCount())return!1;return!(this.options.batchDebounceMs>Date.now()-this.lastBatchEmittedMs)&&(this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),!0)}_getBatch(t){if(!this.aggregator)return null;null!=t&&t.bytesUsed&&(this.bytesUsed=t.bytesUsed);const e=this.aggregator.getBatch();return e.count=this.batchCount,e.bytesUsed=this.bytesUsed,Object.assign(e,t),this.batchCount++,this.aggregator=null,e}_getTableBatchType(){switch(this.options.shape){case"array-row-table":case"object-row-table":return u;case"columnar-table":return l;case"arrow-table":if(!f.ArrowBatch)throw new Error("TableBatchBuilder");return f.ArrowBatch;default:return c}}}f.ArrowBatch=void 0;
/* @license
Papa Parse
v5.0.0-beta.0
https://github.com/mholt/PapaParse
License: MIT
*/
const d={parse:function(t,e,n){var r=(e=e||{}).dynamicTyping||!1;y(r)&&(e.dynamicTypingFunction=r,r={});if(e.dynamicTyping=r,e.transform=!!y(e.transform)&&e.transform,e.worker&&d.WORKERS_SUPPORTED){var i=newWorker();return i.userStep=e.step,i.userChunk=e.chunk,i.userComplete=e.complete,i.userError=e.error,e.step=y(e.step),e.chunk=y(e.chunk),e.complete=y(e.complete),e.error=y(e.error),delete e.worker,void i.postMessage({input:t,config:e,workerId:i.id})}var s=null;"string"==typeof t&&(s=new p(e));s||(s=new n(e));return s.stream(t)},unparse:function(t,e){var n=!1,r=!0,i=",",s="\r\n",o='"',a=o+o,c=!1,u=null;!function(){if("object"!=typeof e)return;"string"!=typeof e.delimiter||d.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(i=e.delimiter);("boolean"==typeof e.quotes||Array.isArray(e.quotes))&&(n=e.quotes);"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(c=e.skipEmptyLines);"string"==typeof e.newline&&(s=e.newline);"string"==typeof e.quoteChar&&(o=e.quoteChar);"boolean"==typeof e.header&&(r=e.header);if(Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");u=e.columns}void 0!==e.escapeChar&&(a=e.escapeChar+o)}();var l=new RegExp(b(o),"g");"string"==typeof t&&(t=JSON.parse(t));if(Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return f(null,t,c);if("object"==typeof t[0])return f(u||h(t[0]),t,c)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:h(t.data[0])),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),f(t.fields||[],t.data||[],c);throw new Error("Unable to serialize unrecognized input");function h(t){if("object"!=typeof t)return[];var e=[];for(var n in t)e.push(n);return e}function f(t,e,n){var o="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var a=Array.isArray(t)&&t.length>0,c=!Array.isArray(e[0]);if(a&&r){for(var u=0;u<t.length;u++)u>0&&(o+=i),o+=g(t[u],u);e.length>0&&(o+=s)}for(var l=0;l<e.length;l++){var h=a?t.length:e[l].length,f=!1,d=a?0===Object.keys(e[l]).length:0===e[l].length;if(n&&!a&&(f="greedy"===n?""===e[l].join("").trim():1===e[l].length&&0===e[l][0].length),"greedy"===n&&a){for(var m=[],p=0;p<h;p++){var _=c?t[p]:p;m.push(e[l][_])}f=""===m.join("").trim()}if(!f){for(var b=0;b<h;b++){b>0&&!d&&(o+=i);var A=a&&c?t[b]:b;o+=g(e[l][A],b)}l<e.length-1&&(!n||h>0&&!d)&&(o+=s)}}return o}function g(t,e){return null==t?"":t.constructor===Date?JSON.stringify(t).slice(1,25):(t=t.toString().replace(l,a),"boolean"==typeof n&&n||Array.isArray(n)&&n[e]||function(t,e){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return!0;return!1}(t,d.BAD_DELIMITERS)||t.indexOf(i)>-1||" "===t.charAt(0)||" "===t.charAt(t.length-1)?o+t+o:t)}},RECORD_SEP:String.fromCharCode(30),UNIT_SEP:String.fromCharCode(31),BYTE_ORDER_MARK:"\ufeff",BAD_DELIMITERS:["\r","\n",'"',"\ufeff"],WORKERS_SUPPORTED:!1,NODE_STREAM_INPUT:1,LocalChunkSize:10485760,RemoteChunkSize:5242880,DefaultDelimiter:",",Parser:A,ParserHandle:_,ChunkStreamer:m,StringStreamer:p};var g=d;function m(t){this._handle=null,this._finished=!1,this._completed=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=E(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null);this._handle=new _(e),this._handle.streamer=this,this._config=e}.call(this,t),this.parseChunk=function(t,e){if(this.isFirstChunk&&y(this._config.beforeFirstChunk)){var n=this._config.beforeFirstChunk(t);void 0!==n&&(t=n)}this.isFirstChunk=!1;var r=this._partialLine+t;this._partialLine="";var i=this._handle.parse(r,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var s=i.meta.cursor;this._finished||(this._partialLine=r.substring(s-this._baseIndex),this._baseIndex=s),i&&i.data&&(this._rowCount+=i.data.length);var o=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(y(this._config.chunk)&&!e){if(this._config.chunk(i,this._handle),this._handle.paused()||this._handle.aborted())return;i=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(i.data),this._completeResults.errors=this._completeResults.errors.concat(i.errors),this._completeResults.meta=i.meta),this._completed||!o||!y(this._config.complete)||i&&i.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),o||i&&i.meta.paused||this._nextChunk(),i}},this._sendError=function(t){y(this._config.error)&&this._config.error(t)}}function p(t){var e;t=t||{},m.call(this,t),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t=this._config.chunkSize,n=t?e.substr(0,t):e;return e=t?e.substr(t):"",this._finished=!e,this.parseChunk(n)}}}function _(t){var e,n,r,i=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,s=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,o=this,a=0,c=0,u=!1,l=!1,h=[],f={data:[],errors:[],meta:{}};if(y(t.step)){var g=t.step;t.step=function(e){if(f=e,_())p();else{if(p(),!f.data||0===f.data.length)return;a+=e.data.length,t.preview&&a>t.preview?n.abort():g(f,o)}}}function m(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function p(){if(f&&r&&(T("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),r=!1),t.skipEmptyLines)for(var e=0;e<f.data.length;e++)m(f.data[e])&&f.data.splice(e--,1);return _()&&function(){if(!f)return;function e(e){y(t.transformHeader)&&(e=t.transformHeader(e)),h.push(e)}if(Array.isArray(f.data[0])){for(var n=0;_()&&n<f.data.length;n++)f.data[n].forEach(e);f.data.splice(0,1)}else f.data.forEach(e)}(),function(){if(!f||!f.data||!t.header&&!t.dynamicTyping&&!t.transform)return f;function e(e,n){var r,i=t.header?{}:[];for(r=0;r<e.length;r++){var s=r,o=e[r];t.header&&(s=r>=h.length?"__parsed_extra":h[r]),t.transform&&(o=t.transform(o,s)),o=v(s,o),"__parsed_extra"===s?(i[s]=i[s]||[],i[s].push(o)):i[s]=o}return t.header&&(r>h.length?T("FieldMismatch","TooManyFields","Too many fields: expected "+h.length+" fields but parsed "+r,c+n):r<h.length&&T("FieldMismatch","TooFewFields","Too few fields: expected "+h.length+" fields but parsed "+r,c+n)),i}var n=1;!f.data[0]||Array.isArray(f.data[0])?(f.data=f.data.map(e),n=f.data.length):f.data=e(f.data,0);t.header&&f.meta&&(f.meta.fields=h);return c+=n,f}()}function _(){return t.header&&0===h.length}function v(e,n){return function(e){return t.dynamicTypingFunction&&void 0===t.dynamicTyping[e]&&(t.dynamicTyping[e]=t.dynamicTypingFunction(e)),!0===(t.dynamicTyping[e]||t.dynamicTyping)}(e)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(i.test(n)?parseFloat(n):s.test(n)?new Date(n):""===n?null:n):n}function T(t,e,n,r){f.errors.push({type:t,code:e,message:n,row:r})}this.parse=function(i,s,o){var a=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substr(0,1048576);var n=new RegExp(b(e)+"([^]*?)"+b(e),"gm"),r=(t=t.replace(n,"")).split("\r"),i=t.split("\n"),s=i.length>1&&i[0].length<r[0].length;if(1===r.length||s)return"\n";for(var o=0,a=0;a<r.length;a++)"\n"===r[a][0]&&o++;return o>=r.length/2?"\r\n":"\r"}(i,a)),r=!1,t.delimiter)y(t.delimiter)&&(t.delimiter=t.delimiter(i),f.meta.delimiter=t.delimiter);else{var c=function(e,n,r,i,s){var o,a,c;s=s||[",","\t","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var u=0;u<s.length;u++){var l=s[u],h=0,f=0,g=0;c=void 0;for(var p=new A({comments:i,delimiter:l,newline:n,preview:10}).parse(e),_=0;_<p.data.length;_++)if(r&&m(p.data[_]))g++;else{var b=p.data[_].length;f+=b,void 0!==c?b>1&&(h+=Math.abs(b-c),c=b):c=0}p.data.length>0&&(f/=p.data.length-g),(void 0===a||h>a)&&f>1.99&&(a=h,o=l)}return t.delimiter=o,{successful:!!o,bestDelimiter:o}}(i,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);c.successful?t.delimiter=c.bestDelimiter:(r=!0,t.delimiter=d.DefaultDelimiter),f.meta.delimiter=t.delimiter}var l=E(t);return t.preview&&t.header&&l.preview++,e=i,n=new A(l),f=n.parse(e,s,o),p(),u?{meta:{paused:!0}}:f||{meta:{paused:!1}}},this.paused=function(){return u},this.pause=function(){u=!0,n.abort(),e=e.substr(n.getCharIndex())},this.resume=function(){u=!1,o.streamer.parseChunk(e,!0)},this.aborted=function(){return l},this.abort=function(){l=!0,n.abort(),f.meta.aborted=!0,y(t.complete)&&t.complete(f),e=""}}function b(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function A(t){var e,n=(t=t||{}).delimiter,r=t.newline,i=t.comments,s=t.step,o=t.preview,a=t.fastMode,c=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(c=t.escapeChar),("string"!=typeof n||d.BAD_DELIMITERS.indexOf(n)>-1)&&(n=","),i===n)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||d.BAD_DELIMITERS.indexOf(i)>-1)&&(i=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var u=0,l=!1;this.parse=function(t,h,f){if("string"!=typeof t)throw new Error("Input must be a string");var d=t.length,g=n.length,m=r.length,p=i.length,_=y(s);u=0;var A=[],E=[],v=[],T=0;if(!t)return D();if(a||!1!==a&&-1===t.indexOf(e)){for(var B=t.split(r),C=0;C<B.length;C++){if(v=B[C],u+=v.length,C!==B.length-1)u+=r.length;else if(f)return D();if(!i||v.substr(0,p)!==i){if(_){if(A=[],M(v.split(n)),P(),l)return D()}else M(v.split(n));if(o&&C>=o)return A=A.slice(0,o),D(!0)}}return D()}for(var O,S=t.indexOf(n,u),w=t.indexOf(r,u),I=new RegExp(b(c)+b(e),"g");;)if(t[u]!==e)if(i&&0===v.length&&t.substr(u,p)===i){if(-1===w)return D();u=w+m,w=t.indexOf(r,u),S=t.indexOf(n,u)}else if(-1!==S&&(S<w||-1===w))v.push(t.substring(u,S)),u=S+g,S=t.indexOf(n,u);else{if(-1===w)break;if(v.push(t.substring(u,w)),L(w+m),_&&(P(),l))return D();if(o&&A.length>=o)return D(!0)}else{for(O=u,u++;;){if(-1===(O=t.indexOf(e,O+1)))return f||E.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:A.length,index:u}),F();if(O===d-1)return F(t.substring(u,O).replace(I,e));if(e!==c||t[O+1]!==c){if(e===c||0===O||t[O-1]!==c){var R=N(-1===w?S:Math.min(S,w));if(t[O+1+R]===n){if(v.push(t.substring(u,O).replace(I,e)),u=O+1+R+g,S=t.indexOf(n,u),w=t.indexOf(r,u),_&&(P(),l))return D();if(o&&A.length>=o)return D(!0);break}var x=N(w);if(t.substr(O+1+x,m)===r){if(v.push(t.substring(u,O).replace(I,e)),L(O+1+x+m),S=t.indexOf(n,u),_&&(P(),l))return D();if(o&&A.length>=o)return D(!0);break}E.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:A.length,index:u}),O++}}else O++}if(_&&(P(),l))return D();if(o&&A.length>=o)return D(!0)}return F();function M(t){A.push(t),T=u}function N(e){var n=0;if(-1!==e){var r=t.substring(O+1,e);r&&""===r.trim()&&(n=r.length)}return n}function F(e){return f||(void 0===e&&(e=t.substr(u)),v.push(e),u=d,M(v),_&&P()),D()}function L(e){u=e,M(v),v=[],w=t.indexOf(r,u)}function D(t,e){return{data:e||!1?A[0]:A,errors:E,meta:{delimiter:n,linebreak:r,aborted:l,truncated:!!t,cursor:T+(h||0)}}}function P(){s(D(void 0,!0)),A=[],E=[]}},this.abort=function(){l=!0},this.getCharIndex=function(){return u}}function E(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var n in t)e[n]=E(t[n]);return e}function y(t){return"function"==typeof t}p.prototype=Object.create(p.prototype),p.prototype.constructor=p;const{ChunkStreamer:v}=g;function T(t){t=t||{},v.call(this,t),this.textDecoder=new TextDecoder(this._config.encoding),this.stream=async function(t){this._input=t;try{for await(const e of t)this.parseChunk(this.getStringChunk(e));this._finished=!0,this.parseChunk("")}catch(t){this._sendError(t)}},this._nextChunk=function(){},this.getStringChunk=function(t){return"string"==typeof t?t:this.textDecoder.decode(t,{stream:!0})}}T.prototype=Object.create(v.prototype),T.prototype.constructor=T;const B={id:"csv",module:"csv",name:"CSV",version:"4.1.0-alpha.4",extensions:["csv","tsv","dsv"],mimeTypes:["text/csv","text/tab-separated-values","text/dsv"],category:"table",parse:async(t,e)=>C((new TextDecoder).decode(t),e),parseText:(t,e)=>C(t,e),parseInBatches:function(t,e){var n;"auto"===(e={...e}).batchSize&&(e.batchSize=4e3);const r={...B.options.csv,...null===(n=e)||void 0===n?void 0:n.csv},i=new a;let s=!0,o=null,c=null,u=null;const l={...r,header:!1,download:!1,chunkSize:5242880,skipEmptyLines:!1,step(t){let n=t.data;if(r.skipEmptyLines){if(""===n.flat().join("").trim())return}const a=t.meta.cursor;if(s&&!o){if("auto"===r.header?O(n):Boolean(r.header))return void(o=n.map(S()))}s&&(s=!1,o||(o=w(r.columnPrefix,n.length)),u=function(t,e){const n=e?{}:[];for(let r=0;r<t.length;r++){const i=e&&e[r]||r;switch(typeof t[r]){case"number":case"boolean":n[i]={name:String(i),index:r,type:Float32Array};break;case"string":default:n[i]={name:String(i),index:r,type:Array}}}return n}(n,o)),r.optimizeMemoryUsage&&(n=JSON.parse(JSON.stringify(n)));const l=r.shape||"object-row-table";c=c||new f(u,{shape:l,...e});try{c.addRow(n);const t=c&&c.getFullBatch({bytesUsed:a});t&&i.enqueue(t)}catch(t){i.enqueue(t)}},complete(t){try{const e=t.meta.cursor,n=c&&c.getFinalBatch({bytesUsed:e});n&&i.enqueue(n)}catch(t){i.enqueue(t)}i.close()}};return g.parse(t,l,T),i},options:{csv:{shape:"object-row-table",optimizeMemoryUsage:!1,header:"auto",columnPrefix:"column",quoteChar:'"',escapeChar:'"',dynamicTyping:!0,comments:!1,skipEmptyLines:!0,delimitersToGuess:[",","\t","|",";"]}}};async function C(t,e){const n={...B.options.csv,...null==e?void 0:e.csv},s=function(t){return g.parse(t,{download:!1,dynamicTyping:!0,preview:1}).data[0]}(t),o="auto"===n.header?O(s):Boolean(n.header),a={...n,header:o,download:!1,transformHeader:o?S():void 0,error:t=>{throw new Error(t)}},c=g.parse(t,a),u=c.data,l=c.meta.fields||w(n.columnPrefix,s.length),h=n.shape||"object-row-table";switch(h){case"object-row-table":return{shape:"object-row-table",data:u.map(t=>Array.isArray(t)?r(t,l):t)};case"array-row-table":return{shape:"array-row-table",data:u.map(t=>Array.isArray(t)?t:i(t,l))};default:throw new Error(h)}}function O(t){return t&&t.every(t=>"string"==typeof t)}function S(){const t=new Set;return e=>{let n=e,r=1;for(;t.has(n);)n=`${e}.${r}`,r++;return t.add(n),n}}function w(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=[];for(let r=0;r<e;r++)n.push(`${t}${r+1}`);return n}},2199:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n(1402);const i="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source";Object(r.a)();class s{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=function(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(t){return null}}(n),this.id=t,this.config=e,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let t={};if(this.storage){const e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}function o(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let a;!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(a||(a={}));function c(t){return"string"!=typeof t?t:(t=t.toUpperCase(),a[t]||a.WHITE)}function u(t,e){if(!t)throw new Error(e||"Assertion failed")}globalThis,globalThis.self||globalThis.window||globalThis.global;const l=globalThis.window||globalThis.self||globalThis.global,h=(globalThis.document,globalThis.process||{});globalThis.console,globalThis.navigator;function f(){let t;var e,n;if(Object(r.a)()&&l.performance)t=null==l||null===(e=l.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in h){var i;const e=null==h||null===(i=h.hrtime)||void 0===i?void 0:i.call(h);t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}const d={debug:Object(r.a)()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},g={enabled:!0,level:0};function m(){}const p={},_={once:!0};class b{constructor(){let{id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};this.id=void 0,this.VERSION=i,this._startTs=f(),this._deltaTs=f(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=t,this.userData={},this._storage=new s("__probe-".concat(this.id,"__"),g),this.timeStamp("".concat(this.id," started")),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),i=t;for(const n of r){const r=i[n];"function"==typeof r&&(e.find(t=>n===t)||(i[n]=r.bind(t)))}}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((f()-this._startTs).toPrecision(10))}getDelta(){return Number((f()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,e){this._storage.setConfiguration({[t]:e})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,e){u(t,e)}warn(t){return this._getLogFunction(0,t,d.warn,arguments,_)}error(t){return this._getLogFunction(0,t,d.error,arguments)}deprecated(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}removed(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}probe(t,e){return this._getLogFunction(t,e,d.log,arguments,{time:!0,once:!0})}log(t,e){return this._getLogFunction(t,e,d.debug,arguments)}info(t,e){return this._getLogFunction(t,e,console.info,arguments)}once(t,e){return this._getLogFunction(t,e,d.debug||d.info,arguments,_)}table(t,e,n){return e?this._getLogFunction(t,e,console.table||m,n&&[n],{tag:y(e)}):m}image(t){let{logLevel:e,priority:n,image:i,message:s="",scale:a=1}=t;return this._shouldLog(e||n)?Object(r.a)()?function(t){let{image:e,message:n="",scale:r=1}=t;if("string"==typeof e){const t=new Image;return t.onload=()=>{const e=o(t,n,r);console.log(...e)},t.src=e,m}const i=e.nodeName||"";if("img"===i.toLowerCase())return console.log(...o(e,n,r)),m;if("canvas"===i.toLowerCase()){const t=new Image;return t.onload=()=>console.log(...o(t,n,r)),t.src=e.toDataURL(),m}return m}({image:i,message:s,scale:a}):function(t){let{image:e,message:n="",scale:r=1}=t;return console.warn("removed"),m}({image:i,message:s,scale:a}):m}time(t,e){return this._getLogFunction(t,e,console.time?console.time:console.info)}timeEnd(t,e){return this._getLogFunction(t,e,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,e){return this._getLogFunction(t,e,console.timeStamp||m)}group(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=E({logLevel:t,message:e,opts:n}),{collapsed:i}=n;return r.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||m)}withGroup(t,e,n){this.group(t,e)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=A(t)}_getLogFunction(t,e,n,i,s){if(this._shouldLog(t)){s=E({logLevel:t,message:e,args:i,opts:s}),u(n=n||s.method),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=f();const o=s.tag||s.message;if(s.once&&o){if(p[o])return m;p[o]=f()}return e=function(t,e,n){if("string"==typeof e){const i=n.time?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function(t,e,n){if(!r.a&&"string"==typeof t){if(e){const n=c(e);t="[".concat(n,"m").concat(t,"[39m")}if(n){const e=c(n);t="[".concat(e+10,"m").concat(t,"[49m")}}return t}(e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,s.message,s),n.bind(console,e,...s.args)}return m}}function A(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return u(Number.isFinite(e)&&e>=0),e}function E(t){const{logLevel:e,message:n}=t;t.logLevel=A(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const i=typeof t.message;return u("string"===i||"object"===i),Object.assign(t,{args:r},t.opts)}function y(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}b.VERSION=i},2200:function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));var r=n(808);const i="void main() {gl_FragColor = vec4(0);}",s="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",o="#version 300 es\n".concat(s);function a(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,s]=n;if(!e.includes(r)||!i||!s)return null;return{qualifier:r,type:i,name:s.split(";")[0]}}function c(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:a}=t;if(!n)return 300===e?o:e>300?"#version ".concat(e,"\n").concat(s):i;const c=u(n,r);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(r," ").concat(n,";\nout vec4 ").concat(a,";\nvoid main() {\n  ").concat(a," = ").concat(c,";\n}"):"varying ".concat(r," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(c,";\n}")}function u(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Object(r.a)(!1),null}}var l=n(29),h=n(134),f=n(2159),d=n(39);class g{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}setupResources(t){for(const e of this.bindings)this._setupTransformFeedback(e,t)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:e}=this;return e.length>0&&(t=Object.assign({},t,{varyings:e})),t}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:r}=e;return{attributes:Object.assign({},n,t.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:e}=this.bindings[this.currentIndex],n=t?e[t]:null;return n?n instanceof h.a?n:n.buffer:null}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:e}=t,n=this.getBuffer(e);return n?n.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Object(d.a)(Object(l.j)(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:e={}}=t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const t in this.feedbackMap){const r=this.feedbackMap[t];t in e&&(n[r]=t)}Object.assign(n,t.feedbackBuffers);for(const t in n){const r=n[t];if("string"==typeof r){const i=e[r],{byteLength:s,usage:o,accessor:a}=i;n[t]=this._createNewBuffer(t,{byteLength:s,usage:o,accessor:a})}}return n}_setupBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const n=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:e,feedbackBuffers:n})}_setupTransformFeedback(t,e){let{model:n}=e;const{program:r}=n;t.transformFeedback=new f.a(this.gl,{program:r,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:e}=this._swapBuffers(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceBuffers:t,feedbackBuffers:e})}}_updateBinding(t,e){return t?(Object.assign(t.sourceBuffers,e.sourceBuffers),Object.assign(t.feedbackBuffers,e.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},e.sourceBuffers),feedbackBuffers:Object.assign({},e.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const e=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(const r in this.feedbackMap){const i=this.feedbackMap[r];e[r]=t.feedbackBuffers[i],n[i]=t.sourceBuffers[r],Object(d.a)(n[i]instanceof h.a)}return{sourceBuffers:e,feedbackBuffers:n}}_createNewBuffer(t,e){const n=new h.a(this.gl,e);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}var m=n(955),p=n(425),_=n(275),b=n(1406);function A(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const t=parseInt(n[1],10);Number.isFinite(t)&&(e=t)}return e}var E=n(819);const y={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null};function v(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:i,targetTexture:s}=t;let o=Object.keys(n).length,c=null;const u={};let l=e,h={};if(o>0||i){const t=l.split("\n"),e=t.slice();if(t.forEach((t,s,l)=>{if(o>0){const i=function(t,e){const n={},i=function(t){return a(t,["attribute","in"])}(t);if(!i)return null;const{type:s,name:o}=i;if(o&&e[o]){const e="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:i,sizeName:a,uniformDeclerations:c}=function(t){const e="".concat("transform_uSampler_").concat(t),n="".concat("transform_uSize_").concat(t),r="  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}(o),u=function(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Object(r.a)(!1),null}}(s),l="  ".concat(s," ").concat(o," = transform_getInput(").concat(i,", ").concat(a,").").concat(u,";\n");n[i]=o;return{updatedLine:e,inject:{"vs:#decl":c,"vs:#main-start":l},samplerTextureMap:n}}return null}(t,n);if(i){const{updatedLine:t,inject:n}=i;e[s]=t,h=Object(E.b)([h,n]),Object.assign(u,i.samplerTextureMap),o--}}i&&!c&&(c=function(t,e){const n=a(t,["varying","out"]);if(!n)return null;return n.name===e?n.type:null}(t,i))}),i){Object(d.a)(s);const t="".concat("transform_uSize_").concat(i),e={"vs:#decl":"uniform vec2 ".concat(t,";\n"),"vs:#main-start":"     vec2 ".concat("transform_position"," = transform_getPos(").concat(t,");\n     gl_Position = vec4(").concat("transform_position",", 0, 1.);\n")};h=Object(E.b)([h,e])}l=e.join("\n")}return{vs:l,targetTextureType:c,inject:h,samplerTextureMap:u}}const T={10241:9728,10240:9728,10242:33071,10243:33071};class B{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this._processVertexShader(t);return Object.assign({},t,e)}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e,sourceTextures:n,framebuffer:r,targetTexture:i}=this.bindings[this.currentIndex],s=Object.assign({},e,t.attributes),o=Object.assign({},t.uniforms),a=Object.assign({},t.parameters);let c=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){s.transform_elementID=this.elementIDBuffer;for(const t in this.samplerTextureMap){const e=this.samplerTextureMap[t];o[t]=n[e]}this._setSourceTextureParameters();const t=function(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let s,o;n&&(({width:s,height:o}=r),i["".concat("transform_uSize_").concat(n)]=[s,o]);for(const t in e)({width:s,height:o}=e[t]),i["".concat("transform_uSize_").concat(t)]=[s,o];return i}({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i});Object.assign(o,t)}return this.hasTargetTexture&&(c=!1,a.viewport=[0,0,r.width,r.height]),{attributes:s,framebuffer:r,uniforms:o,discard:c,parameters:a}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:e}=this.bindings[this.currentIndex],n=Object(m.c)(e);if(!t)return n;const i=n.constructor,s=function(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Object(r.a)(!1),null}}(this.targetTextureType),o=new i(n.length*s/4);let a=0;for(let t=0;t<n.length;t+=4)for(let e=0;e<s;e++)o[a++]=n[t+e];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:e,_swapTexture:n}=t;this._swapTexture=n,this.targetTextureVarying=e,this.hasTargetTexture=e,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:e,textureOrReference:n}=t;if(n instanceof p.a)return n;const r=e[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}_setupTextures(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e,_sourceTextures:n={},_targetTexture:r}=t,i=this._createTargetTexture({sourceTextures:n,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:e,sourceTextures:n,targetTexture:i}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if("number"!=typeof t||this.elementCount>=t)return;const e=new Float32Array(t);e.forEach((t,e,n)=>{n[e]=e}),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new h.a(this.gl,{data:e,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:t,targetTexture:e}=this._swapTextures(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceTextures:t,targetTexture:e})}}_updateBinding(t,e){const{sourceBuffers:n,sourceTextures:r,targetTexture:i}=e;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,r),Object.assign(t.sourceBuffers,n),i){t.targetTexture=i;const{width:e,height:n}=i,{framebuffer:r}=t;r?(r.update({attachments:{36064:i},resizeAttachments:!1}),r.resize({width:e,height:n})):t.framebuffer=new _.a(this.gl,{id:"transform-framebuffer",width:e,height:n,attachments:{36064:i}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:e}=this.bindings[t];for(const t in e)e[t].setParameters(T)}_swapTextures(t){if(!this._swapTexture)return null;const e=Object.assign({},t.sourceTextures);e[this._swapTexture]=t.targetTexture;return{sourceTextures:e,targetTexture:t.sourceTextures[this._swapTexture]}}_createNewTexture(t){const e=Object(b.a)(t,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=e,e}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:e,targetTexture:n}=this.bindings[this.currentIndex],{vs:r,uniforms:i,targetTextureType:s,inject:o,samplerTextureMap:a}=v({vs:t.vs,sourceTextureMap:e,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),u=Object(E.b)([t.inject||{},o]);this.targetTextureType=s,this.samplerTextureMap=a;return{vs:r,fs:t._fs||c({version:A(r),input:this.targetTextureVarying,inputType:s,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[y].concat(t.modules||[]):t.modules,uniforms:i,inject:u}}}var C=n(188),O=n(798);class S{static isSupported(t){return Object(l.j)(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(e),Object.seal(this)}delete(){const{model:t,bufferTransform:e,textureTransform:n}=this;t&&t.delete(),e&&e.delete(),n&&n.delete()}run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:e=!0}=t,n=this._updateDrawOptions(t);e&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let t=!1;const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e)t=t||n.swap();Object(d.a)(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e){const e=n.getData(t);if(e)return e}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e)n.update(t)}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:e}=this;this._buildResourceTransforms(e,t),t=this._updateModelProps(t),this.model=new O.a(e,Object.assign({},t,{fs:t.fs||c({version:A(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let e=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const t of n)e=t.updateModelProps(e);return e}_buildResourceTransforms(t,e){(function(t){if(!Object(C.a)(t.feedbackBuffers)||!Object(C.a)(t.feedbackMap)||t.varyings&&t.varyings.length>0)return!0;return!1})(e)&&(this.bufferTransform=new g(t,e)),function(t){if(!Object(C.a)(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)return!0;return!1}(e)&&(this.textureTransform=new B(t,e)),Object(d.a)(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let e=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const t of n)e=Object.assign(e,t.getDrawOptions(e));return e}}},2201:function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var r=n(1461),i=n(29),s=n(134),o=n(243),a=n(957),c=n(597);class u extends c.a{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Array.isArray(t)?{children:t}:t;const{children:e=[]}=t;i.k.assert(e.every(t=>t instanceof c.a),"every child must an instance of ScenegraphNode"),super(t),this.children=e}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const t of e)Array.isArray(t)?this.add(...t):this.children.push(t);return this}remove(t){const e=this.children,n=e.indexOf(t);return n>-1&&e.splice(n,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(t=>t.delete()),this.removeAll(),super.delete()}getBounds(){const t=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((e,n)=>{let{worldMatrix:r}=n;const i=e.getBounds();if(!i)return;const[s,o]=i,c=new a.a(s).add(o).divide([2,2,2]);r.transformAsPoint(c,c);const u=new a.a(o).subtract(s).divide([2,2,2]);r.transformAsVector(u,u);for(let e=0;e<8;e++){const n=new a.a(1&e?-1:1,2&e?-1:1,4&e?-1:1).multiply(u).add(c);for(let e=0;e<3;e++)t[0][e]=Math.min(t[0][e],n[e]),t[1][e]=Math.max(t[1][e],n[e])}}),Number.isFinite(t[0][0])?t:null}traverse(t){let{worldMatrix:e=new r.a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new r.a(e).multiplyRight(this.matrix);for(const e of this.children)e instanceof u?e.traverse(t,{worldMatrix:n}):t(e,{worldMatrix:n})}}var l=n(39),h=n(2162);const f={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},d={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function g(t){if(!t._animation){const e=d[t.componentType],n=f[t.type],r=n*t.count,{buffer:i,byteOffset:s}=t.bufferView.data,o=new e(i,s+(t.byteOffset||0),r);if(1===n)t._animation=Array.from(o);else{const e=[];for(let t=0;t<o.length;t+=n)e.push(Array.from(o.slice(t,t+n)));t._animation=e}}return t._animation}const m=new r.a;const p=new h.a;function _(t,e,n,r){let{input:s,interpolation:o,output:a}=e;const c=t%s[s.length-1],u=s.findIndex(t=>t>=c),h=Math.max(0,u-1);if(!Array.isArray(n[r]))switch(r){case"translation":n[r]=[0,0,0];break;case"rotation":n[r]=[0,0,0,1];break;case"scale":n[r]=[1,1,1];break;default:i.k.warn("Bad animation path ".concat(r))()}Object(l.a)(n[r].length===a[h].length);const f=s[h],d=s[u];switch(o){case"STEP":!function(t,e,n){for(let r=0;r<n.length;r++)t[e][r]=n[r]}(n,r,a[h]);break;case"LINEAR":if(d>f){const t=(c-f)/(d-f);!function(t,e,n,r,i){if("rotation"===e){p.slerp({start:n,target:r,ratio:i});for(let n=0;n<p.length;n++)t[e][n]=p[n]}else for(let s=0;s<n.length;s++)t[e][s]=i*r[s]+(1-i)*n[s]}(n,r,a[h],a[u],t)}break;case"CUBICSPLINE":if(d>f){const t=(c-f)/(d-f),e=d-f;!function(t,e,n){let{p0:r,outTangent0:i,inTangent1:s,p1:o,tDiff:a,ratio:c}=n;for(let n=0;n<t[e].length;n++){const u=i[n]*a,l=s[n]*a;t[e][n]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*r[n]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*u+(-2*Math.pow(c,3)+3*Math.pow(c,2))*o[n]+(Math.pow(c,3)-Math.pow(c,2))*l}}(n,r,{p0:a[3*h+1],outTangent0:a[3*h+2],inTangent1:a[3*u+0],p1:a[3*u+1],tDiff:e,ratio:t})}break;default:i.k.warn("Interpolation ".concat(o," not supported"))()}}class b{constructor(t){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,t)}animate(t){if(!this.playing)return;const e=(t/1e3-this.startTime)*this.speed;this.channels.forEach(t=>{let{sampler:n,target:r,path:i}=t;_(e,n,r,i),function(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){const n=m.fromQuaternion(t.rotation);e.matrix.multiplyRight(n)}t.scale&&e.matrix.scale(t.scale)}(r,r._node)})}}class A{constructor(t){this.animations=t.animations.map((e,n)=>{const r=e.name||"Animation-".concat(n),i=e.samplers.map(e=>{let{input:n,interpolation:r="LINEAR",output:i}=e;return{input:g(t.accessors[n]),interpolation:r,output:g(t.accessors[i])}}),s=e.channels.map(e=>{let{sampler:n,target:r}=e;return{sampler:i[n],target:t.nodes[r.node],path:r.path}});return new b({name:r,channels:s})})}animate(t){this.setTime(t)}setTime(t){this.animations.forEach(e=>e.animate(t))}getAnimations(){return this.animations}}var E=n(2211),y=n(798);class v extends c.a{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.onBeforeRender=null,this.AfterRender=null,t instanceof y.a?(this.model=t,this._setModelNodeProps(e)):this.model=new y.a(t,e),this.bounds=null,this.managedResources=e.managedResources||[]}setProps(t){return super.setProps(t),this._setModelNodeProps(t),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(t=>t.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(t){this.model.setProps(t)}}var T=n(1417);function B(t,e){return Object(i.j)(t)?"#version 300 es\n".concat(e):e}const C={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},O={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class S{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.options=Object.assign({},O,e)}instantiate(t){this.gltf=t;return(t.scenes||[]).map(t=>this.createScene(t))}createAnimator(){return Array.isArray(this.gltf.animations)?new A(this.gltf):null}createScene(t){const e=(t.nodes||[]).map(t=>this.createNode(t));return new u({id:t.name||t.id,children:e})}createNode(t){if(!t._node){const e=(t.children||[]).map(t=>this.createNode(t));t.mesh&&e.push(this.createMesh(t.mesh));const n=new u({id:t.name||t.id,children:e});if(t.matrix)n.setMatrix(t.matrix);else{if(n.matrix.identity(),t.translation&&n.matrix.translate(t.translation),t.rotation){const e=(new r.a).fromQuaternion(t.rotation);n.matrix.multiplyRight(e)}t.scale&&n.matrix.scale(t.scale)}t._node=n}return t._node}createMesh(t){if(!t._mesh){const e=(t.primitives||[]).map((e,n)=>this.createPrimitive(e,n,t)),n=new u({id:t.name||t.id,children:e});t._mesh=n}return t._mesh}getVertexCount(t){i.k.warn("getVertexCount() not found")()}createPrimitive(t,e,n){const r=function(t,e){const{id:n,drawMode:r,vertexCount:s,attributes:o,modelOptions:a}=e,c=new T.a(t,e);i.k.info(4,"createGLTFModel defines: ",c.defines)();const u=[];u.push(...c.generatedTextures),u.push(...Object.values(o).map(t=>t.buffer));const l=new v(t,{id:n,drawMode:r,vertexCount:s,modules:[E.a],parameters:c.parameters,vs:B(t,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:B(t,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:u,...a,defines:{...c.defines,...a.defines}});return l.setProps({attributes:o}),l.setUniforms(c.uniforms),l}(this.gl,Object.assign({id:t.name||"".concat(n.name||n.id,"-primitive-").concat(e),drawMode:t.mode||4,vertexCount:t.indices?t.indices.count:this.getVertexCount(t.attributes),attributes:this.createAttributes(t.attributes,t.indices),material:t.material},this.options));return r.bounds=[t.attributes.POSITION.min,t.attributes.POSITION.max],r}createAttributes(t,e){const n={};return Object.keys(t).forEach(e=>{n[e]=this.createAccessor(t[e],this.createBuffer(t[e],this.gl.ARRAY_BUFFER))}),e&&(n.indices=this.createAccessor(e,this.createBuffer(e,this.gl.ELEMENT_ARRAY_BUFFER))),i.k.info(4,"glTF Attributes",{attributes:t,indices:e,generated:n})(),n}createBuffer(t,e){t.bufferView||(t.bufferView={});const{bufferView:n}=t;return n.lumaBuffers||(n.lumaBuffers={}),n.lumaBuffers[e]||(n.lumaBuffers[e]=new s.a(this.gl,{id:"from-".concat(n.id),data:n.data||t.value,target:e})),n.lumaBuffers[e]}createAccessor(t,e){return new o.a({buffer:e,offset:t.byteOffset||0,stride:t.bufferView.byteStride||0,type:t.componentType,size:C[t.type]})}createSampler(t){return t}needsPOT(){return!1}}function w(t,e,n){const r=new S(t,n);return{scenes:r.instantiate(e),animator:r.createAnimator()}}},2206:function(t,e,n){"use strict";n.d(e,"a",(function(){return F}));var r=n(161),i=n(222),s=n(275),o=n(29),a=n(431),c=n(39);const u={5126:T.bind(null,"uniform1fv",m,1,B),35664:T.bind(null,"uniform2fv",m,2,B),35665:T.bind(null,"uniform3fv",m,3,B),35666:T.bind(null,"uniform4fv",m,4,B),5124:T.bind(null,"uniform1iv",p,1,B),35667:T.bind(null,"uniform2iv",p,2,B),35668:T.bind(null,"uniform3iv",p,3,B),35669:T.bind(null,"uniform4iv",p,4,B),35670:T.bind(null,"uniform1iv",p,1,B),35671:T.bind(null,"uniform2iv",p,2,B),35672:T.bind(null,"uniform3iv",p,3,B),35673:T.bind(null,"uniform4iv",p,4,B),35674:T.bind(null,"uniformMatrix2fv",m,4,C),35675:T.bind(null,"uniformMatrix3fv",m,9,C),35676:T.bind(null,"uniformMatrix4fv",m,16,C),35678:v,35680:v,5125:T.bind(null,"uniform1uiv",_,1,B),36294:T.bind(null,"uniform2uiv",_,2,B),36295:T.bind(null,"uniform3uiv",_,3,B),36296:T.bind(null,"uniform4uiv",_,4,B),35685:T.bind(null,"uniformMatrix2x3fv",m,6,C),35686:T.bind(null,"uniformMatrix2x4fv",m,8,C),35687:T.bind(null,"uniformMatrix3x2fv",m,6,C),35688:T.bind(null,"uniformMatrix3x4fv",m,12,C),35689:T.bind(null,"uniformMatrix4x2fv",m,8,C),35690:T.bind(null,"uniformMatrix4x3fv",m,12,C),35678:v,35680:v,35679:v,35682:v,36289:v,36292:v,36293:v,36298:v,36299:v,36300:v,36303:v,36306:v,36307:v,36308:v,36311:v},l={},h={},f={},d=[0];function g(t,e,n,r){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(d[0]=t,t=d);const i=t.length;if(i%e&&o.k.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=r[i];s||(s=new n(i),r[i]=s);for(let e=0;e<i;e++)s[e]=t[e];return s}function m(t,e){return g(t,e,Float32Array,l)}function p(t,e){return g(t,e,Int32Array,h)}function _(t,e){return g(t,e,Uint32Array,f)}function b(t,e,n){const r=u[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function A(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const e=t.match(/([^[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function E(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!isFinite(t)||(!0===t||!1===t||(t instanceof i.a||(t instanceof a.a||t instanceof s.a&&Boolean(t.texture))))}function y(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let t=0,e=n.length;t<e;++t)r[t]=n[t]}else t[e]=n.slice();else t[e]=n}function v(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function T(t,e,n,r){let i=null,s=null;return(o,a,u)=>{const l=e(u,n),h=l.length;let f=!1;if(null===i)i=new Float32Array(h),s=h,f=!0;else{Object(c.a)(s===h,"Uniform length cannot change.");for(let t=0;t<h;++t)if(l[t]!==i[t]){f=!0;break}}return f&&(r(o,t,a,l),i.set(l)),f}}function B(t,e,n,r){t[e](n,r)}function C(t,e,n,r){t[e](n,!1,r)}var O=n(435),S=n(243),w=n(312);class I{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const e=this.getAttributeInfo(t);return e?e.location:-1}getAttributeAccessor(t){const e=this.getAttributeInfo(t);return e?e.accessor:null}getVaryingInfo(t){const e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const e=this.getVaryingInfo();return e?e.location:-1}getVaryingAccessor(t){const e=this.getVaryingInfo();return e?e.accessor:null}_readAttributesFromProgram(t){const{gl:e}=t,n=e.getProgramParameter(t.handle,35721);for(let r=0;r<n;r++){const{name:n,type:i,size:s}=e.getActiveAttrib(t.handle,r),o=e.getAttribLocation(t.handle,n);o>=0&&this._addAttribute(o,n,i,s)}this.attributeInfos.sort((t,e)=>t.location-e.location)}_readVaryingsFromProgram(t){const{gl:e}=t;if(!Object(o.j)(e))return;const n=e.getProgramParameter(t.handle,35971);for(let r=0;r<n;r++){const{name:n,type:i,size:s}=e.getTransformFeedbackVarying(t.handle,r);this._addVarying(r,n,i,s)}this.varyingInfos.sort((t,e)=>t.location-e.location)}_addAttribute(t,e,n,r){const{type:i,components:s}=Object(w.a)(n),o={type:i,size:r*s};this._inferProperties(t,e,o);const a={location:t,name:e,accessor:new S.a(o)};this.attributeInfos.push(a),this.attributeInfosByLocation[t]=a,this.attributeInfosByName[a.name]=a}_inferProperties(t,e,n){/instance/i.test(e)&&(n.divisor=1)}_addVarying(t,e,n,r){const{type:i,components:s}=Object(w.a)(n),o={location:t,name:e,accessor:new S.a({type:i,size:r*s})};this.varyingInfos.push(o),this.varyingInfosByName[o.name]=o}}var R=n(200),x=n(188);const M=35981,N=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class F extends r.a{get[Symbol.toStringTag](){return"Program"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Program","v6.0",N),this._isCached=!1,this.initialize(e),Object.seal(this),this._setId(e.id)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:e,vs:n,fs:r,varyings:i,bufferMode:s=M}=t;return this.hash=e||"",this.vs="string"==typeof n?new O.b(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs="string"==typeof r?new O.a(this.gl,{id:"".concat(t.id,"-fs"),source:r}):r,Object(c.a)(this.vs instanceof O.b),Object(c.a)(this.fs instanceof O.a),this.uniforms={},this._textureUniforms={},i&&i.length>0&&(Object(o.a)(this.gl),this.varyings=i,this.gl2.transformFeedbackVaryings(this.handle,i,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new I(this),this.setProps(t)}delete(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:e,drawMode:n=4,vertexCount:r,offset:i=0,start:s,end:a,isIndexed:u=!1,indexType:l=5123,instanceCount:h=0,isInstanced:f=h>0,vertexArray:d=null,transformFeedback:g,framebuffer:m,parameters:p={},uniforms:_,samplers:b}=t;if((_||b)&&(o.k.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(_||{})),o.k.priority>=e){const t=m?m.id:"default",i="mode=".concat(Object(R.a)(this.gl,n)," verts=").concat(r," ")+"instances=".concat(h," indexType=").concat(Object(R.a)(this.gl,l)," ")+"isInstanced=".concat(f," isIndexed=").concat(u," ")+"Framebuffer=".concat(t);o.k.log(e,i)()}return Object(c.a)(d),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||f&&0===h)&&(d.bindForDraw(r,h,()=>{if(void 0!==m&&(p=Object.assign({},p,{framebuffer:m})),g){const t=Object(w.c)(n);g.begin(t)}this._bindTextures(),Object(o.o)(this.gl,p,()=>{u&&f?this.gl2.drawElementsInstanced(n,r,l,i,h):u&&Object(o.j)(this.gl)&&!isNaN(s)&&!isNaN(a)?this.gl2.drawRangeElements(n,s,a,r,l,i):u?this.gl.drawElements(n,r,l,i):f?this.gl2.drawArraysInstanced(n,i,r,h):this.gl.drawArrays(n,i,r)}),g&&g.end()}),!0)}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.k.priority>=2&&function(t,e,n){for(const r in t){const i=t[r];if((!n||Boolean(n[r]))&&!E(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}}(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const e in t){const n=t[e],r=this._uniformSetters[e];if(r){let t=n,o=!1;if(t instanceof s.a&&(t=t.texture),t instanceof i.a)if(o=this.uniforms[e]!==n,o){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const n=t,{textureIndex:i}=r;n.bind(i),t=i,this._textureUniforms[e]=n}else t=r.textureIndex;else this._textureUniforms[e]&&delete this._textureUniforms[e];(r(t)||o)&&y(this.uniforms,e,n)}}return this}_areTexturesRenderable(){let t=!0;for(const e in this._textureUniforms){const n=this._textureUniforms[e];n.update(),t=t&&n.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const e=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(e)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const e=this.gl.getAttachedShaders(t),n={};for(const t of e){switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new O.b({handle:t});break;case 35632:n.fs=new O.a({handle:t})}}return n}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const t=this._getName();this.id=Object(x.c)(t)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),o.k.time(4,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),o.k.timeEnd(4,"linkProgram for ".concat(this._getName()))(),t.debug||o.k.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));t.validateProgram(this.handle);if(!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let e=0;e<this._uniformCount;e++){const n=this.gl.getActiveUniform(this.handle,e),{name:r}=A(n.name);let i=t.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=b(t,i,n),n.size>1)for(let e=0;e<n.size;e++)i=t.getUniformLocation(this.handle,"".concat(r,"[").concat(e,"]")),this._uniformSetters["".concat(r,"[").concat(e,"]")]=b(t,i,n)}this._textureIndexCounter=0}getActiveUniforms(t,e){return this.gl2.getActiveUniforms(this.handle,t,e)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,e){return this.gl2.getActiveUniformBlockParameter(this.handle,t,e)}uniformBlockBinding(t,e){this.gl2.uniformBlockBinding(this.handle,t,e)}}},2209:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var r=n(29),i=n(607),s=n(39),o=n(161),a=n(1456),c=n(810);class u extends o.a{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=Object(r.j)(t),i=Object(a.c)(t,c.a.TIMER_QUERY);let o=n||i;for(const t of e)switch(t){case"queries":o=o&&n;break;case"timers":o=o&&i;break;default:Object(s.a)(!1)}return o}constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(t?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(t){return this._queryPending||(this.target=t,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,34919);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let e=0;return this._pollingPromise=new Promise((n,r)=>{const i=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):e++>t?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(i)};requestAnimationFrame(i)}),this._pollingPromise}_createHandle(){return u.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}var l=n(275),h=n(590);const f=Object(h.a)()&&"undefined"!=typeof document;let d=0;class g{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:e=(t=>Object(r.c)(t)),onAddHTML:n=null,onInitialize:s=(()=>{}),onRender:o=(()=>{}),onFinalize:a=(()=>{}),onError:c,gl:u=null,glOptions:l={},debug:h=!1,createFramebuffer:f=!1,autoResizeViewport:g=!0,autoResizeDrawingBuffer:m=!0,stats:p=i.a.get("animation-loop-".concat(d++))}=t;let{useDevicePixels:_=!0}=t;"useDevicePixelRatio"in t&&(r.k.deprecated("useDevicePixelRatio","useDevicePixels")(),_=t.useDevicePixelRatio),this.props={onCreateContext:e,onAddHTML:n,onInitialize:s,onRender:o,onFinalize:a,onError:c,gl:u,glOptions:l,debug:h,createFramebuffer:f},this.gl=u,this.needsRedraw=null,this.timeline=null,this.stats=p,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:g,autoResizeDrawingBuffer:m,useDevicePixels:_}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return Object(s.a)("string"==typeof t),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const e=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=u.isSupported(this.gl,["timers"])?new u(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(t=>{this._running&&(this._addCallbackData(t||{}),!1!==t&&this._startLoop())});return this.props.onError&&e.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(t=>{this._resolveNextFrame=t})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=document.getElementById(t);return n?Number(n.value):e}setViewParameters(){return r.k.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=f?new Promise((t,e)=>{f&&"complete"===document.readyState?t(document):window.addEventListener("load",()=>{t(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):(e=t,"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e));var e}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):(e=t,"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60));var e}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:e,aspect:n}=this._getSizeAndAspect();t===this.animationProps.width&&e===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=e,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){"object"==typeof t&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&"undefined"!=typeof OffscreenCanvas&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?Object(r.h)(this.props.gl,t):this.onCreateContext(t),!Object(r.i)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Object(r.l)(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);const n=this.props.onAddHTML(e);n&&(e.innerHTML=n)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight;let n=1;const{canvas:r}=this.gl;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:t>0&&e>0&&(n=t/e),{width:t,height:e,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&Object(r.m)(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new l.a(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}},221:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s}));var r=n(416);function i(t){var e;if(!t)return!1;Array.isArray(t)&&(t=t[0]);return Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions)}function s(t){var e,n;let s;return Object(r.a)(t,"null loader"),Object(r.a)(i(t),"invalid loader"),Array.isArray(t)&&(s=t[1],t=t[0],t={...t,options:{...t.options,...s}}),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}},2211:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[n(605).a]}},2217:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={name:"Terrain",id:"terrain",module:"terrain",version:"3.4.14",worker:!0,extensions:["png","pngraw","jpg","jpeg","gif","webp","bmp"],mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp"],options:{terrain:{tesselator:"auto",bounds:null,meshMaxError:10,elevationDecoder:{rScaler:1,gScaler:0,bScaler:0,offset:0},skirtHeight:null}}}},222:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(29),i=n(161),s=n(134),o=n(324),a=n(39),c=n(188);const u=[9729,9728],l=globalThis.WebGLBuffer||function(){};class h extends i.a{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:n,linearFiltering:r}=e;let i=!0;return n&&(i=i&&Object(o.d)(t,n),i=i&&(!r||Object(o.e)(t,n))),i}constructor(t,e){const{id:n=Object(c.c)("texture"),handle:r,target:i}=e;super(t,{id:n,handle:r}),this.target=i,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data;if(e instanceof Promise)return e.then(e=>this.initialize(Object.assign({},t,{pixels:e,data:e}))),this;const n="undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement;if(n&&e.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,e.addEventListener("loadeddata",()=>this.initialize(t)),this;const{pixels:i=null,format:s=6408,border:o=0,recreate:a=!1,parameters:c={},pixelStore:u={},textureUnit:l}=t;e||(e=i);let{width:h,height:f,dataFormat:d,type:g,compressed:m=!1,mipmaps:p=!0}=t;const{depth:_=0}=t;return({width:h,height:f,compressed:m,dataFormat:d,type:g}=this._deduceParameters({format:s,type:g,dataFormat:d,compressed:m,data:e,width:h,height:f})),this.width=h,this.height=f,this.depth=_,this.format=s,this.type=g,this.dataFormat=d,this.border=o,this.textureUnit=l,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),p&&this._isNPOT()&&(r.k.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),p=!1,this._updateForNPOT(c)),this.mipmaps=p,this.setImageData({data:e,width:h,height:f,depth:_,format:s,type:g,dataFormat:d,border:o,mipmaps:p,parameters:u,compressed:m}),p&&this.generateMipmap(),this.setParameters(c),a&&(this.data=e),n&&(this._video={video:e,parameters:c,lastTime:e.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?e.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:e,lastTime:n}=this._video;if(n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:e}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:e,width:n,mipmaps:r=!1}=t;return n!==this.width||e!==this.height?this.initialize({width:n,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(r.k.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Object(r.o)(this.gl,t,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:e=this.target,pixels:n=null,level:i=0,format:s=this.format,border:c=this.border,offset:u=0,parameters:l={}}=t;let{data:h=null,type:f=this.type,width:d=this.width,height:g=this.height,dataFormat:m=this.dataFormat,compressed:p=!1}=t;h||(h=n),({type:f,dataFormat:m,compressed:p,width:d,height:g}=this._deduceParameters({format:s,type:f,dataFormat:m,compressed:p,data:h,width:d,height:g}));const{gl:_}=this;_.bindTexture(this.target,this.handle);let b,A=null;({data:h,dataType:A}=this._getDataType({data:h,compressed:p}));let E=0;if(Object(r.o)(this.gl,l,()=>{switch(A){case"null":_.texImage2D(e,i,s,d,g,c,m,f,h);break;case"typed-array":_.texImage2D(e,i,s,d,g,c,m,f,h,u);break;case"buffer":b=Object(r.a)(_),b.bindBuffer(35052,h.handle||h),b.texImage2D(e,i,s,d,g,c,m,f,u),b.bindBuffer(35052,null);break;case"browser-object":Object(r.j)(_)?_.texImage2D(e,i,s,d,g,c,m,f,h):_.texImage2D(e,i,s,m,f,h);break;case"compressed":for(const[t,n]of h.entries())_.compressedTexImage2D(e,t,n.format,n.width,n.height,c,n.data),E+=n.levelSize;break;default:Object(a.a)(!1,"Unknown image data type")}}),"compressed"===A)this._trackAllocatedMemory(E,"Texture");else if(h&&h.byteLength)this._trackAllocatedMemory(h.byteLength,"Texture");else{const t=o.a[this.dataFormat]||4,e=o.c[this.type]||1;this._trackAllocatedMemory(this.width*this.height*t*e,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:e=this.target,pixels:n=null,data:i=null,x:o=0,y:c=0,width:u=this.width,height:h=this.height,level:f=0,format:d=this.format,type:g=this.type,dataFormat:m=this.dataFormat,compressed:p=!1,offset:_=0,border:b=this.border,parameters:A={}}=t;if(({type:g,dataFormat:m,compressed:p,width:u,height:h}=this._deduceParameters({format:d,type:g,dataFormat:m,compressed:p,data:i,width:u,height:h})),Object(a.a)(0===this.depth,"texSubImage not supported for 3D textures"),i||(i=n),i&&i.data){const t=i;i=t.data,u=t.shape[0],h=t.shape[1]}i instanceof s.a&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),Object(r.o)(this.gl,A,()=>{if(p)this.gl.compressedTexSubImage2D(e,f,o,c,u,h,d,i);else if(null===i)this.gl.texSubImage2D(e,f,o,c,u,h,m,g,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(e,f,o,c,u,h,m,g,i,_);else if(i instanceof l){const t=Object(r.a)(this.gl);t.bindBuffer(35052,i),t.texSubImage2D(e,f,o,c,u,h,m,g,_),t.bindBuffer(35052,null)}else if(Object(r.j)(this.gl)){Object(r.a)(this.gl).texSubImage2D(e,f,o,c,u,h,m,g,i)}else this.gl.texSubImage2D(e,f,o,c,m,g,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return r.k.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}_getDataType(t){let{data:e,compressed:n=!1}=t;return n?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof s.a?{data:e.handle,dataType:"buffer"}:e instanceof l?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(t){const{format:e,data:n}=t;let{width:r,height:i,dataFormat:s,type:a,compressed:c}=t;const u=o.b[e];return s=s||u&&u.dataFormat,a=a||u&&u.types[0],c=c||u&&u.compressed,({width:r,height:i}=this._deduceImageSize(n,r,i)),{dataFormat:s,type:a,compressed:c,width:r,height:i,format:e,data:n}}_deduceImageSize(t,e,n){let r;return r="undefined"!=typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:n}:{width:e>=0?e:1,height:n>=0?n:1},Object(a.a)(r,"Could not deduced texture size"),Object(a.a)(void 0===e||r.width===e,"Deduced texture width does not match supplied width"),Object(a.a)(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}_setParameter(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:Object(a.a)(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!Object(r.j)(this.gl)&&(!(!this.width||!this.height)&&(!Object(c.b)(this.width)||!Object(c.b)(this.height)))}_updateForNPOT(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,e){if(this._isNPOT())switch(t){case 10241:-1===u.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}},237:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(188),i=n(39);const s={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class o{static get DRAW_MODE(){return s}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e=Object(r.c)("geometry"),drawMode:n=s.TRIANGLES,attributes:i={},indices:o=null,vertexCount:a=null}=t;this.id=e,this.drawMode=0|n,this.attributes={},this.userData={},this._setAttributes(i,o),this.vertexCount=a||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,e){e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e);for(const e in t){let n=t[e];n=ArrayBuffer.isView(n)?{value:n}:n,Object(i.a)(ArrayBuffer.isView(n.value),"".concat(this._print(e),": must be typed array or object with value as typed array")),"POSITION"!==e&&"positions"!==e||n.size||(n.size=3),"indices"===e?(Object(i.a)(!this.indices),this.indices=n):this.attributes[e]=n}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,e){if(e)return e.value.length;let n=1/0;for(const e in t){const r=t[e],{value:i,size:s,constant:o}=r;!o&&i&&s>=1&&(n=Math.min(n,i.length/s))}return Object(i.a)(Number.isFinite(n)),n}}},239:function(t,e,n){"use strict";n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"a",(function(){return d})),n.d(e,"d",(function(){return g}));var r=n(182),i=n(534);const s=["SCALAR","VEC2","VEC3","VEC4"],o=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],a=new Map(o),c={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},u={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},l={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function h(t){return s[t-1]||s[0]}function f(t){const e=a.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function d(t,e){const n=l[t.componentType],s=c[t.type],o=u[t.componentType],a=t.count*s,h=t.count*s*o;Object(r.a)(h>=0&&h<=e.byteLength);return{ArrayType:n,length:a,byteLength:h,componentByteSize:i.a[t.componentType],numberOfComponentsInElement:i.b[t.type]}}function g(t){let{images:e,bufferViews:n}=t;e=e||[],n=n||[];const r=e.map(t=>t.bufferView);n=n.filter(t=>!r.includes(t));const i=n.reduce((t,e)=>t+e.byteLength,0),s=e.reduce((t,e)=>{const{width:n,height:r}=e.image;return t+n*r},0);return i+Math.ceil(4*s*1.33)}},243:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(212),i=n(39),s=n(593);const o={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},a={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class c{static getBytesPerElement(t){return Object(r.c)(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){Object(i.a)(t.size);return Object(r.c)(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new c(...[o,...e])}constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(t=>this._assign(t)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return c.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return c.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=Object(s.a)("Accessor",t,a),void 0!==t.type&&(this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"==typeof t.index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this}}},261:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return h}));var r=n(77);const i=new(n(2199).a)({id:"loaders.gl"});class s{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}var o=n(330);const a={fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){this.console=void 0,this.console=console}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.log.bind(this.console,...e)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.info.bind(this.console,...e)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.warn.bind(this.console,...e)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.error.bind(this.console,...e)}},useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:o.a,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},c={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function u(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}function l(){const t=u();return t.globalOptions=t.globalOptions||{...a},t.globalOptions}function h(t,e,n,r){return n=n||[],function(t,e){f(t,null,a,c,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};f(r,n.id,i,s,e)}}(t,n=Array.isArray(n)?n:[n]),g(e,t,r)}function f(t,e,n,s,o){const a=e||"Top level",c=e?e+".":"";for(const u in t){const l=!e&&Object(r.f)(t[u]),h="baseUri"===u&&!e,f="workerUrl"===u&&e;if(!(u in n)&&!h&&!f)if(u in s)i.warn(`${a} loader option '${c}${u}' no longer supported, use '${s[u]}'`)();else if(!l){const t=d(u,o);i.warn(`${a} loader option '${c}${u}' not recognized. ${t}`)()}}}function d(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const e in i.options){if(t===e)return`Did you mean '${i.id}.${e}'?`;const s=e.toLowerCase();(n.startsWith(s)||s.startsWith(n))&&(r=r||`Did you mean '${i.id}.${e}'?`)}return r}function g(t,e,n){const r={...t.options||{}};return function(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(r,n),null===r.log&&(r.log=new s),m(r,l()),m(r,e),r}function m(t,e){for(const n in e)if(n in e){const i=e[n];Object(r.g)(i)&&Object(r.g)(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}},275:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(29),i=n(161),s=n(425),o=n(431),a=n(809),c=n(955),u=n(1456),l=n(200),h=n(39);class f extends i.a{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:r}=e;let i=!0;return n&&(i=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),r&&(i=i&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),i}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new f(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=Object(r.a)(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=Object(r.a)(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(e),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:e=1,height:n=1,attachments:r=null,color:i=!0,depth:s=!0,stencil:o=!1,check:a=!0,readBuffer:c,drawBuffers:u}=t;if(Object(h.a)(e>=0&&n>=0,"Width and height need to be integers"),this.width=e,this.height=n,r)for(const t in r){const i=r[t];(Array.isArray(i)?i[0]:i).resize({width:e,height:n})}else r=this._createDefaultAttachments(i,s,o,e,n);this.update({clearAttachments:!0,attachments:r,readBuffer:c,drawBuffers:u}),r&&a&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:e={},readBuffer:n,drawBuffers:r,clearAttachments:i=!1,resizeAttachments:s=!0}=t;this.attach(e,{clearAttachments:i,resizeAttachments:s});const{gl:o}=this,a=o.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),r&&this._setDrawBuffers(r),o.bindFramebuffer(36160,a||null),this}resize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:e,height:n}=t;if(null===this.handle)return Object(h.a)(void 0===e&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===e&&(e=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),e!==this.width&&n!==this.height&&r.k.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(e,"x").concat(n))();for(const t in this.attachments)this.attachments[t].resize({width:e,height:n});return this.width=e,this.height=n,this}attach(t){let{clearAttachments:e=!1,resizeAttachments:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};e&&Object.keys(this.attachments).forEach(t=>{r[t]=null}),Object.assign(r,t);const i=this.gl.bindFramebuffer(36160,this.handle);for(const t in r){Object(h.a)(void 0!==t,"Misspelled framebuffer binding point?");const e=Number(t),i=r[e];let s=i;if(s)if(s instanceof o.a)this._attachRenderbuffer({attachment:e,renderbuffer:s});else if(Array.isArray(i)){const[t,n=0,r=0]=i;s=t,this._attachTexture({attachment:e,texture:t,layer:n,level:r})}else this._attachTexture({attachment:e,texture:s,layer:0,level:0});else this._unattach(e);n&&s&&s.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,i||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter(t=>!this.attachments[t]).forEach(t=>{delete this.attachments[t]})}checkStatus(){const{gl:t}=this,e=this.getStatus();if(36053!==e)throw new Error(function(t){return(f.STATUS||{})[t]||"Framebuffer error ".concat(t)}(e));return this}getStatus(){const{gl:t}=this,e=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,e||null),n}clear(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:e,depth:n,stencil:r,drawBuffers:i=[]}=t,s=this.gl.bindFramebuffer(36160,this.handle);return(e||n||r)&&Object(a.a)(this.gl,{color:e,depth:n,stencil:r}),i.forEach((t,e)=>{Object(a.b)(this.gl,{drawBuffer:e,value:t})}),this.gl.bindFramebuffer(36160,s||null),this}readPixels(){return r.k.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return r.k.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return r.k.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return r.k.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return r.k.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return r.k.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:e=[],x:n=0,y:i=0,width:s,height:o}=t;const a=Object(r.a)(this.gl),c=a.bindFramebuffer(36008,this.handle);return 0===n&&0===i&&void 0===s&&void 0===o?a.invalidateFramebuffer(36008,e):a.invalidateFramebuffer(36008,e,n,i,s,o),a.bindFramebuffer(36008,c),this}getAttachmentParameter(t,e,n){let r=this._getAttachmentParameterFallback(e);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=Object(l.a)(this.gl,r)),r}getAttachmentParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const i of n){r[e?Object(l.a)(this.gl,i):i]=this.getAttachmentParameter(t,i,e)}return r}getParameters(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=Object.keys(this.attachments),n={};for(const r of e){const e=Number(r);n[t?Object(l.a)(this.gl,e):e]=this.getAttachmentParameters(e,t)}return n}show(){return"undefined"!=typeof window&&window.open(Object(c.a)(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t>r.k.level||"undefined"==typeof window)return this;e=e||"Framebuffer ".concat(this.id);const n=Object(c.a)(this,{targetMaxHeight:100});return r.k.image({logLevel:t,message:e,image:n},e)(),this}bind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,e,n,r,i){let a=null;return t&&(a=a||{},a[36064]=new s.a(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:i,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(a[36064])),e&&n?(a=a||{},a[33306]=new o.a(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(a[33306])):e?(a=a||{},a[36096]=new o.a(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:i}),this.ownResources.push(a[36096])):n&&Object(h.a)(!1),a}_unattach(t){const e=this.attachments[t];e&&(e instanceof o.a?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:e=36064,renderbuffer:n}=t;const{gl:r}=this;r.framebufferRenderbuffer(36160,e,36161,n.handle),this.attachments[e]=n}_attachTexture(t){let{attachment:e=36064,texture:n,layer:i,level:s}=t;const{gl:o}=this;switch(o.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:Object(r.a)(o).framebufferTextureLayer(36160,e,n.target,s,i);break;case 34067:const t=function(t){return t<34069?t+34069:t}(i);o.framebufferTexture2D(36160,e,t,n.handle,s);break;case 3553:o.framebufferTexture2D(36160,e,3553,n.handle,s);break;default:Object(h.a)(!1,"Illegal texture type")}o.bindTexture(n.target,null),this.attachments[e]=n}_setReadBuffer(t){const e=Object(r.g)(this.gl);e?e.readBuffer(t):Object(h.a)(36064===t||1029===t,"Multiple render targets not supported"),this.readBuffer=t}_setDrawBuffers(t){const{gl:e}=this,n=Object(r.a)(e);if(n)n.drawBuffers(t);else{const n=e.getExtension("WEBGL_draw_buffers");n?n.drawBuffersWEBGL(t):Object(h.a)(1===t.length&&(36064===t[0]||1029===t[0]),"Multiple render targets not supported")}this.drawBuffers=t}_getAttachmentParameterFallback(t){const e=Object(u.a)(this.gl);switch(t){case 36052:return e.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.WEBGL2?null:8;case 33297:return e.WEBGL2?null:5125;case 33296:return e.WEBGL2||e.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}f.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303]},29:function(t,e,n){"use strict";n.d(e,"k",(function(){return r})),n.d(e,"i",(function(){return s})),n.d(e,"j",(function(){return o})),n.d(e,"g",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return u})),n.d(e,"f",(function(){return G})),n.d(e,"n",(function(){return U})),n.d(e,"l",(function(){return j})),n.d(e,"o",(function(){return H})),n.d(e,"c",(function(){return Z})),n.d(e,"m",(function(){return tt})),n.d(e,"h",(function(){return $})),n.d(e,"e",(function(){return V})),n.d(e,"d",(function(){return z}));const r=new(n(2104).a)({id:"luma.gl"});function i(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function s(t){return"undefined"!=typeof WebGLRenderingContext&&t instanceof WebGLRenderingContext||("undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&Number.isFinite(t._version)))}function o(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}function a(t){return o(t)?t:null}function c(t){return i(s(t),"Invalid WebGLRenderingContext"),t}function u(t){return i(o(t),"Requires WebGL2"),t}const l={};function h(t,e){var n;l[t]=!0,void 0!==e&&(n=e,globalThis.console&&globalThis.console.error&&globalThis.console.error(n))}const f=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let e=0;e<this.attribs.length;e++){const r=new t.VertexAttrib(n);this.attribs[e]=r}this.maxAttrib=0};(f.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const d=function(t){const e=this;this.gl=t,function(t){const e=t.getError;t.getError=function(){let n;do{n=e.apply(t),0!==n&&(l[n]=!0)}while(0!==n);for(n in l)if(l[n])return delete l[n],parseInt(n,10);return 0}}(t);const n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(t){return t===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(t){const r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);const i=r.attribs[t];return i.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(t){const r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);const i=r.attribs[t];return i.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(t,r){switch(t){case 34962:e.currentArrayBuffer=r;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=r}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(t,r){const i=e.currentVertexArrayObject,s=i.attribs[t];switch(r){case 34975:return s.buffer;case 34338:return s.enabled;case 34339:return s.size;case 34340:return s.stride;case 34341:return s.type;case 34922:return s.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(t,r,i,s,o,a){const c=e.currentVertexArrayObject;c.maxAttrib=Math.max(c.maxAttrib,t);const u=c.attribs[t];return u.buffer=e.currentArrayBuffer,u.size=r,u.type=i,u.normalized=s,u.stride=o,u.offset=a,u.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",()=>{var t;t="OESVertexArrayObject emulation library context restored",globalThis.console&&globalThis.console.log&&globalThis.console.log(t),e.reset_()},!0),this.reset_()};d.prototype.VERTEX_ARRAY_BINDING_OES=34229,d.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let t=0;t<this.vertexArrayObjects.length;++t)this.vertexArrayObjects.isAlive=!1;const t=this.gl;this.maxVertexAttribs=t.getParameter(34921),this.defaultVertexArrayObject=new f(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},d.prototype.createVertexArrayOES=function(){const t=new f(this);return this.vertexArrayObjects.push(t),t},d.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)},d.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof f&&t.hasBeenBound&&t.ext===this)},d.prototype.bindVertexArrayOES=function(t){const e=this.gl;if(t&&!t.isAlive)return void h(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const n=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const i=this.currentVertexArrayObject;if(r===i)return;r&&i.elementArrayBuffer===r.elementArrayBuffer||n.bindBuffer.call(e,34963,i.elementArrayBuffer);let s=this.currentArrayBuffer;const o=Math.max(r?r.maxAttrib:0,i.maxAttrib);for(let t=0;t<=o;t++){const o=i.attribs[t],a=r?r.attribs[t]:null;if(r&&o.enabled===a.enabled||(o.enabled?n.enableVertexAttribArray.call(e,t):n.disableVertexAttribArray.call(e,t)),o.enabled){let i=!1;r&&o.buffer===a.buffer||(s!==o.buffer&&(n.bindBuffer.call(e,34962,o.buffer),s=o.buffer),i=!0),(i||o.cached!==a.cached)&&n.vertexAttribPointer.call(e,t,o.size,o.type,o.normalized,o.stride,o.offset)}}this.currentArrayBuffer!==s&&n.bindBuffer.call(e,34962,this.currentArrayBuffer)};const g=t=>o(t)?void 0:0,m={3074:t=>o(t)?void 0:36064,35723:t=>o(t)?void 0:4352,35977:g,32937:g,36795:(t,e)=>{const n=o(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},37445:(t,e)=>{const n=t.getExtension("WEBGL_debug_renderer_info");return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(t,e)=>{const n=t.getExtension("WEBGL_debug_renderer_info");return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(t,e)=>{const n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:g,35071:g,37447:g,36063:(t,e)=>{if(!o(t)){const n=t.getExtension("WEBGL_draw_buffers");return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:g,35374:g,35377:g,34852:t=>{if(!o(t)){const e=t.getExtension("WEBGL_draw_buffers");return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension("OES_element_index")?2147483647:65535,33001:t=>t.getExtension("OES_element_index")?16777216:65535,33e3:t=>16777216,37157:g,35373:g,35657:g,36183:g,37137:g,34045:g,35978:g,35979:g,35968:g,35376:g,35375:g,35659:g,37154:g,35371:g,35658:g,35076:g,35077:g,35380:g};const p={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{i(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},ANGLE_instanced_arrays:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){i(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{i(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{i(!1)},deleteQuery:()=>{i(!1)},beginQuery:()=>{i(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},_={readBuffer:(t,e,n)=>{o(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:s}=function(t,e){return{webgl2:o(t),ext:t.getExtension(e)}}(t,"ANGLE_instanced_arrays");let a;switch(r){case 35069:a=!!i&&void 0;break;case 35070:a=i||s?void 0:0}return void 0!==a?a:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!o(t))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>{if(!o(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter(t,e,n,r){switch(r){case 34046:const{extensions:e}=t.luma,n=e.EXT_texture_filter_anisotropic;r=n&&n.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,r)},getParameter:function(t,e,n){const r=m[n],i="function"==typeof r?r(t,e,n):r;return void 0!==i?i:e(n)},hint:(t,e,n,r)=>e(n,r)};function b(t,e){let{extension:n,target:r,target2:s}=e;const o=p[n];i(o);const{meta:a={}}=o,{suffix:c=""}=a,u=t.getExtension(n);for(const e of Object.keys(o)){const n="".concat(e).concat(c);let i=null;"meta"===e||"function"==typeof t[e]||(u&&"function"==typeof u[n]?i=function(){return u[n](...arguments)}:"function"==typeof o[e]&&(i=o[e].bind(r))),i&&(r[e]=i,s[e]=i)}}globalThis.polyfillContext=function(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(!function(t){if("function"==typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const t=e.call(this)||[];return t.indexOf("OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};const n=t.getExtension;t.getExtension=function(e){const r=n.call(this,e);return r||("OES_vertex_array_object"!==e?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new d(this)),this.__OESVertexArrayObject))}}(t),function(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}(t),function(t,e){for(const n of Object.getOwnPropertyNames(e))"overrides"!==n&&b(t,{extension:n,target:t.luma,target2:t})}(t,p),function(t,e){let{target:n,target2:r}=e;Object.keys(_).forEach(e=>{if("function"==typeof _[e]){const i=t[e]?t[e].bind(t):()=>{},s=_[e].bind(null,t,i);n[e]=s,r[e]=s}})}(t,{target:e,target2:t}),e.polyfilled=!0),t};const A={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},E=(t,e,n)=>e?t.enable(n):t.disable(n),y=(t,e,n)=>t.hint(n,e),v=(t,e,n)=>t.pixelStorei(n,e);function T(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const B={3042:E,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:E,2885:(t,e)=>t.cullFace(e),2929:E,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:E,35723:y,36006:(t,e)=>{const n=o(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:y,2849:(t,e)=>t.lineWidth(e),32823:E,32824:"polygonOffset",10752:"polygonOffset",35977:E,32938:"sampleCoverage",32939:"sampleCoverage",3089:E,3088:(t,e)=>t.scissor(...e),2960:E,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:v,3317:v,37440:v,37441:v,37443:v,3330:v,3332:v,3331:v,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:v,32878:v,3316:v,3315:v,32877:v,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=T(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=T(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=T(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=T(e)&&3===e.length?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=T(e)&&3===e.length?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function C(t,e,n){return void 0!==e[t]?e[t]:n[t]}const O={blendEquation:(t,e,n)=>t.blendEquationSeparate(C(32777,e,n),C(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(C(32969,e,n),C(32968,e,n),C(32971,e,n),C(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(C(32824,e,n),C(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(C(32938,e,n),C(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,C(2962,e,n),C(2967,e,n),C(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,C(34816,e,n),C(36003,e,n),C(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,C(2964,e,n),C(2965,e,n),C(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,C(34817,e,n),C(34818,e,n),C(34819,e,n))},S={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:r,[1028===e?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:r,[1028===e?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},w=(t,e)=>t.isEnabled(e),I={3042:w,2884:w,2929:w,3024:w,32823:w,32926:w,32928:w,3089:w,2960:w,35977:w};function R(t){for(const e in t)return!1;return!0}function x(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}return!1}function M(t,e){const n=t[e].bind(t);t[e]=function(){const e=arguments.length<=0?void 0:arguments[0];return e in t.state.cache&&t.state.enable?t.state.cache[e]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function N(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];const{valueChanged:o,oldValue:a}=n(t.state._updateCache,...i);return o&&r(...i),a},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function F(t){const e=t.useProgram.bind(t);t.useProgram=function(n){t.state.program!==n&&(e(n),t.state.program=n)}}class L{constructor(t){let{copyState:e=!1,log:n=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=e?G(t):Object.assign({},A),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){i(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];U(this.gl,t),this.stateStack.pop()}_updateCache(t){let e,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in t){i(void 0!==s);const o=t[s],a=this.cache[s];x(o,a)||(n=!0,e=a,r&&!(s in r)&&(r[s]=a),this.cache[s]=o)}return{valueChanged:n,oldValue:e}}}function D(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(i(void 0!==r),!t.state){const{polyfillContext:e}=globalThis;e&&e(t),t.state=new L(t,{copyState:r}),F(t);for(const e in S){N(t,e,S[e])}M(t,"getParameter"),M(t,"isEnabled")}return t.state.enable=n,t}function P(t){i(t.state),t.state.pop()}function U(t,e){if(i(s(t),"setParameters requires a WebGL context"),R(e))return;const n={};for(const r in e){const i=Number(r),s=B[r];s&&("string"==typeof s?n[s]=!0:s(t,e[r],i))}const r=t.state&&t.state.cache;if(r)for(const i in n){(0,O[i])(t,e,r)}}function G(t,e){if("number"==typeof(e=e||A)){const n=e,r=I[n];return r?r(t,n):t.getParameter(n)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const e of n){const n=I[e];r[e]=n?n(t,Number(e)):t.getParameter(Number(e))}return r}function j(t){U(t,A)}function H(t,e,n){if(R(e))return n(t);const{nocatch:r=!0}=e;let i;if(function(t){t.state||D(t,{copyState:!1}),t.state.push()}(t),U(t,e),r)i=n(t),P(t);else try{i=n(t)}finally{P(t)}return i}var k=n(590);function V(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,r="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return r?t.drawingBufferWidth/r:1}return 1}function z(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=V(t),i=t.drawingBufferWidth,s=t.drawingBufferHeight;return J(e,r,i,s,n)}function X(t){const e="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function J(t,e,n,r,i){const s=W(t[0],e,n);let o=K(t[1],e,r,i),a=W(t[0]+1,e,n);const c=a===n-1?a:a-1;let u;return a=K(t[1]+1,e,r,i),i?(a=0===a?a:a+1,u=o,o=a):u=a===r-1?a:a-1,{x:s,y:o,width:Math.max(c-s+1,1),height:Math.max(u-o+1,1)}}function W(t,e,n){return Math.min(Math.round(t*e),n-1)}function K(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const q=Object(k.a)(),Q=q&&"undefined"!=typeof document,Y={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function Z(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(q,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),t=Object.assign({},Y,t);const{width:e,height:n}=t;function r(e){if(t.throwOnError)throw new Error(e);return console.error(e),null}let s;t.onError=r;const{canvas:o}=t,a=nt({canvas:o,width:e,height:n,onError:r});return s=et(a,t),s?(s=$(s,t),rt(s),s):null}function $(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||it(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},Y,e);const{manageState:n,debug:i}=e;return n&&D(t,{copyState:!1,log:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.log(1,...e)()}}),q&&i&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),r.level=Math.max(r.level,1)):r.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function tt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){return void st(t,X(e.useDevicePixels),e)}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function et(t,e){const{onError:n}=e;let r=null;const i=t=>r=t.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(o&&!s?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function nt(t){let e,{canvas:n,width:r=800,height:i=600,onError:s}=t;if("string"==typeof n){Q&&"complete"===document.readyState||s("createGLContext called on canvas '".concat(n,"' before page was loaded")),e=document.getElementById(n)}else n?e=n:(e=document.createElement("canvas"),e.id="lumagl-canvas",e.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",e.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(e,document.body.firstChild));return e}function rt(t){const e=o(t)?"WebGL2":"WebGL1",n=function(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),i=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",s=t.debug?" debug":"";r.info(1,"".concat(e).concat(s," context ").concat(i))()}function it(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext?2:1}function st(t,e,n){let i="width"in n?n.width:t.canvas.clientWidth,s="height"in n?n.height:t.canvas.clientHeight;i&&s||(r.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=t.canvas.width||1,s=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const o=t.luma.canvasSizeInfo;if(o.clientWidth!==i||o.clientHeight!==s||o.devicePixelRatio!==e){let n=e;const o=Math.floor(i*n),a=Math.floor(s*n);t.canvas.width=o,t.canvas.height=a,t.drawingBufferWidth===o&&t.drawingBufferHeight===a||(r.warn("Device pixel ratio clamped")(),n=Math.min(t.drawingBufferWidth/i,t.drawingBufferHeight/s),t.canvas.width=Math.floor(i*n),t.canvas.height=Math.floor(s*n)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:i,clientHeight:s,devicePixelRatio:e})}}},294:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}));const r="vs",i="fs"},312:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var r=n(39);const i={5126:[5126,1,"float"],35664:[5126,2,"vec2"],35665:[5126,3,"vec3"],35666:[5126,4,"vec4"],5124:[5124,1,"int"],35667:[5124,2,"ivec2"],35668:[5124,3,"ivec3"],35669:[5124,4,"ivec4"],5125:[5125,1,"uint"],36294:[5125,2,"uvec2"],36295:[5125,3,"uvec3"],36296:[5125,4,"uvec4"],35670:[5126,1,"bool"],35671:[5126,2,"bvec2"],35672:[5126,3,"bvec3"],35673:[5126,4,"bvec4"],35674:[5126,8,"mat2"],35685:[5126,8,"mat2x3"],35686:[5126,8,"mat2x4"],35675:[5126,12,"mat3"],35687:[5126,12,"mat3x2"],35688:[5126,12,"mat3x4"],35676:[5126,16,"mat4"],35689:[5126,16,"mat4x2"],35690:[5126,16,"mat4x3"]};function s(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Object(r.a)(!1),0}}function o(t){const e=i[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function a(t,e){switch(t){case 5120:case 5121:case 5122:case 5123:t=5126}for(const n in i){const[r,s,o]=i[n];if(r===t&&s===e)return{glType:n,name:o}}return null}},324:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return c}));var r=n(29);const i={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},s={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},o={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function a(t,e){const n=i[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const s=Object(r.j)(t)&&n.gl2||n.gl1;return"string"==typeof s?t.getExtension(s):s}function c(t,e){const n=i[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}},330:function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return i}));"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,"undefined"!=typeof document&&document;const i=Boolean("object"!=typeof r||"[object process]"!==String(r)||r.browser),s=void 0!==r&&r.version&&/v([0-9]*)/.exec(r.version);s&&parseFloat(s[1])}).call(this,n(80),n(107))},357:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={name:"random",fs:"float random(vec3 scale, float seed) {\n  return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n"}},365:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class r{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.path=void 0,this.path=["$"],t instanceof r)this.path=[...t.path];else if(Array.isArray(t))this.path.push(...t);else if("string"==typeof t&&(this.path=t.split("."),"$"!==this.path[0]))throw new Error("JSONPaths must start with $")}clone(){return new r(this)}toString(){return this.path.join(".")}push(t){this.path.push(t)}pop(){return this.path.pop()}set(t){this.path[this.path.length-1]=t}equals(t){if(!this||!t||this.path.length!==t.path.length)return!1;for(let e=0;e<this.path.length;++e)if(this.path[e]!==t.path[e])return!1;return!0}setFieldAtPath(t,e){const n=[...this.path];n.shift();const r=n.pop();for(const e of n)t=t[e];t[r]=e}getFieldAtPath(t){const e=[...this.path];e.shift();const n=e.pop();for(const n of e)t=t[n];return t[n]}}},366:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var r=n(802),i=n(417),s=n(84);function o(t,e,n){if(n)return n;const o={fetch:Object(r.a)(e,t),...t};if(o.url){const t=Object(i.b)(o.url);o.baseUrl=t,o.queryString=Object(i.a)(o.url),o.filename=s.a.filename(t),o.baseUrl=s.a.dirname(t)}return Array.isArray(o.loaders)||(o.loaders=null),o}function a(t,e){if(t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const t=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...t]:t}return n&&n.length?n:void 0}},367:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));const r="latest";const i=(null!==(s=globalThis._loadersgl_)&&void 0!==s&&s.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.1.0-alpha.4"),globalThis._loadersgl_.version);var s},373:function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a}));const i={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t,document:"undefined"!=typeof document&&document},s=i.global||i.self||i.window||{},o="object"!=typeof r||"[object process]"!==String(r)||r.browser,a="function"==typeof importScripts,c=("undefined"!=typeof window&&window.orientation,void 0!==r&&r.version&&/v([0-9]*)/.exec(r.version));c&&parseFloat(c[1])}).call(this,n(80),n(107))},389:function(t,e,n){"use strict";function r(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let t=0;t<r.length;++t)if(r[t]!==i[t])return!1;return!0}function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map(t=>t instanceof ArrayBuffer?new Uint8Array(t):t),i=r.reduce((t,e)=>t+e.byteLength,0),s=new Uint8Array(i);let o=0;for(const t of r)s.set(t,o),o+=t.byteLength;return s.buffer}function s(t,e,n){const r=void 0!==n?new Uint8Array(t).subarray(e,e+n):new Uint8Array(t).subarray(e);return new Uint8Array(r).buffer}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s}))},39:function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}n.d(e,"a",(function(){return r}))},393:function(t,e,n){},416:function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"loader assertion failed.")}n.d(e,"a",(function(){return r}))},417:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s}));const r=/\?.*/;function i(t){const e=t.match(r);return e&&e[0]}function s(t){return t.replace(r,"")}},425:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(29),i=n(222),s=n(39);let o="";class a extends i.a{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,e){return i.a.isSupported(t,e)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,i;Object(r.b)(t),(e instanceof Promise||"string"==typeof e)&&(e={data:e}),"string"==typeof e.data&&(e=Object.assign({},e,{data:(n=e.data,Object(s.a)("string"==typeof n),n=o+n,new Promise((t,e)=>{try{const r=new Image;r.onload=()=>t(r),r.onerror=()=>e(new Error("Could not load image ".concat(n,"."))),r.crossOrigin=i&&i.crossOrigin||"anonymous",r.src=n}catch(t){e(t)}}))})),super(t,Object.assign({},e,{target:3553})),this.initialize(e),Object.seal(this)}}},427:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return o}));var r=n(77),i=n(198);async function s(t){if(Object(r.i)(t))return t;const e={},n=Object(i.a)(t);n>=0&&(e["content-length"]=String(n));const s=Object(i.c)(t),o=Object(i.b)(t);o&&(e["content-type"]=o);const a=await async function(t){if("string"==typeof t)return"data:,"+t.slice(0,5);if(t instanceof Blob){const e=t.slice(0,5);return await new Promise(t=>{const n=new FileReader;n.onload=e=>{var n;return t(null==e||null===(n=e.target)||void 0===n?void 0:n.result)},n.readAsDataURL(e)})}if(t instanceof ArrayBuffer){const e=t.slice(0,5);return"data:base64,"+function(t){let e="";const n=new Uint8Array(t);for(let t=0;t<n.byteLength;t++)e+=String.fromCharCode(n[t]);return btoa(e)}(e)}return null}(t);a&&(e["x-first-bytes"]=a),"string"==typeof t&&(t=(new TextEncoder).encode(t));const c=new Response(t,{headers:e});return Object.defineProperty(c,"url",{value:s}),c}async function o(t){if(!t.ok){const e=await async function(t){let e=`Failed to fetch resource ${t.url} (${t.status}): `;try{const n=t.headers.get("Content-Type");let r=t.statusText;null!=n&&n.includes("application/json")&&(r+=" "+await t.text()),e+=r,e=e.length>60?e.slice(0,60)+"...":e}catch(t){}return e}(t);throw new Error(e)}}},428:function(t,e,n){var r,i=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;
/**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   */
var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function n(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function r(t){return!0===(t&&t.__isLong__)}function i(t){var e=Math.clz32(t&-t);return t?31-e:e}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var s={},o={};function a(t,e){var n,r,i;return e?(i=0<=(t>>>=0)&&t<256)&&(r=o[t])?r:(n=u(t,0,!0),i&&(o[t]=n),n):(i=-128<=(t|=0)&&t<128)&&(r=s[t])?r:(n=u(t,t<0?-1:0,!1),i&&(s[t]=n),n)}function c(t,e){if(isNaN(t))return e?b:_;if(e){if(t<0)return b;if(t>=g)return T}else{if(t<=-m)return B;if(t+1>=m)return v}return t<0?c(-t,e).neg():u(t%d|0,t/d|0,e)}function u(t,e,r){return new n(t,e,r)}n.fromInt=a,n.fromNumber=c,n.fromBits=u;var l=Math.pow;function h(t,e,n){if(0===t.length)throw Error("empty string");if("number"==typeof e?(n=e,e=!1):e=!!e,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e?b:_;if((n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return h(t.substring(1),e,n).neg();for(var i=c(l(n,8)),s=_,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),u=parseInt(t.substring(o,o+a),n);if(a<8){var f=c(l(n,a));s=s.mul(f).add(c(u))}else s=(s=s.mul(i)).add(c(u))}return s.unsigned=e,s}function f(t,e){return"number"==typeof t?c(t,e):"string"==typeof t?h(t,e):u(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}n.fromString=h,n.fromValue=f;var d=4294967296,g=d*d,m=g/2,p=a(1<<24),_=a(0);n.ZERO=_;var b=a(0,!0);n.UZERO=b;var A=a(1);n.ONE=A;var E=a(1,!0);n.UONE=E;var y=a(-1);n.NEG_ONE=y;var v=u(-1,2147483647,!1);n.MAX_VALUE=v;var T=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=T;var B=u(0,-2147483648,!1);n.MIN_VALUE=B;var C=n.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},C.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(B)){var e=c(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=c(l(t,6),this.unsigned),s=this,o="";;){var a=s.div(i),u=(s.sub(a.mul(i)).toInt()>>>0).toString(t);if((s=a).isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(B)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(t){return r(t)||(t=f(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},C.eq=C.equals,C.notEquals=function(t){return!this.eq(t)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(t){return this.comp(t)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(t){return this.comp(t)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(t){return this.comp(t)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(t){return this.comp(t)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(t){if(r(t)||(t=f(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(B)?B:this.not().add(A)},C.neg=C.negate,C.add=function(t){r(t)||(t=f(t));var e=this.high>>>16,n=65535&this.high,i=this.low>>>16,s=65535&this.low,o=t.high>>>16,a=65535&t.high,c=t.low>>>16,l=0,h=0,d=0,g=0;return d+=(g+=s+(65535&t.low))>>>16,h+=(d+=i+c)>>>16,l+=(h+=n+a)>>>16,l+=e+o,u((d&=65535)<<16|(g&=65535),(l&=65535)<<16|(h&=65535),this.unsigned)},C.subtract=function(t){return r(t)||(t=f(t)),this.add(t.neg())},C.sub=C.subtract,C.multiply=function(t){if(this.isZero())return this;if(r(t)||(t=f(t)),e)return u(e.mul(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned);if(t.isZero())return this.unsigned?b:_;if(this.eq(B))return t.isOdd()?B:_;if(t.eq(B))return this.isOdd()?B:_;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(p)&&t.lt(p))return c(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,s=this.low>>>16,o=65535&this.low,a=t.high>>>16,l=65535&t.high,h=t.low>>>16,d=65535&t.low,g=0,m=0,A=0,E=0;return A+=(E+=o*d)>>>16,m+=(A+=s*d)>>>16,A&=65535,m+=(A+=o*h)>>>16,g+=(m+=i*d)>>>16,m&=65535,g+=(m+=s*h)>>>16,m&=65535,g+=(m+=o*l)>>>16,g+=n*d+i*h+s*l+o*a,u((A&=65535)<<16|(E&=65535),(g&=65535)<<16|(m&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(t){if(r(t)||(t=f(t)),t.isZero())throw Error("division by zero");var n,i,s;if(e)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?u((this.unsigned?e.div_u:e.div_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:_;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return b;if(t.gt(this.shru(1)))return E;s=b}else{if(this.eq(B))return t.eq(A)||t.eq(y)?B:t.eq(B)?A:(n=this.shr(1).div(t).shl(1)).eq(_)?t.isNegative()?A:y:(i=this.sub(t.mul(n)),s=n.add(i.div(t)));if(t.eq(B))return this.unsigned?b:_;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=_}for(i=this;i.gte(t);){n=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),a=o<=48?1:l(2,o-48),h=c(n),d=h.mul(t);d.isNegative()||d.gt(i);)d=(h=c(n-=a,this.unsigned)).mul(t);h.isZero()&&(h=A),s=s.add(h),i=i.sub(d)}return s},C.div=C.divide,C.modulo=function(t){return r(t)||(t=f(t)),e?u((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return u(~this.low,~this.high,this.unsigned)},C.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},C.clz=C.countLeadingZeros,C.countTrailingZeros=function(){return this.low?i(this.low):i(this.high)+32},C.ctz=C.countTrailingZeros,C.and=function(t){return r(t)||(t=f(t)),u(this.low&t.low,this.high&t.high,this.unsigned)},C.or=function(t){return r(t)||(t=f(t)),u(this.low|t.low,this.high|t.high,this.unsigned)},C.xor=function(t){return r(t)||(t=f(t)),u(this.low^t.low,this.high^t.high,this.unsigned)},C.shiftLeft=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):u(0,this.low<<t-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):u(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):u(32===t?this.high:this.high>>>t-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.rotateLeft=function(t){var e;return r(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?u(this.high,this.low,this.unsigned):t<32?(e=32-t,u(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(e=32-(t-=32),u(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))},C.rotl=C.rotateLeft,C.rotateRight=function(t){var e;return r(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?u(this.high,this.low,this.unsigned):t<32?(e=32-t,u(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(e=32-(t-=32),u(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))},C.rotr=C.rotateRight,C.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},C.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},C.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},n.fromBytes=function(t,e,r){return r?n.fromBytesLE(t,e):n.fromBytesBE(t,e)},n.fromBytesLE=function(t,e){return new n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},n.fromBytesBE=function(t,e){return new n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};var O=n;return t.default=O,"default"in t?t.default:t}({});void 0===(r=function(){return i}.apply(e,[]))||(t.exports=r)},431:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(161);const i="EXT_color_buffer_float";var s={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:i,bpp:2},33327:{gl2:i,bpp:4},34842:{gl2:i,bpp:8},33326:{gl2:i,bpp:4},33328:{gl2:i,bpp:8},34836:{gl2:i,bpp:16},35898:{gl2:i,bpp:4}},o=n(29),a=n(39);class c extends r.a{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!e||function(t,e,n){const r=n[e];if(!r)return!1;const i=Object(o.j)(t)&&r.gl2||r.gl1;return"string"==typeof i?t.getExtension(i):i}(t,e,s)}static getSamplesForFormat(t,e){let{format:n}=e;return t.getInternalformatParameter(36161,n,32937)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.initialize(e),Object.seal(this)}initialize(t){let{format:e,width:n=1,height:r=1,samples:i=0}=t;return Object(a.a)(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==i&&Object(o.j)(this.gl)?this.gl.renderbufferStorageMultisample(36161,i,e,n,r):this.gl.renderbufferStorage(36161,e,n,r),this.format=e,this.width=n,this.height=r,this.samples=i,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*s[this.format].bpp),this}resize(t){let{width:e,height:n}=t;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){this.gl.bindRenderbuffer(36161,this.handle);return this.gl.getRenderbufferParameter(36161,t)}}},435:function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return d}));var r=n(29);function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}function s(t,e,n,r){const s=t.split(/\r?\n/),c={},u={},l=r||i(e)||"(unnamed)",h="".concat(function(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(l);for(let e=0;e<s.length;e++){const n=s[e];if(n.length<=1)continue;const r=n.split(":"),i=r[0],o=parseInt(r[2],10);if(isNaN(o))throw new Error("GLSL compilation error in ".concat(h,": ").concat(t));"WARNING"!==i?c[o]=n:u[o]=n}const f=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((t,r)=>{const s=String(r+e),o=s.length;return a(s,i-o)+n+t})}(e);return{shaderName:h,errors:o(c,f),warnings:o(u,f)}}function o(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if((t[r+3]||t[r+2]||t[r+1])&&(n+="".concat(i,"\n"),t[r+1])){const e=t[r+1],i=e.split(":",3),s=i[0],o=parseInt(i[1],10)||0,c=e.substring(i.join(":").length+1).trim();n+=a("^^^ ".concat(s,": ").concat(c,"\n\n"),o)}}return n}function a(t,e){let n="";for(let t=0;t<e;++t)n+=" ";return"".concat(n).concat(t)}var c=n(39),u=n(188),l=n(161);class h extends l.a{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Object(c.a)(!1),"unknown"}}constructor(t,e){Object(r.b)(t),Object(c.a)("string"==typeof e.source,"Shader: GLSL source code must be a JavaScript string");super(t,{id:i(e.source,null)||e.id||Object(u.c)("unnamed ".concat(h.getTypeName(e.shaderType)))}),this.shaderType=e.shaderType,this.source=e.source,this.initialize(e)}initialize(t){let{source:e}=t;const n=i(e,null);n&&(this.id=Object(u.c)(n)),this._compile(e)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(h.getTypeName(this.shaderType),":").concat(this.id)}getName(){return i(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;t.startsWith("#version ")||(t="#version 100\n".concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);if(!this.getParameter(35713)){const t=this.gl.getShaderInfoLog(this.handle),{shaderName:e,errors:n,warnings:i}=s(t,this.source,this.shaderType,this.id);throw r.k.error("GLSL compilation errors in ".concat(e,"\n").concat(n))(),r.k.warn("GLSL compilation warnings in ".concat(e,"\n").concat(i))(),new Error("GLSL compilation errors in ".concat(e))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class f extends h{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,e){"string"==typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class d extends h{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,e){"string"==typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}},442:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));let r="";const i={};function s(t){for(const e in i)if(t.startsWith(e)){const n=i[e];t=t.replace(e,n)}return t.startsWith("http://")||t.startsWith("https://")||(t=`${r}${t}`),t}},513:function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return d})),n.d(e,"c",(function(){return g}));var r=n(662),i=n(77);const s=262144;var o=n(330),a=n(654);function c(t,e){return o.a?async function*(t,e){const n=t.getReader();let r;try{for(;;){const t=r||n.read();null!=e&&e._streamReadAhead&&(r=n.read());const{done:i,value:s}=await t;if(i)return;yield Object(a.a)(s)}}catch(t){n.releaseLock()}}(t,e):async function*(t,e){for await(const e of t)yield Object(a.a)(e)}(t)}function u(t,e){if("string"==typeof t)return function*(t,e){const n=(null==e?void 0:e.chunkSize)||262144;let r=0;const i=new TextEncoder;for(;r<t.length;){const e=Math.min(t.length-r,n),s=t.slice(r,r+e);r+=e,yield i.encode(s)}}(t,e);if(t instanceof ArrayBuffer)return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const{chunkSize:n=s}=e;let r=0;for(;r<t.byteLength;){const e=Math.min(t.byteLength-r,n),i=new ArrayBuffer(e),s=new Uint8Array(t,r,e);new Uint8Array(i).set(s),r+=e,yield i}}()}(t,e);if(Object(i.b)(t))return async function*(t,e){const n=(null==e?void 0:e.chunkSize)||1048576;let r=0;for(;r<t.size;){const e=r+n,i=await t.slice(r,e).arrayBuffer();r=e,yield i}}(t,e);if(Object(i.h)(t))return c(t,e);if(Object(i.i)(t)){return c(t.body,e)}throw new Error("makeIterator")}var l=n(427);const h="Cannot convert supplied data type";function f(t,e,n){if(e.text&&"string"==typeof t)return t;if(Object(i.c)(t)&&(t=t.buffer),t instanceof ArrayBuffer){const n=t;if(e.text&&!e.binary){return new TextDecoder("utf8").decode(n)}return n}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary){return new TextDecoder("utf8").decode(t)}let n=t.buffer;const r=t.byteLength||t.length;return 0===t.byteOffset&&r===n.byteLength||(n=n.slice(t.byteOffset,t.byteOffset+r)),n}throw new Error(h)}async function d(t,e,n){const s=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"==typeof t||s)return f(t,e);if(Object(i.b)(t)&&(t=await Object(l.b)(t)),Object(i.i)(t)){const n=t;return await Object(l.a)(n),e.binary?await n.arrayBuffer():await n.text()}if(Object(i.h)(t)&&(t=u(t,n)),Object(i.d)(t)||Object(i.a)(t))return Object(r.a)(t);throw new Error(h)}async function g(t,e){if(Object(i.e)(t))return t;if(Object(i.i)(t)){const n=t;await Object(l.a)(n);return u(await n.body,e)}return Object(i.b)(t)||Object(i.h)(t)?u(t,e):Object(i.a)(t)?t:function(t){if(ArrayBuffer.isView(t))return function*(){yield t.buffer}();if(t instanceof ArrayBuffer)return function*(){yield t}();if(Object(i.e)(t))return t;if(Object(i.d)(t))return t[Symbol.iterator]();throw new Error(h)}(t)}},517:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return d}));var r=n(84),i=n(389),s=n(221);const o=new(n(2199).a)({id:"loaders.gl"});var a=n(198),c=n(1401),u=n(77),l=n(417);const h=/\.([^.]+)$/;async function f(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!m(t))return null;let i=d(t,e,{...n,nothrow:!0},r);if(i)return i;if(Object(u.b)(t)&&(i=d(t=await t.slice(0,10).arrayBuffer(),e,n,r)),!(i||null!=n&&n.nothrow))throw new Error(p(t));return i}function d(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!m(t))return null;if(e&&!Array.isArray(e))return Object(s.b)(e);let i=[];e&&(i=i.concat(e)),null!=n&&n.ignoreRegisteredLoaders||i.push(...Object(c.a)()),_(i);const o=g(t,i,n,r);if(!(o||null!=n&&n.nothrow))throw new Error(p(t));return o}function g(t,e,n,r){const i=Object(a.c)(t),s=Object(a.b)(t),c=Object(l.b)(i)||(null==r?void 0:r.url);let u=null,f="";var d;(null!=n&&n.mimeType&&(u=b(e,null==n?void 0:n.mimeType),f="match forced by supplied MIME type "+(null==n?void 0:n.mimeType)),u=u||function(t,e){const n=e&&h.exec(e),r=n&&n[1];return r?function(t,e){e=e.toLowerCase();for(const n of t)for(const t of n.extensions)if(t.toLowerCase()===e)return n;return null}(t,r):null}(e,c),f=f||(u?"matched url "+c:""),u=u||b(e,s),f=f||(u?"matched MIME type "+s:""),u=u||function(t,e){if(!e)return null;for(const n of t)if("string"==typeof e){if(A(e,n))return n}else if(ArrayBuffer.isView(e)){if(E(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer){if(E(e,0,n))return n}return null}(e,t),f=f||(u?"matched initial data "+y(t):""),null!=n&&n.fallbackMimeType&&(u=u||b(e,null==n?void 0:n.fallbackMimeType),f=f||(u?"matched fallback MIME type "+s:"")),f)&&o.log(1,`selectLoader selected ${null===(d=u)||void 0===d?void 0:d.name}: ${f}.`);return u}function m(t){return!(t instanceof Response&&204===t.status)}function p(t){const e=Object(a.c)(t),n=Object(a.b)(t);let i="No valid loader found (";i+=e?r.a.filename(e)+", ":"no url provided, ",i+=`MIME type: ${n?`"${n}"`:"not provided"}, `;const s=t?y(t):"";return i+=s?` first bytes: "${s}"`:"first bytes: not available",i+=")",i}function _(t){for(const e of t)Object(s.b)(e)}function b(t,e){for(const n of t){if(n.mimeTypes&&n.mimeTypes.includes(e))return n;if(e==="application/x."+n.id)return n}return null}function A(t,e){if(e.testText)return e.testText(t);return(Array.isArray(e.tests)?e.tests:[e.tests]).some(e=>t.startsWith(e))}function E(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(n=>function(t,e,n,r){if(r instanceof ArrayBuffer)return Object(i.a)(r,t,r.byteLength);switch(typeof r){case"function":return r(t);case"string":const n=v(t,e,r.length);return r===n;default:return!1}}(t,e,0,n))}function y(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return v(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){return v(t,0,e)}return""}function v(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let t=0;t<n;t++)i+=String.fromCharCode(r.getUint8(e+t));return i}},518:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(3);class i extends class{constructor(t){Object(r.a)(this,"fetch",void 0),Object(r.a)(this,"loadOptions",void 0),Object(r.a)(this,"_needsRefresh",!0),Object(r.a)(this,"props",void 0),this.props={...t},this.loadOptions={...t.loadOptions},this.fetch=function(t){const e=null==t?void 0:t.fetch;if(e&&"function"==typeof e)return(t,n)=>e(t,n);const n=null==t?void 0:t.fetch;if(n&&"function"!=typeof n)return t=>fetch(t,n);return t=>fetch(t)}(this.loadOptions)}setProps(t){this.props=Object.assign(this.props,t),this.setNeedsRefresh()}setNeedsRefresh(){this._needsRefresh=!0}getNeedsRefresh(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this._needsRefresh;return t&&(this._needsRefresh=!1),e}}{}},534:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}));const r={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},i={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4}},540:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var r=n(920),i=n(211),s=n(367);var o=n(221),a=n(77),c=n(261),u=n(1153),l=n(513),h=n(366),f=n(198),d=n(517);async function g(t,e,n,m){!e||Array.isArray(e)||Object(o.a)(e)||(m=void 0,n=e,e=void 0),t=await t,n=n||{};const p=Object(f.c)(t),_=e,b=Object(h.b)(_,m),A=await Object(d.a)(t,b,n);return A?(n=Object(c.c)(n,A,b,p),m=Object(h.a)({url:p,_parse:g,loaders:b},n,m||null),await async function(t,e,n,o){if(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.b;Object(i.a)(t,"no worker provided");const n=t.version}(t),n=Object(u.a)(t.options,n),Object(a.i)(e)){const t=e,{ok:n,redirected:r,status:i,statusText:s,type:a,url:c}=t,u=Object.fromEntries(t.headers.entries());o.response={headers:u,ok:n,redirected:r,status:i,statusText:s,type:a,url:c}}e=await Object(l.a)(e,t,n);const c=t;if(c.parseTextSync&&"string"==typeof e)return c.parseTextSync(e,n,o);if(Object(r.a)(t,n))return await Object(r.b)(t,e,n,o,g);if(c.parseText&&"string"==typeof e)return await c.parseText(e,n,o);if(c.parse)return await c.parse(e,n,o);throw Object(i.a)(!c.parseSync),new Error(t.id+" loader - no parser found and worker is disabled")}(A,t,n,m)):null}},547:function(t,e,n){"use strict";function r(t){try{let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const n=new TextDecoder(void 0,e);for await(const e of t)yield"string"==typeof e?e:n.decode(e,{stream:!0})}()}catch(t){return Promise.reject(t)}}n.d(e,"a",(function(){return r}))},560:function(t,e,n){"use strict";function r(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return i(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){return i(t,0,e)}return""}function i(t,e,n){if(t.byteLength<=e+n)return"";const r=new DataView(t);let i="";for(let t=0;t<n;t++)i+=String.fromCharCode(r.getUint8(e+t));return i}n.d(e,"a",(function(){return r}))},575:function(t,e,n){"use strict";(function(t){function r(){let e;if("undefined"!=typeof window&&window.performance)e=window.performance.now();else if(void 0!==t&&t.hrtime){const n=t.hrtime();e=1e3*n[0]+n[1]/1e6}else e=Date.now();return e}n.d(e,"a",(function(){return r}))}).call(this,n(107))},577:function(t,e,n){"use strict";(function(t){function r(){let e;if("undefined"!=typeof window&&window.performance)e=window.performance.now();else if(void 0!==t&&t.hrtime){const n=t.hrtime();e=1e3*n[0]+n[1]/1e6}else e=Date.now();return e}n.d(e,"a",(function(){return r}))}).call(this,n(107))},593:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(29);function i(t,e,n){const{removedProps:i={},deprecatedProps:s={},replacedProps:o={}}=n;for(const n in i)if(n in e){const e=i[n]?"".concat(t,".").concat(i[n]):"N/A";r.k.removed("".concat(t,".").concat(n),e)()}for(const n in s)if(n in e){const e=s[n];r.k.deprecated("".concat(t,".").concat(n),"".concat(t,".").concat(e))()}let a=null;for(const n in o)if(n in e){const i=o[n];r.k.deprecated("".concat(t,".").concat(n),"".concat(t,".").concat(i))(),a=a||Object.assign({},e),a[i]=e[n],delete a[n]}return a||e}},597:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(957),i=n(1461),s=n(188),o=n(39);class a{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e}=t;this.id=e||Object(s.c)(this.constructor.name),this.display=!0,this.position=new r.a,this.rotation=new r.a,this.scale=new r.a(1,1,1),this.matrix=new i.a,this.userData={},this.props={},this._setScenegraphNodeProps(t)}delete(){}setProps(t){return this._setScenegraphNodeProps(t),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(t){return Object(o.a)(3===t.length,"setPosition requires vector argument"),this.position=t,this}setRotation(t){return Object(o.a)(3===t.length,"setRotation requires vector argument"),this.rotation=t,this}setScale(t){return Object(o.a)(3===t.length,"setScale requires vector argument"),this.scale=t,this}setMatrix(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?this.matrix.copy(t):this.matrix=t}setMatrixComponents(t){let{position:e,rotation:n,scale:r,update:i=!0}=t;return e&&this.setPosition(e),n&&this.setRotation(n),r&&this.setScale(r),i&&this.updateMatrix(),this}updateMatrix(){const t=this.position,e=this.rotation,n=this.scale;return this.matrix.identity(),this.matrix.translate(t),this.matrix.rotateXYZ(e),this.matrix.scale(n),this}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:e,rotation:n,scale:r}=t;return e&&this.setPosition(e),n&&this.setRotation(n),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(t,e){Object(o.a)(t),e=e||this.matrix;const n=new i.a(t).multiplyRight(e),r=n.invert(),s=r.transpose();return{viewMatrix:t,modelMatrix:e,objectMatrix:e,worldMatrix:n,worldInverseMatrix:r,worldInverseTransposeMatrix:s}}_setScenegraphNodeProps(t){"display"in t&&(this.display=t.display),"position"in t&&this.setPosition(t.position),"rotation"in t&&this.setRotation(t.rotation),"scale"in t&&this.setScale(t.scale),"matrix"in t&&this.setMatrix(t.matrix),Object.assign(this.props,t)}}},605:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n";const i={lightSources:{}};function s(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map(t=>t*e/255)}function o(t){let{ambientLight:e,pointLights:n=[],directionalLights:r=[]}=t;const i={};return i["lighting_uAmbientLight.color"]=e?s(e):[0,0,0],n.forEach((t,e)=>{i["lighting_uPointLight[".concat(e,"].color")]=s(t),i["lighting_uPointLight[".concat(e,"].position")]=t.position,i["lighting_uPointLight[".concat(e,"].attenuation")]=t.attenuation||[1,0,0]}),i.lighting_uPointLightCount=n.length,r.forEach((t,e)=>{i["lighting_uDirectionalLight[".concat(e,"].color")]=s(t),i["lighting_uDirectionalLight[".concat(e,"].direction")]=t.direction}),i.lighting_uDirectionalLightCount=r.length,i}const a={name:"lights",vs:r,fs:r,getUniforms:function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;if("lightSources"in e){const{ambientLight:t,pointLights:n,directionalLights:r}=e.lightSources||{};return t||n&&n.length>0||r&&r.length>0?Object.assign({},o({ambientLight:t,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const n={pointLights:[],directionalLights:[]};for(const t of e.lights||[])switch(t.type){case"ambient":n.ambientLight=t;break;case"directional":n.directionalLights.push(t);break;case"point":n.pointLights.push(t)}return t({lightSources:n})}return{}},defines:{MAX_LIGHTS:3}}},607:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(29),i=n(514),s=n(590);const o=new class{constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new i.a({id:t})),this.stats.get(t)}};if(globalThis.luma&&"8.5.21"!==globalThis.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat("8.5.21"));globalThis.luma||(Object(s.a)()&&r.k.log(1,"luma.gl ".concat("8.5.21"," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:"8.5.21",version:"8.5.21",log:r.k,stats:o,globals:{modules:{},nodeIO:{}}});globalThis.luma},619:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}));var r=n(416);function i(t,e){return Object(r.a)(t>=0),Object(r.a)(e>0),t+(e-1)&~(e-1)}function s(t,e,n){let r;if(t instanceof ArrayBuffer)r=new Uint8Array(t);else{const e=t.byteOffset,n=t.byteLength;r=new Uint8Array(t.buffer||t.arrayBuffer,e,n)}return e.set(r,n),n+i(r.byteLength,4)}},620:function(t,e,n){"use strict";async function r(t,e,n,r){return r._parse(t,e,n,r)}n.d(e,"a",(function(){return r}))},621:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n(1455);var r=n(945),i=n(73),s=n(669);function o(t,e,n){const o=Object(s.a)(e.value),a=n||function(t){const e=new Map;"byteOffset"in t&&e.set("byteOffset",t.byteOffset.toString(10));"byteStride"in t&&e.set("byteStride",t.byteStride.toString(10));"normalized"in t&&e.set("normalized",t.normalized.toString());return e}(e);return new r.a(t,new i.a(e.size,new r.a("value",o)),!1,a)}},654:function(t,e,n){"use strict";function r(t){if((e=t)&&"object"==typeof e&&e.isBuffer)return t;var e;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"==typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"==typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}n.d(e,"a",(function(){return r}))},662:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(389);async function i(t){const e=[];for await(const n of t)e.push(n);return Object(r.b)(...e)}},669:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(73);function i(t){switch(t.constructor){case Int8Array:return new r.f;case Uint8Array:return new r.i;case Int16Array:return new r.d;case Uint16Array:return new r.g;case Int32Array:return new r.e;case Uint32Array:return new r.h;case Float32Array:return new r.b;case Float64Array:return new r.c;default:throw new Error("array type not supported")}}},70:function(t,e,n){"use strict";n.r(e),n.d(e,"createGLContext",(function(){return r.c})),n.d(e,"instrumentGLContext",(function(){return r.h})),n.d(e,"isWebGL",(function(){return r.i})),n.d(e,"isWebGL2",(function(){return r.j})),n.d(e,"getParameters",(function(){return r.f})),n.d(e,"setParameters",(function(){return r.n})),n.d(e,"withParameters",(function(){return r.o})),n.d(e,"resetParameters",(function(){return r.l})),n.d(e,"cssToDeviceRatio",(function(){return r.e})),n.d(e,"cssToDevicePixels",(function(){return r.d})),n.d(e,"lumaStats",(function(){return i.a})),n.d(e,"FEATURES",(function(){return s.a})),n.d(e,"hasFeature",(function(){return o.b})),n.d(e,"hasFeatures",(function(){return o.c})),n.d(e,"Buffer",(function(){return a.a})),n.d(e,"Program",(function(){return c.a})),n.d(e,"Framebuffer",(function(){return u.a})),n.d(e,"Renderbuffer",(function(){return l.a})),n.d(e,"Texture2D",(function(){return h.a})),n.d(e,"TextureCube",(function(){return f.a})),n.d(e,"VertexShader",(function(){return d.b})),n.d(e,"FragmentShader",(function(){return d.a})),n.d(e,"clear",(function(){return g.a})),n.d(e,"readPixelsToArray",(function(){return m.c})),n.d(e,"readPixelsToBuffer",(function(){return m.d})),n.d(e,"cloneTextureFrom",(function(){return p.a})),n.d(e,"copyToTexture",(function(){return m.b})),n.d(e,"Texture3D",(function(){return _.a})),n.d(e,"TransformFeedback",(function(){return b.a})),n.d(e,"AnimationLoop",(function(){return A.a})),n.d(e,"Model",(function(){return E.a})),n.d(e,"Transform",(function(){return y.a})),n.d(e,"ProgramManager",(function(){return v.a})),n.d(e,"Timeline",(function(){return T.a})),n.d(e,"Geometry",(function(){return B.a})),n.d(e,"ClipSpace",(function(){return C.a})),n.d(e,"ConeGeometry",(function(){return I})),n.d(e,"CubeGeometry",(function(){return R.a})),n.d(e,"CylinderGeometry",(function(){return x})),n.d(e,"IcoSphereGeometry",(function(){return L})),n.d(e,"PlaneGeometry",(function(){return D})),n.d(e,"SphereGeometry",(function(){return P})),n.d(e,"TruncatedConeGeometry",(function(){return w})),n.d(e,"normalizeShaderModule",(function(){return U.b})),n.d(e,"fp32",(function(){return G.a})),n.d(e,"fp64",(function(){return z})),n.d(e,"project",(function(){return q})),n.d(e,"dirlight",(function(){return Y})),n.d(e,"picking",(function(){return Z.a})),n.d(e,"gouraudLighting",(function(){return $.a})),n.d(e,"phongLighting",(function(){return $.b})),n.d(e,"pbr",(function(){return tt.a})),n.d(e,"log",(function(){return r.k})),n.d(e,"assert",(function(){return et.a})),n.d(e,"uid",(function(){return O.c}));var r=n(29),i=n(607),s=n(810),o=n(1456),a=n(134),c=n(2206),u=n(275),l=n(431),h=n(425),f=n(1407),d=n(435),g=n(809),m=n(955),p=n(1406),_=n(1408),b=n(2159),A=n(2209),E=n(798),y=n(2200),v=n(951),T=n(2163),B=n(237),C=n(2157),O=n(188);const S={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class w extends B.a{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e=Object(O.c)("truncated-code-geometry")}=t,{indices:n,attributes:r}=function(t){const{bottomRadius:e=0,topRadius:n=0,height:r=1,nradial:i=10,nvertical:s=10,verticalAxis:o="y",topCap:a=!1,bottomCap:c=!1}=t,u=(a?2:0)+(c?2:0),l=(i+1)*(s+1+u),h=Math.atan2(e-n,r),f=Math.sin,d=Math.cos,g=Math.PI,m=d(h),p=f(h),_=a?-2:0,b=s+(c?2:0),A=i+1,E=new Uint16Array(i*(s+u)*6),y=S[o],v=new Float32Array(3*l),T=new Float32Array(3*l),B=new Float32Array(2*l);let C=0,O=0;for(let t=_;t<=b;t++){let o,a=t/s,c=r*a;t<0?(c=0,a=1,o=e):t>s?(c=r,a=1,o=n):o=e+t/s*(n-e),-2!==t&&t!==s+2||(o=0,a=0),c-=r/2;for(let e=0;e<A;e++){const n=f(e*g*2/i),r=d(e*g*2/i);v[C+y[0]]=n*o,v[C+y[1]]=c,v[C+y[2]]=r*o,T[C+y[0]]=t<0||t>s?0:n*m,T[C+y[1]]=t<0?-1:t>s?1:p,T[C+y[2]]=t<0||t>s?0:r*m,B[O+0]=e/i,B[O+1]=a,O+=2,C+=3}}for(let t=0;t<s+u;t++)for(let e=0;e<i;e++){const n=6*(t*i+e);E[n+0]=A*(t+0)+0+e,E[n+1]=A*(t+0)+1+e,E[n+2]=A*(t+1)+1+e,E[n+3]=A*(t+0)+0+e,E[n+4]=A*(t+1)+1+e,E[n+5]=A*(t+1)+0+e}return{indices:E,attributes:{POSITION:{size:3,value:v},NORMAL:{size:3,value:T},TEXCOORD_0:{size:2,value:B}}}}(t);super({...t,id:e,indices:n,attributes:{...r,...t.attributes}})}}class I extends w{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e=Object(O.c)("cone-geometry"),radius:n=1,cap:r=!0}=t;super({...t,id:e,topRadius:0,topCap:Boolean(r),bottomCap:Boolean(r),bottomRadius:n})}}var R=n(2103);class x extends w{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e=Object(O.c)("cylinder-geometry"),radius:n=1}=t;super({...t,id:e,bottomRadius:n,topRadius:n})}}var M=n(957);const N=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0],F=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1];class L extends B.a{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e=Object(O.c)("ico-sphere-geometry")}=t,{indices:n,attributes:r}=function(t){const{iterations:e=0}=t,n=Math.PI,r=2*n,i=[...N];let s=[...F];i.push(),s.push();const o=(()=>{const t={};return(e,n)=>{const r=(e*=3)>(n*=3)?e:n,s="".concat(e<n?e:n,"|").concat(r);if(s in t)return t[s];const o=i[e],a=i[e+1],c=i[e+2];let u=(o+i[n])/2,l=(a+i[n+1])/2,h=(c+i[n+2])/2;const f=Math.sqrt(u*u+l*l+h*h);return u/=f,l/=f,h/=f,i.push(u,l,h),t[s]=i.length/3-1}})();for(let t=0;t<e;t++){const t=[];for(let e=0;e<s.length;e+=3){const n=o(s[e+0],s[e+1]),r=o(s[e+1],s[e+2]),i=o(s[e+2],s[e+0]);t.push(i,s[e+0],n,n,s[e+1],r,r,s[e+2],i,n,r,i)}s=t}const a=new Array(i.length),c=new Array(i.length/3*2);for(let t=s.length-3;t>=0;t-=3){const e=s[t+0],o=s[t+1],u=s[t+2],l=3*e,h=3*o,f=3*u,d=2*e,g=2*o,m=2*u,p=i[l+0],_=i[l+1],b=i[l+2],A=Math.acos(b/Math.sqrt(p*p+_*_+b*b)),E=Math.atan2(_,p)+n,y=A/n,v=1-E/r,T=i[h+0],B=i[h+1],C=i[h+2],O=Math.acos(C/Math.sqrt(T*T+B*B+C*C)),S=Math.atan2(B,T)+n,w=O/n,I=1-S/r,R=i[f+0],x=i[f+1],N=i[f+2],F=Math.acos(N/Math.sqrt(R*R+x*x+N*N)),L=Math.atan2(x,R)+n,D=F/n,P=1-L/r,U=[R-T,x-B,N-C],G=[p-T,_-B,b-C],j=new M.a(U).cross(G).normalize();let H;(0===v||0===I||0===P)&&(0===v||v>.5)&&(0===I||I>.5)&&(0===P||P>.5)&&(i.push(i[l+0],i[l+1],i[l+2]),H=i.length/3-1,s.push(H),c[2*H+0]=1,c[2*H+1]=y,a[3*H+0]=j.x,a[3*H+1]=j.y,a[3*H+2]=j.z,i.push(i[h+0],i[h+1],i[h+2]),H=i.length/3-1,s.push(H),c[2*H+0]=1,c[2*H+1]=w,a[3*H+0]=j.x,a[3*H+1]=j.y,a[3*H+2]=j.z,i.push(i[f+0],i[f+1],i[f+2]),H=i.length/3-1,s.push(H),c[2*H+0]=1,c[2*H+1]=D,a[3*H+0]=j.x,a[3*H+1]=j.y,a[3*H+2]=j.z),a[l+0]=a[h+0]=a[f+0]=j.x,a[l+1]=a[h+1]=a[f+1]=j.y,a[l+2]=a[h+2]=a[f+2]=j.z,c[d+0]=v,c[d+1]=y,c[g+0]=I,c[g+1]=w,c[m+0]=P,c[m+1]=D}return{indices:{size:1,value:new Uint16Array(s)},attributes:{POSITION:{size:3,value:new Float32Array(i)},NORMAL:{size:3,value:new Float32Array(a)},TEXCOORD_0:{size:2,value:new Float32Array(c)}}}}(t);super({...t,id:e,indices:n,attributes:{...r,...t.attributes}})}}class D extends B.a{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e=Object(O.c)("plane-geometry")}=t,{indices:n,attributes:r}=function(t){const{type:e="x,y",offset:n=0,flipCull:r=!1,unpack:i=!1}=t,s=e.split(",");let o=t["".concat(s[0],"len")]||1;const a=t["".concat(s[1],"len")]||1,c=t["n".concat(s[0])]||1,u=t["n".concat(s[1])]||1,l=(c+1)*(u+1),h=new Float32Array(3*l),f=new Float32Array(3*l),d=new Float32Array(2*l);r&&(o=-o);let g=0,m=0;for(let t=0;t<=u;t++)for(let i=0;i<=c;i++){const s=i/c,l=t/u;switch(d[g+0]=r?1-s:s,d[g+1]=l,e){case"x,y":h[m+0]=o*s-.5*o,h[m+1]=a*l-.5*a,h[m+2]=n,f[m+0]=0,f[m+1]=0,f[m+2]=r?1:-1;break;case"x,z":h[m+0]=o*s-.5*o,h[m+1]=n,h[m+2]=a*l-.5*a,f[m+0]=0,f[m+1]=r?1:-1,f[m+2]=0;break;case"y,z":h[m+0]=n,h[m+1]=o*s-.5*o,h[m+2]=a*l-.5*a,f[m+0]=r?1:-1,f[m+1]=0,f[m+2]=0;break;default:throw new Error("PlaneGeometry: unknown type")}g+=2,m+=3}const p=c+1,_=new Uint16Array(c*u*6);for(let t=0;t<u;t++)for(let e=0;e<c;e++){const n=6*(t*c+e);_[n+0]=(t+0)*p+e,_[n+1]=(t+1)*p+e,_[n+2]=(t+0)*p+e+1,_[n+3]=(t+1)*p+e,_[n+4]=(t+1)*p+e+1,_[n+5]=(t+0)*p+e+1}const b={indices:{size:1,value:_},attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:f},TEXCOORD_0:{size:2,value:d}}};return i?function(t){const{indices:e,attributes:n}=t;if(!e)return t;const r=e.value.length,i={};for(const t in n){const s=n[t],{constant:o,value:a,size:c}=s;if(o||!c)continue;const u=new a.constructor(r*c);for(let t=0;t<r;++t){const n=e.value[t];for(let e=0;e<c;e++)u[t*c+e]=a[n*c+e]}i[t]={size:c,value:u}}return{attributes:Object.assign({},n,i)}}(b):b}(t);super({...t,id:e,indices:n,attributes:{...r,...t.attributes}})}}class P extends B.a{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e=Object(O.c)("sphere-geometry")}=t,{indices:n,attributes:r}=function(t){const{nlat:e=10,nlong:n=10}=t;let{radius:r=1}=t;const i=Math.PI-0,s=2*Math.PI-0,o=(e+1)*(n+1);if("number"==typeof r){const t=r;r=(e,n,r,i,s)=>t}const a=new Float32Array(3*o),c=new Float32Array(3*o),u=new Float32Array(2*o),l=new(o>65535?Uint32Array:Uint16Array)(e*n*6);for(let t=0;t<=e;t++)for(let o=0;o<=n;o++){const l=o/n,h=t/e,f=o+t*(n+1),d=2*f,g=3*f,m=s*l,p=i*h,_=Math.sin(m),b=Math.cos(m),A=Math.sin(p),E=Math.cos(p),y=b*A,v=E,T=_*A,B=r(y,v,T,l,h);a[g+0]=B*y,a[g+1]=B*v,a[g+2]=B*T,c[g+0]=y,c[g+1]=v,c[g+2]=T,u[d+0]=l,u[d+1]=1-h}const h=n+1;for(let t=0;t<n;t++)for(let n=0;n<e;n++){const r=6*(t*e+n);l[r+0]=n*h+t,l[r+1]=n*h+t+1,l[r+2]=(n+1)*h+t,l[r+3]=(n+1)*h+t,l[r+4]=n*h+t+1,l[r+5]=(n+1)*h+t+1}return{indices:{size:1,value:l},attributes:{POSITION:{size:3,value:a},NORMAL:{size:3,value:c},TEXCOORD_0:{size:2,value:u}}}}(t);super({...t,id:e,indices:n,attributes:{...r,...t.attributes}})}}var U=n(956),G=n(2141);function j(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Math.fround(t),i=t-r;return e[n]=r,e[n+1]=i,e}function H(t){return t-Math.fround(t)}function k(t){const e=new Float32Array(32);for(let n=0;n<4;++n)for(let r=0;r<4;++r){const i=4*n+r;j(t[4*r+n],e,2*i)}return e}const V={ONE:1};const z={name:"fp64",vs:"const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09);\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09);\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10);\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11);\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12);\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13);\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14);\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15);\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\nvec2 exp_fp64(vec2 a) {\n\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n\n\n\n\n\n  s = sum_fp64(s, t);\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n",fs:null,dependencies:[{name:"fp64-arithmetic",vs:"uniform float ONE;\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n",fs:null,getUniforms:function(){return V},fp64ify:j,fp64LowPart:H,fp64ifyMatrix4:k}],fp64ify:j,fp64LowPart:H,fp64ifyMatrix4:k};var X=n(1461);const J=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],W={modelMatrix:J,viewMatrix:J,projectionMatrix:J,cameraPositionWorld:[0,0,0]};const K="varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n",q={name:"project",getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W;const e={};return void 0!==t.modelMatrix&&(e.modelMatrix=t.modelMatrix),void 0!==t.viewMatrix&&(e.viewMatrix=t.viewMatrix),void 0!==t.projectionMatrix&&(e.projectionMatrix=t.projectionMatrix),void 0!==t.cameraPositionWorld&&(e.cameraPositionWorld=t.cameraPositionWorld),void 0===t.projectionMatrix&&void 0===t.viewMatrix||(e.viewProjectionMatrix=new X.a(t.projectionMatrix).multiplyRight(t.viewMatrix)),e},vs:"".concat(K,"\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n"),fs:"\n".concat(K)},Q={lightDirection:new Float32Array([1,1,2])};const Y={name:"dirlight",vs:null,fs:"uniform vec3 dirlight_uLightDirection;\nvec4 dirlight_filterColor(vec4 color) {\n  vec3 normal = project_getNormal_World();\n  float d = abs(dot(normalize(normal), normalize(dirlight_uLightDirection)));\n  return vec4(color.rgb * d, color.a);\n}\n",getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q;const e={};return t.lightDirection&&(e.dirlight_uLightDirection=t.lightDirection),e},dependencies:[q]};var Z=n(2102),$=n(1386),tt=n(2211),et=n(39)},73:function(t,e,n){"use strict";n.d(e,"f",(function(){return m})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return _})),n.d(e,"i",(function(){return b})),n.d(e,"g",(function(){return A})),n.d(e,"h",(function(){return E})),n.d(e,"b",(function(){return B})),n.d(e,"c",(function(){return C})),n.d(e,"a",(function(){return O}));var r=n(3);let i,s,o,a,c,u,l,h,f=function(t){return t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth",t}({});class d{static isNull(t){return t&&t.typeId===f.Null}static isInt(t){return t&&t.typeId===f.Int}static isFloat(t){return t&&t.typeId===f.Float}static isBinary(t){return t&&t.typeId===f.Binary}static isUtf8(t){return t&&t.typeId===f.Utf8}static isBool(t){return t&&t.typeId===f.Bool}static isDecimal(t){return t&&t.typeId===f.Decimal}static isDate(t){return t&&t.typeId===f.Date}static isTime(t){return t&&t.typeId===f.Time}static isTimestamp(t){return t&&t.typeId===f.Timestamp}static isInterval(t){return t&&t.typeId===f.Interval}static isList(t){return t&&t.typeId===f.List}static isStruct(t){return t&&t.typeId===f.Struct}static isUnion(t){return t&&t.typeId===f.Union}static isFixedSizeBinary(t){return t&&t.typeId===f.FixedSizeBinary}static isFixedSizeList(t){return t&&t.typeId===f.FixedSizeList}static isMap(t){return t&&t.typeId===f.Map}static isDictionary(t){return t&&t.typeId===f.Dictionary}get typeId(){return f.NONE}compareTo(t){return this===t}}Symbol.toStringTag;Symbol.toStringTag;i=Symbol.toStringTag;class g extends d{constructor(t,e){super(),Object(r.a)(this,"isSigned",void 0),Object(r.a)(this,"bitWidth",void 0),this.isSigned=t,this.bitWidth=e}get typeId(){return f.Int}get[i](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class m extends g{constructor(){super(!0,8)}}class p extends g{constructor(){super(!0,16)}}class _ extends g{constructor(){super(!0,32)}}class b extends g{constructor(){super(!1,8)}}class A extends g{constructor(){super(!1,16)}}class E extends g{constructor(){super(!1,32)}}const y=32,v=64;s=Symbol.toStringTag;class T extends d{constructor(t){super(),Object(r.a)(this,"precision",void 0),this.precision=t}get typeId(){return f.Float}get[s](){return"Float"}toString(){return"Float".concat(this.precision)}}class B extends T{constructor(){super(y)}}class C extends T{constructor(){super(v)}}Symbol.toStringTag;Symbol.toStringTag;o=Symbol.toStringTag;a=Symbol.toStringTag;c=Symbol.toStringTag;u=Symbol.toStringTag;l=Symbol.toStringTag;class O extends d{constructor(t,e){super(),Object(r.a)(this,"listSize",void 0),Object(r.a)(this,"children",void 0),this.listSize=t,this.children=[e]}get typeId(){return f.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[l](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}h=Symbol.toStringTag},77:function(t,e,n){"use strict";n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return o})),n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"i",(function(){return l})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"h",(function(){return d}));const r=t=>"boolean"==typeof t,i=t=>"function"==typeof t,s=t=>null!==t&&"object"==typeof t,o=t=>s(t)&&t.constructor==={}.constructor,a=t=>Boolean(t)&&"function"==typeof t[Symbol.iterator],c=t=>t&&"function"==typeof t[Symbol.asyncIterator],u=t=>t&&i(t.next),l=t=>"undefined"!=typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,h=t=>"undefined"!=typeof Blob&&t instanceof Blob,f=t=>t&&"object"==typeof t&&t.isBuffer,d=t=>(t=>"undefined"!=typeof ReadableStream&&t instanceof ReadableStream||s(t)&&i(t.tee)&&i(t.cancel)&&i(t.getReader))(t)||(t=>s(t)&&i(t.read)&&i(t.pipe)&&r(t.readable))(t)},776:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(29);function i(t,e,n,i){const s="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(t);i.forEach(t=>{o.methodName||(o[t]=()=>{throw r.k.removed("Calling removed method ".concat(e,".").concat(t,": "),s)(),new Error(t)})})}},778:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r="4.1.0-alpha.4"},798:function(t,e,n){"use strict";n.d(e,"a",(function(){return L}));var r=n(29),i=n(951),s=n(188),o=n(39),a=n(809),c=n(2206),u=n(243),l=n(134),h=n(161);let f=null;function d(t,e){var n;return new t((n=t.BYTES_PER_ELEMENT*e,(!f||f.byteLength<n)&&(f=new ArrayBuffer(n)),f),0,e)}var g=n(2158);class m extends h.a{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||(Object(r.j)(t)||"Chrome"===Object(g.a)())}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new m(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return m.MAX_ATTRIBUTES=m.MAX_ATTRIBUTES||t.getParameter(34921),m.MAX_ATTRIBUTES}static setConstant(t,e,n){switch(n.constructor){case Float32Array:m._setConstantFloatArray(t,e,n);break;case Int32Array:m._setConstantIntArray(t,e,n);break;case Uint32Array:m._setConstantUintArray(t,e,n);break;default:Object(o.a)(!1)}}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.id||e.program&&e.program.id;super(t,Object.assign({},e,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=e.isDefaultArray||!1,this.gl2=t,this.initialize(e),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return m.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(o.a)(!t||34963===t.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,t?t.handle:null)}),this}setBuffer(t,e,n){if(34963===e.target)return this.setElementBuffer(e,n);const{size:i,type:s,stride:a,offset:c,normalized:u,integer:l,divisor:h}=n,{gl:f,gl2:d}=this;return t=Number(t),this.bind(()=>{f.bindBuffer(34962,e.handle),l?(Object(o.a)(Object(r.j)(f)),d.vertexAttribIPointer(t,i,s,a,c)):f.vertexAttribPointer(t,i,s,u,a,c),f.enableVertexAttribArray(t),d.vertexAttribDivisor(t,h||0)}),this}enable(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!e&&0===t&&!m.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind(()=>e?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t))),this}getConstantBuffer(t,e){const n=this._normalizeConstantArrayValue(e),r=n.byteLength*t,i=n.length*t;let s=!this.buffer;if(this.buffer=this.buffer||new l.a(this.gl,r),s=s||this.buffer.reallocate(r),s=s||!this._compareConstantArrayValues(n,this.bufferValue),s){const t=d(e.constructor,i);!function(t){let{target:e,source:n,start:r=0,count:i=1}=t;const s=n.length,o=i*s;let a=0;for(let t=r;a<s;a++)e[t++]=n[a];for(;a<o;)a<o-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+o-a),a=o)}({target:t,source:n,start:0,count:i}),this.buffer.subData(t),this.bufferValue=e}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}static _setConstantFloatArray(t,e,n){switch(n.length){case 1:t.vertexAttrib1fv(e,n);break;case 2:t.vertexAttrib2fv(e,n);break;case 3:t.vertexAttrib3fv(e,n);break;case 4:t.vertexAttrib4fv(e,n);break;default:Object(o.a)(!1)}}static _setConstantIntArray(t,e,n){switch(Object(o.a)(Object(r.j)(t)),n.length){case 1:t.vertexAttribI1iv(e,n);break;case 2:t.vertexAttribI2iv(e,n);break;case 3:t.vertexAttribI3iv(e,n);break;case 4:t.vertexAttribI4iv(e,n);break;default:Object(o.a)(!1)}}static _setConstantUintArray(t,e,n){switch(Object(o.a)(Object(r.j)(t)),n.length){case 1:t.vertexAttribI1uiv(e,n);break;case 2:t.vertexAttribI2uiv(e,n);break;case 3:t.vertexAttribI3uiv(e,n);break;case 4:t.vertexAttribI4uiv(e,n);break;default:Object(o.a)(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,e){let{location:n}=e;return Object(o.a)(Number.isFinite(n)),this.bind(()=>{switch(t){case 34373:return this.gl.getVertexAttribOffset(n,t);default:return this.gl.getVertexAttrib(n,t)}})}}var p=n(776);const _=/^(.+)__LOCATION_([0-9]+)$/,b=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class A{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.id||e.program&&e.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new m(t),Object(p.a)(this,"VertexArray","v6.0",b),this.initialize(e),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind(()=>{for(const e in t){const n=t[e];this._setAttribute(e,n)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this}setBuffer(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===e.target)return this.setElementBuffer(e,n);const{location:r,accessor:i}=this._resolveLocationAndAccessor(t,e,e.accessor,n);return r>=0&&(this.values[r]=e,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,e,i)),this}setConstant(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:i}=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},n));return r>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e),this.values[r]=e,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new l.a(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof l.a&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const e=this.values[t];e instanceof l.a&&this.setBuffer(t,e)}}),this}bindForDraw(t,e,n){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(t,e),r=n()}),r}_resolveLocationAndAccessor(t,e,n,i){const s={location:-1,accessor:null},{location:a,name:c}=this._getAttributeIndex(t);if(!Number.isFinite(a)||a<0)return this.unused[t]=e,r.k.once(3,()=>"unused value ".concat(t," in ").concat(this.id))(),s;const l=this._getAttributeInfo(c||a);if(!l)return s;const h=this.accessors[a]||{},f=u.a.resolve(l.accessor,h,n,i),{size:d,type:g}=f;return Object(o.a)(Number.isFinite(d)&&Number.isFinite(g)),{location:a,accessor:f}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const e=Number(t);if(Number.isFinite(e))return{location:e};const n=_.exec(t),r=n?n[1]:t,i=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}_setAttribute(t,e){if(e instanceof l.a)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof l.a){const n=e[0],r=e[1];this.setBuffer(t,n,r)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){const n=e;this.setConstant(t,n)}else{if(!(e.buffer instanceof l.a))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");{const n=e;this.setBuffer(t,n.buffer,n)}}}_setConstantAttributes(t,e){const n=Math.max(0|t,0|e);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(let t=1;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)r=this.values[t],ArrayBuffer.isView(r)&&this._setConstantAttribute(t,r)}_setConstantAttributeZero(t,e){if(m.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,t);const n=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(t,e){m.setConstant(this.gl,t,e)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,e){const n=this.values[e],r=this.accessors[e];if(!n)return;const{divisor:i}=r,s=i>0;if(t.isInstanced=t.isInstanced||s,n instanceof l.a){const e=n;if(s){const n=e.getVertexCount(r);t.instanceCount=Math.min(t.instanceCount,n)}else{const n=e.getVertexCount(r);t.vertexCount=Math.min(t.vertexCount,n)}}}setElements(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.k.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)}}var E=n(2159),y=n(200),v=n(312);function T(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let s=0;s<t.length&&s<n;++s)s>0&&(i+=",".concat(s%r==0?" ":"")),i+=B(t[s],e);const s=t.length>n?"...":"]";return"".concat(i).concat(s)}function B(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=1e-16,{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return T(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return r?"0":"0.";if(r)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const i=t.toPrecision(2),s=i.indexOf(".0");return s===i.length-2?i.slice(0,-1):i}function C(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let s,o,a,c="NOT PROVIDED",u=1,h=0,f=0;if(n&&(c=n.type,u=n.size,c=String(c).replace("Array",""),s=-1!==c.indexOf("nt")),e instanceof l.a){const t=e,{data:l,changed:d}=t.getDebugData();let g;if(o=d?"*":"",a=l,f=t.byteLength,h=f/l.BYTES_PER_ELEMENT/u,n){const t=n.divisor>0;g="".concat(t?"I ":"P "," ").concat(h," (x").concat(u,"=").concat(f," bytes ").concat(Object(y.a)(i,c),")")}else s=!0,g="".concat(f," bytes");return{[r]:"".concat(o).concat(B(a,{size:u,isInteger:s})),"Format ":g}}return a=e,u=e.length,c=String(e.constructor.name).replace("Array",""),s=-1!==c.indexOf("nt"),{[r]:"".concat(B(a,{size:u,isInteger:s})," (constant)"),"Format ":"".concat(u,"x").concat(c," (constant)")}}function O(t,e){const{type:n,size:r}=e,i=Object(v.b)(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function S(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;Object(o.a)(n);const s=n._uniformSetters,a={},c=Object.keys(s).sort();let u=0;for(const t of c)t.match(".*_.*")||t.match(".*Matrix")||w({table:a,header:e,uniforms:r,uniformName:t,undefinedOnly:i})&&u++;for(const t of c)t.match(".*Matrix")&&w({table:a,header:e,uniforms:r,uniformName:t,undefinedOnly:i})&&u++;for(const t of c)a[t]||w({table:a,header:e,uniforms:r,uniformName:t,undefinedOnly:i})&&u++;let l=0;const h={};if(!i)for(const t in r){const n=r[t];a[t]||(l++,h[t]={Type:"NOT USED: ".concat(n),[e]:B(n)})}return{table:a,count:u,unusedTable:h,unusedCount:l}}function w(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:s}=t;const o=r[i],a=function(t){return null!=t}(o);return(!s||!a)&&(e[i]={[n]:a?B(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},!0)}function I(t){const{type:e,size:n}=t.accessor,r=Object(v.b)(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const R={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function x(t,e){const{attributeMap:n=R}=e||{};return n&&n[t]||t}function M(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}Object(o.a)(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const N=()=>{},F={};class L{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:n=Object(s.c)("model")}=e;Object(o.a)(Object(r.i)(t)),this.id=n,this.gl=t,this.id=e.id||Object(s.c)("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(e)}initialize(t){this.props={},this.programManager=t.programManager||i.a.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:e=null,vs:n,fs:r,modules:s,defines:a,inject:c,varyings:u,bufferMode:l,transpileToGLSL100:h}=t;this.programProps={program:e,vs:n,fs:r,modules:s,defines:a,inject:c,varyings:u,bufferMode:l,transpileToGLSL100:h},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=void 0!==t.drawMode?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},Object(o.a)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:e,vs:n,fs:r,modules:i,defines:s,inject:o,varyings:a,bufferMode:c,transpileToGLSL100:u}=t;this.programProps={program:e,vs:n,fs:r,modules:i,defines:s,inject:o,varyings:a,bufferMode:c,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return Object(o.a)(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return Object(o.a)(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(t,e,n){const r={};let i=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=x(s,n);if("indices"===s)i=o;else if(o.constant)r[a]=o.value;else{const e=o.value,n={...o};delete n.value,r[a]=[new l.a(t,e),n],M(s,n)}}if(i){const e=i.value||i;Object(o.a)(e instanceof Uint16Array||e instanceof Uint32Array,'attribute array for "indices" must be of integer type');const n={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};r.indices=[new l.a(t,{data:e,target:34963}),n]}return r}(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(s.a)(t))return this;const e={};for(const n in t){const r=t[n];e[n]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(e),this}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const e=this.programManager.getUniforms(this.program);return e?e(t):{}}updateModuleSettings(t){const e=this.getModuleUniforms(t||{});return this.setUniforms(e)}clear(t){return Object(a.a)(this.program.gl,t),this}draw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:e=null,framebuffer:n,uniforms:i={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=t;let u;this.setAttributes(s),this.updateModuleSettings(e),this.setUniforms(i),r.k.priority>=2&&(u=this._logDrawCallStart(2));const l=this.vertexArray.getDrawParams(),{isIndexed:h=l.isIndexed,indexType:f=l.indexType,indexOffset:d=l.indexOffset,vertexArrayInstanced:g=l.isInstanced}=this.props;g&&!this.isInstanced&&r.k.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:m,instanceCount:p}=this,{onBeforeRender:_=N,onAfterRender:b=N}=this.props;_(),this.program.setUniforms(this.uniforms);const A=this.program.draw(Object.assign(F,t,{logPriority:u,uniforms:null,framebuffer:n,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:o,isIndexed:h,indexType:f,isInstanced:m,instanceCount:p,offset:h?d:0}));return b(),r.k.priority>=2&&this._logDrawCallEnd(u,c,n),A}transform(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:e=!0,feedbackBuffers:n,unbindModels:r=[]}=t;let{parameters:i}=t;n&&this._setFeedbackBuffers(n),e&&(i=Object.assign({},i,{35977:e})),r.forEach(t=>t.vertexArray.unbindBuffers());try{this.draw(Object.assign({},t,{parameters:i}))}finally{r.forEach(t=>t.vertexArray.bindBuffers())}return this}render(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.k.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:e,fs:n,modules:r,inject:i,defines:s,varyings:o,bufferMode:a,transpileToGLSL100:c}=this.programProps;t=this.programManager.get({vs:e,fs:n,modules:r,inject:i,defines:s,varyings:o,bufferMode:a,transpileToGLSL100:c}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Object(o.a)(t instanceof c.a,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new A(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const e=this.geometryBuffers[t][0]||this.geometryBuffers[t];e instanceof l.a&&e.delete()}}_setAnimationProps(t){this.animated&&Object(o.a)(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(s.a)(t))return this;const{gl:e}=this.program;return this.transformFeedback=this.transformFeedback||new E.a(e,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const e=t>3?0:1e4;if(!(Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),r.k.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:r.k.level<=2})(),t}_logDrawCallEnd(t,e,n,i){if(void 0===t)return;const s=function(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=C(e,e.elements,null,n));const i=e.values;for(const t in i){const s=e._getAttributeInfo(t);if(s){let o="".concat(t,": ").concat(s.name);const a=e.accessors[s.location];a&&(o="".concat(t,": ").concat(O(s.name,a))),r[o]=C(e,i[t],a,n)}}return r}({vertexArray:e,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:c}=S({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:u,count:l}=S({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});l>0&&r.k.log("MISSING UNIFORMS",Object.keys(u))(),c>0&&r.k.log("UNUSED UNIFORMS",Object.keys(a))();const h=function(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const t=I(r);e["in ".concat(t)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const t=I(r);e["out ".concat(t)]={[n]:JSON.stringify(r.accessor)}}return e}(this.vertexArray.configuration);r.k.table(t,s)(),r.k.table(t,o)(),r.k.table(t+1,h)(),i&&i.log({logLevel:2,message:"Rendered to ".concat(i.id)}),r.k.groupEnd(2)()}}},802:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(77),i=n(442),s=n(427);async function o(t,e){if("string"==typeof t){const s=Object(i.a)(t);var n,r;if(function(t){return!function(t){return t.startsWith("http:")||t.startsWith("https:")}(t)&&!function(t){return t.startsWith("data:")}(t)}(s))if(null!==(n=globalThis.loaders)&&void 0!==n&&n.fetchNode)return null===(r=globalThis.loaders)||void 0===r?void 0:r.fetchNode(s,e);return await fetch(s,e)}return await Object(s.b)(t)}var a=n(261);function c(t,e){const n=Object(a.a)(),i=t||n;return"function"==typeof i.fetch?i.fetch:Object(r.f)(i.fetch)?t=>o(t,i.fetch):null!=e&&e.fetch?null==e?void 0:e.fetch:o}},808:function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}n.d(e,"a",(function(){return r}))},809:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var r=n(29),i=n(39);const s=6144;function o(t){let{framebuffer:e=null,color:n=null,depth:s=null,stencil:o=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a={};e&&(a.framebuffer=e);let c=0;n&&(c|=16384,!0!==n&&(a.clearColor=n)),s&&(c|=256,!0!==s&&(a.clearDepth=s)),o&&(c|=1024,!0!==s&&(a.clearStencil=s)),Object(i.a)(0!==c,"clear: bad arguments"),Object(r.o)(t,a,()=>{t.clear(c)})}function a(t){let{framebuffer:e=null,buffer:n=s,drawBuffer:o=0,value:a=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(t),Object(r.o)(t,{framebuffer:e},()=>{switch(n){case s:switch(a.constructor){case Int32Array:t.clearBufferiv(n,o,a);break;case Uint32Array:t.clearBufferuiv(n,o,a);break;case Float32Array:default:t.clearBufferfv(n,o,a)}break;case 6145:t.clearBufferfv(6145,0,[a]);break;case 6146:t.clearBufferiv(6146,0,[a]);break;case 34041:const[e,r]=a;t.clearBufferfi(34041,0,e,r);break;default:Object(i.a)(!1,"clear: bad arguments")}})}},810:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(275),i=n(425);const s={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};e.b={[s.WEBGL2]:[!1,!0],[s.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[s.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[s.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[s.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[s.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[s.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[s.FLOAT_BLEND]:["EXT_float_blend"],[s.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[s.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[s.TEXTURE_FLOAT]:["OES_texture_float",!0],[s.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[s.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[s.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[s.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[s.COLOR_ATTACHMENT_RGBA32F]:[function(t){const e=new i.a(t,{format:6408,type:5126,dataFormat:6408}),n=new r.a(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),s=n.getStatus();return e.delete(),n.delete(),36053===s},"EXT_color_buffer_float"],[s.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[s.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[s.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[s.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[s.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[s.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]}},818:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(33),i=n(1459),s=n(1460),o=n(110),a=n(171);function c(t,e){return Object.keys(t).reduce((function(n,i){return n[i]=Object(r.a)({timeZone:e},t[i]),n}),{})}function u(t,e){return Object.keys(Object(r.a)(Object(r.a)({},t),e)).reduce((function(n,i){return n[i]=Object(r.a)(Object(r.a)({},t[i]||{}),e[i]||{}),n}),{})}function l(t,e){if(!e)return t;var n=s.a.formats;return Object(r.a)(Object(r.a)(Object(r.a)({},n),t),{date:u(c(n.date,e),c(t.date||{},e)),time:u(c(n.time,e),c(t.time||{},e))})}var h=function(t,e,n,s,c){var u=t.locale,h=t.formats,f=t.messages,d=t.defaultLocale,g=t.defaultFormats,m=t.fallbackOnEmptyString,p=t.onError,_=t.timeZone,b=t.defaultRichTextElements;void 0===n&&(n={id:""});var A=n.id,E=n.defaultMessage;Object(i.a)(!!A,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var y=String(A),v=f&&Object.prototype.hasOwnProperty.call(f,y)&&f[y];if(Array.isArray(v)&&1===v.length&&v[0].type===a.a.literal)return v[0].value;if(!s&&v&&"string"==typeof v&&!b)return v.replace(/'\{(.*?)\}'/gi,"{$1}");if(s=Object(r.a)(Object(r.a)({},b),s||{}),h=l(h,_),g=l(g,_),!v){if(!1===m&&""===v)return v;if((!E||u&&u.toLowerCase()!==d.toLowerCase())&&p(new o.g(n,u)),E)try{return e.getMessageFormat(E,d,g,c).format(s)}catch(t){return p(new o.e('Error formatting default message for: "'.concat(y,'", rendering default message verbatim'),u,n,t)),"string"==typeof E?E:y}return y}try{return e.getMessageFormat(v,u,h,Object(r.a)({formatters:e},c||{})).format(s)}catch(t){p(new o.e('Error formatting message: "'.concat(y,'", using ').concat(E?"default message":"id"," as fallback."),u,n,t))}if(E)try{return e.getMessageFormat(E,d,g,c).format(s)}catch(t){p(new o.e('Error formatting the default message for: "'.concat(y,'", rendering message verbatim'),u,n,t))}return"string"==typeof v?v:"string"==typeof E?E:y}},819:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return h}));var r=n(294),i=n(808);const s={[r.b]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",[r.a]:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},o="__LUMA_INJECT_DECLARATIONS__",a=/void\s+main\s*\([^)]*\)\s*\{\n?/,c=/}\n?[^{}]*$/,u=[];function l(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const l=e===r.b;for(const e in n){const r=n[e];r.sort((t,e)=>t.order-e.order),u.length=r.length;for(let t=0,e=r.length;t<e;++t)u[t]=r[t].injection;const i="".concat(u.join("\n"),"\n");switch(e){case"vs:#decl":l&&(t=t.replace(o,i));break;case"vs:#main-start":l&&(t=t.replace(a,t=>t+i));break;case"vs:#main-end":l&&(t=t.replace(c,t=>i+t));break;case"fs:#decl":l||(t=t.replace(o,i));break;case"fs:#main-start":l||(t=t.replace(a,t=>t+i));break;case"fs:#main-end":l||(t=t.replace(c,t=>i+t));break;default:t=t.replace(e,t=>t+i)}}return t=t.replace(o,""),i&&(t=t.replace(/\}\s*$/,t=>t+s[e])),t}function h(t){const e={};return Object(i.a)(Array.isArray(t)&&t.length>1),t.forEach(t=>{for(const n in t)e[n]=e[n]?"".concat(e[n],"\n").concat(t[n]):t[n]}),e}},84:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={};n.r(r),n.d(r,"filename",(function(){return s})),n.d(r,"dirname",(function(){return o})),n.d(r,"join",(function(){return a})),n.d(r,"resolve",(function(){return c}));var i=n(1404);function s(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function o(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}function a(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r="/";return(e=e.map((t,n)=>(n&&(t=t.replace(new RegExp("^"+r),"")),n!==e.length-1&&(t=t.replace(new RegExp(r+"$"),"")),t))).join(r)}function c(){const t=[];for(let e=0;e<arguments.length;e++)t[e]=e<0||arguments.length<=e?void 0:arguments[e];let e,n="",r=!1;for(let s=t.length-1;s>=-1&&!r;s--){let o;s>=0?o=t[s]:(void 0===e&&(e=Object(i.a)()),o=e),0!==o.length&&(n=`${o}/${n}`,r=o.charCodeAt(0)===u)}return n=l(n,!r),r?"/"+n:n.length>0?n:"."}const u=47;function l(t,e){let n,r="",i=-1,s=0,o=!1;for(let a=0;a<=t.length;++a){if(a<t.length)n=t.charCodeAt(a);else{if(n===u)break;n=u}if(n===u){if(i===a-1||1===s);else if(i!==a-1&&2===s){if(r.length<2||!o||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){const t=r.length-1;let e=t;for(;e>=0&&r.charCodeAt(e)!==u;--e);if(e!==t){r=-1===e?"":r.slice(0,e),i=a,s=0,o=!1;continue}}else if(2===r.length||1===r.length){r="",i=a,s=0,o=!1;continue}e&&(r.length>0?r+="/..":r="..",o=!0)}else{const e=t.slice(i+1,a);r.length>0?r+="/"+e:r=e,o=!1}i=a,s=0}else 46===n&&-1!==s?++s:s=-1}return r}},849:function(t,e,n){"use strict";function r(t){let e=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,o=-1/0;const a=t.POSITION?t.POSITION.value:[],c=a&&a.length;for(let t=0;t<c;t+=3){const c=a[t],u=a[t+1],l=a[t+2];e=c<e?c:e,n=u<n?u:n,r=l<r?l:r,i=c>i?c:i,s=u>s?u:s,o=l>o?l:o}return[[e,n,r],[i,s,o]]}n.d(e,"a",(function(){return r}))},90:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return s})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return c}));const r={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5},i={ADD:1,REPLACE:2},s={EMPTY:"empty",SCENEGRAPH:"scenegraph",POINTCLOUD:"pointcloud",MESH:"mesh"},o={I3S:"I3S",TILES3D:"TILES3D"},a={GEOMETRIC_ERROR:"geometricError",MAX_SCREEN_THRESHOLD:"maxScreenThreshold"},c={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0}},920:function(t,e,n){"use strict";n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return b}));var r=n(155);class i{terminate(){}}var s=n(211);const o=new Map;function a(t){Object(s.a)(t.source&&!t.url||!t.source&&t.url);let e=o.get(t.source||t.url);return e||(t.url&&(e=function(t){if(!t.startsWith("http"))return t;return c((e=t,`try {\n  importScripts('${e}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`));var e}(t.url),o.set(t.url,e)),t.source&&(e=c(t.source),o.set(t.source,e))),Object(s.a)(e),e}function c(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function u(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&t instanceof MessagePort||("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}const l=()=>{};class h{static isSupported(){return"undefined"!=typeof Worker&&r.a||void 0!==i&&!r.a}constructor(t){this.name=void 0,this.source=void 0,this.url=void 0,this.terminated=!1,this.worker=void 0,this.onMessage=void 0,this.onError=void 0,this._loadableURL="";const{name:e,source:n,url:i}=t;Object(s.a)(n||i),this.name=e,this.source=n,this.url=i,this.onMessage=l,this.onError=t=>console.log(t),this.worker=r.a?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=l,this.onError=l,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,e){e=e||function t(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;const i=r||new Set;if(e){if(u(e))i.add(e);else if(u(e.buffer))i.add(e.buffer);else if(ArrayBuffer.isView(e));else if(n&&"object"==typeof e)for(const r in e)t(e[r],n,i)}else;return void 0===r?Array.from(i):[]}(t),this.worker.postMessage(t,e)}_getErrorFromErrorEvent(t){let e="Failed to load ";return e+=`worker ${this.name} from ${this.url}. `,t.message&&(e+=t.message+" in "),t.lineno&&(e+=`:${t.lineno}:${t.colno}`),new Error(e)}_createBrowserWorker(){this._loadableURL=a({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},t.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},t.onmessageerror=t=>console.error(t),t}_createNodeWorker(){let t;if(this.url){const e=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./"+this.url;t=new i(e,{eval:!1})}else{if(!this.source)throw new Error("no worker");t=new i(this.source,{eval:!0})}return t.on("message",t=>{this.onMessage(t)}),t.on("error",t=>{this.onError(t)}),t.on("exit",t=>{}),t}}class f{constructor(t,e){this.name=void 0,this.workerThread=void 0,this.isRunning=!0,this.result=void 0,this._resolve=()=>{},this._reject=()=>{},this.name=t,this.workerThread=e,this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e})}postMessage(t,e){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:e})}done(t){Object(s.a)(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){Object(s.a)(this.isRunning),this.isRunning=!1,this._reject(t)}}class d{static isSupported(){return h.isSupported()}constructor(t){this.name="unnamed",this.source=void 0,this.url=void 0,this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=()=>{},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)}async startJob(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t,e,n)=>t.done(n),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(t,e)=>t.error(e);const r=new Promise(r=>(this.jobQueue.push({name:t,onMessage:e,onError:n,onStart:r}),this));return this._startQueuedJob(),await r}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const e=this.jobQueue.shift();if(e){this.onDebug({message:"Starting job",name:e.name,workerThread:t,backlog:this.jobQueue.length});const n=new f(e.name,t);t.onMessage=t=>e.onMessage(n,t.type,t.payload),t.onError=t=>e.onError(n,t),e.onStart(n);try{await n.result}catch(t){console.error("Worker exception: "+t)}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){!r.a||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new h({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return r.b?this.maxMobileConcurrency:this.maxConcurrency}}const g={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class m{static isSupported(){return h.isSupported()}static getWorkerFarm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m._workerFarm=m._workerFarm||new m({}),m._workerFarm.setProps(t),m._workerFarm}constructor(t){this.props=void 0,this.workerPools=new Map,this.props={...g},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:e,source:n,url:r}=t;let i=this.workerPools.get(e);return i||(i=new d({name:e,source:n,url:r}),i.setProps(this._getWorkerPoolProps()),this.workerPools.set(e,i)),i}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}m._workerFarm=void 0;var p=n(367);function _(t,e){return!!m.isSupported()&&(!!(r.a||null!=e&&e._nodeWorkers)&&(t.worker&&(null==e?void 0:e.worker)))}async function b(t,e,n,i,o){const a=t.id,c=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e[t.id]||{},i=r.a?t.id+"-worker.js":t.id+"-worker-node.js";let o=n.workerUrl;if(o||"compression"!==t.id||(o=e.workerUrl),"test"===e._workerType&&(o=r.a?`modules/${t.module}/dist/${i}`:`modules/${t.module}/src/workers/${t.id}-worker-node.ts`),!o){let e=t.version;"latest"===e&&(e=p.a);const n=e?"@"+e:"";o=`https://unpkg.com/@loaders.gl/${t.module}${n}/dist/${i}`}return Object(s.a)(o),o}(t,n),u=m.getWorkerFarm(n).getWorkerPool({name:a,url:c});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));const l=await u.startJob("process-on-worker",A.bind(null,o));l.postMessage("process",{input:e,options:n,context:i});const h=await l.result;return await h.result}async function A(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:s,options:o}=r;try{const n=await t(s,o);e.postMessage("done",{id:i,result:n})}catch(t){const n=t instanceof Error?t.message:"unknown error";e.postMessage("error",{id:i,error:n})}break;default:console.warn("parse-with-worker unknown message "+n)}}},945:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(3);class i{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map;Object(r.a)(this,"name",void 0),Object(r.a)(this,"type",void 0),Object(r.a)(this,"nullable",void 0),Object(r.a)(this,"metadata",void 0),this.name=t,this.type=e,this.nullable=n,this.metadata=i}get typeId(){return this.type&&this.type.typeId}clone(){return new i(this.name,this.type,this.nullable,this.metadata)}compareTo(t){return this.name===t.name&&this.type===t.type&&this.nullable===t.nullable&&this.metadata===t.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}},951:function(t,e,n){"use strict";n.d(e,"a",(function(){return N}));var r=n(294),i=n(956),s=n(808);function o(t){return a(function t(e,n){return e.map(e=>(e instanceof i.a||(Object(s.a)("string"!=typeof e,"Shader module use by name is deprecated. Import shader module '".concat(e,"' and use it directly.")),Object(s.a)(e.name,"shader module has no name"),(e=new i.a(e)).dependencies=t(e.dependencies)),e))}(t))}function a(t){const e={},n={};return c({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((t,e)=>n[e]-n[t]).map(t=>e[t])}function c(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const t of e)r[t.name]=t,(void 0===i[t.name]||i[t.name]<n)&&(i[t.name]=n);for(const t of e)t.dependencies&&c({modules:t.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function u(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e="undefined"!=typeof window&&window.navigator||{},n=t.userAgent||e.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}const l={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},h={};Object.keys(l).forEach(t=>{h[t]=t});const f={};function d(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=l[e];if(Object(s.a)(r,e),!u(n))return!0;if(e in f)return f[e];const i=r[0],o=n.behavior||"enable",a="#extension GL_".concat(i," : ").concat(o,"\nvoid main(void) {}"),c=t.createShader(35633);t.shaderSource(c,a),t.compileShader(c);const h=t.getShaderParameter(c,35713);return t.deleteShader(c),f[e]=h,h}function g(t,e){const n=l[e];Object(s.a)(n,e);const r=function(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}(t)&&n[1]||n[0],i="string"==typeof r?Boolean(t.getExtension(r)):r;return Object(s.a)(!1===i||!0===i),i}function m(t,e){return(e=Array.isArray(e)?e:[e]).every(e=>g(t,e))}var p=n(819);function _(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const b=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],A=[...b,[_("attribute"),"in $1"],[_("varying"),"out $1"]],E=[...b,[_("varying"),"in $1"]],y=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],v=[...y,[_("in"),"attribute $1"],[_("out"),"varying $1"]],T=[...y,[_("in"),"varying $1"]],B=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,C=/void\s+main\s*\([^)]*\)\s*\{\n?/;function O(t,e,n){switch(e){case 300:return n?S(t,A):function(t){const e=(t=S(t,E)).match(B);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat("gl_FragColor","\\b"),"g"),n)}else{const e="fragmentColor";t=t.replace(C,t=>"out vec4 ".concat(e,";\n").concat(t)).replace(new RegExp("\\b".concat("gl_FragColor","\\b"),"g"),e)}return t}(t);case 100:return n?S(t,v):function(t){const e=(t=S(t,T)).match(B);if(e){const n=e[1];t=t.replace(B,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),"gl_FragColor")}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}function S(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}const w="\n\n".concat(p.a,"\n\n"),I={[r.b]:"vertex",[r.a]:"fragment"};function R(t,e){let{id:n,source:i,type:o,modules:a,defines:c={},hookFunctions:u=[],inject:l={},transpileToGLSL100:f=!1,prologue:g=!0,log:_}=e;Object(s.a)("string"==typeof i,"shader source must be a string");const b=o===r.b,A=i.split("\n");let E=100,y="",v=i;0===A[0].indexOf("#version ")?(E=300,y=A[0],v=A.slice(1).join("\n")):y="#version ".concat(E);const T={};a.forEach(t=>{Object.assign(T,t.getDefines())}),Object.assign(T,c);let B=g?"".concat(y,"\n").concat(function(t){let{id:e,source:n,type:r}=t;return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(I[r],"\n\n"):""}({id:n,source:i,type:o}),"\n").concat(function(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(I[e].toUpperCase(),"\n")}({type:o}),"\n").concat(function(t){switch(function(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||7936),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||7937);return{gpuVendor:function(t,e){if(t.match(/NVIDIA/i)||e.match(/NVIDIA/i))return"NVIDIA";if(t.match(/INTEL/i)||e.match(/INTEL/i))return"INTEL";if(t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i))return"AMD";return"UNKNOWN GPU"}(n,r),vendor:n,renderer:r,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat(function(t,e,n){let r="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return m(t,h.GLSL_FRAG_DEPTH)&&(r+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),m(t,h.GLSL_DERIVATIVES)&&d(t,h.GLSL_DERIVATIVES)&&(r+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),m(t,h.GLSL_FRAG_DATA)&&d(t,h.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),m(t,h.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),r}(t),"\n").concat(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(const r in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],"\n"))}0===e&&(n+="\n");return n}(T),"\n").concat(b?"":"precision highp float;\n\n","\n"):"".concat(y,"\n");const C=function(t){const e={vs:{},fs:{}};return t.forEach(t=>{let n;"string"!=typeof t?(n=t,t=n.hook):n={},t=t.trim();const[r,i]=t.split(":"),s=t.replace(/\(.+/,"");e[r][s]=Object.assign(n,{signature:i})}),e}(u),S={},R={},x={};for(const t in l){const e="string"==typeof l[t]?{injection:l[t],order:0}:l[t],n=t.match(/^(v|f)s:(#)?([\w-]+)$/);if(n){const r=n[2],i=n[3];r?"decl"===i?R[t]=[e]:x[t]=[e]:S[t]=[e]}else x[t]=[e]}for(const t of a){_&&t.checkDeprecations(v,_);B+=t.getModuleSource(o,E);const e=t.injections[o];for(const t in e){const n=t.match(/^(v|f)s:#([\w-]+)$/);if(n){const r="decl"===n[2]?R:x;r[t]=r[t]||[],r[t].push(e[t])}else S[t]=S[t]||[],S[t].push(e[t])}}return B+=w,B=Object(p.c)(B,o,R),B+=function(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature," {\n"),i.header&&(n+="  ".concat(i.header)),e[r]){const t=e[r];t.sort((t,e)=>t.order-e.order);for(const e of t)n+="  ".concat(e.injection,"\n")}i.footer&&(n+="  ".concat(i.footer)),n+="}\n"}return n}(C[o],S),B+=v,B=Object(p.c)(B,o,x),B=O(B,f?100:E,b),B}function x(t){return function(e){const n={};for(const r of t){const t=r.getUniforms(e,n);Object.assign(n,t)}return n}}var M=n(2206);class N{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new N(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find(e=>e.name===t.name)||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const e="string"==typeof t?t:t.name;this._defaultModules=this._defaultModules.filter(t=>t.name!==e),this.stateHash++}addShaderHook(t,e){e&&(t=Object.assign(e,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:e="",fs:n="",defines:i={},inject:s={},varyings:a=[],bufferMode:c=35981,transpileToGLSL100:u=!1}=t,l=this._getModuleList(t.modules),h=this._getHash(e),f=this._getHash(n),d=l.map(t=>this._getHash(t.name)).sort(),g=a.map(t=>this._getHash(t)),m=Object.keys(i).sort(),p=Object.keys(s).sort(),_=[],b=[];for(const t of m)_.push(this._getHash(t)),_.push(this._getHash(i[t]));for(const t of p)b.push(this._getHash(t)),b.push(this._getHash(s[t]));const A="".concat(h,"/").concat(f,"D").concat(_.join("/"),"M").concat(d.join("/"),"I").concat(b.join("/"),"V").concat(g.join("/"),"H").concat(this.stateHash,"B").concat(c).concat(u?"T":"");if(!this._programCache[A]){const t=function(t,e){const{vs:n,fs:i}=e,s=o(e.modules||[]);return{gl:t,vs:R(t,Object.assign({},e,{source:n,type:r.b,modules:s})),fs:R(t,Object.assign({},e,{source:i,type:r.a,modules:s})),getUniforms:x(s)}}(this.gl,{vs:e,fs:n,modules:l,inject:s,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:u});this._programCache[A]=new M.a(this.gl,{hash:A,vs:t.vs,fs:t.fs,varyings:a,bufferMode:c}),this._getUniforms[A]=t.getUniforms||(t=>{}),this._useCounts[A]=0}return this._useCounts[A]++,this._programCache[A]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const e=t.hash;this._useCounts[e]--,0===this._useCounts[e]&&(this._programCache[e].delete(),delete this._programCache[e],delete this._getUniforms[e],delete this._useCounts[e])}_getHash(t){return void 0===this._hashes[t]&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=new Array(this._defaultModules.length+t.length),n={};let r=0;for(let t=0,i=this._defaultModules.length;t<i;++t){const i=this._defaultModules[t],s=i.name;e[r++]=i,n[s]=!0}for(let i=0,s=t.length;i<s;++i){const s=t[i],o=s.name;n[o]||(e[r++]=s,n[o]=!0)}return e.length=r,e}}},955:function(t,e,n){"use strict";n.d(e,"c",(function(){return h})),n.d(e,"d",(function(){return f})),n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return g}));var r=n(134),i=n(275),s=n(222),o=n(29),a=n(212),c=n(39);function u(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Object(c.a)(!1),0}}var l=n(1406);function h(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:u,sourceHeight:l,sourceType:h}=e;const{framebuffer:f,deleteFramebuffer:d}=m(t);Object(c.a)(f);const{gl:g,handle:_,attachments:b}=f;u=u||f.width,l=l||f.height,36064===s&&null===_&&(s=1028),Object(c.a)(b[s]),h=h||b[s].type,o=p(o,h,i,u,l),h=h||Object(a.b)(o);const A=g.bindFramebuffer(36160,_);return g.readPixels(n,r,u,l,i,h,o),g.bindFramebuffer(36160,A||null),d&&f.delete(),o}function f(t,e){let{sourceX:n=0,sourceY:i=0,sourceFormat:s=6408,target:a=null,targetByteOffset:l=0,sourceWidth:h,sourceHeight:f,sourceType:d}=e;const{framebuffer:g,deleteFramebuffer:p}=m(t);Object(c.a)(g),h=h||g.width,f=f||g.height;const _=Object(o.a)(g.gl);if(d=d||(a?a.type:5121),!a){const t=u(s),e=function(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return Object(c.a)(!1),0}}(d),n=l+h*f*t*e;a=new r.a(_,{byteLength:n,accessor:{type:d,size:t}})}return a.bind({target:35051}),Object(o.o)(_,{framebuffer:g},()=>{_.readPixels(n,i,h,f,s,d,l)}),a.unbind({target:35051}),p&&g.delete(),a}function d(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=h(t,{sourceAttachment:e}),{width:i,height:s}=t;for(;s>n;)({data:r,width:i,height:s}=Object(a.d)({data:r,width:i,height:s}));Object(a.a)({data:r,width:i,height:s});const o=document.createElement("canvas");o.width=i,o.height=s;const c=o.getContext("2d"),u=c.createImageData(i,s);return u.data.set(r),c.putImageData(u,0,0),o.toDataURL()}function g(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:r=0,sourceY:i=0,targetMipmaplevel:a=0,targetInternalFormat:u=6408}=n;let{targetX:l,targetY:h,targetZ:f,width:d,height:g}=n;const{framebuffer:p,deleteFramebuffer:_}=m(t);Object(c.a)(p);const{gl:b,handle:A}=p,E=void 0!==l||void 0!==h||void 0!==f;l=l||0,h=h||0,f=f||0;const y=b.bindFramebuffer(36160,A);Object(c.a)(e);let v=null;if(e instanceof s.a&&(v=e,d=Number.isFinite(d)?d:v.width,g=Number.isFinite(g)?g:v.height,v.bind(0),e=v.target),E)switch(e){case 3553:case 34067:b.copyTexSubImage2D(e,a,l,h,r,i,d,g);break;case 35866:case 32879:Object(o.a)(b).copyTexSubImage3D(e,a,l,h,f,r,i,d,g)}else b.copyTexImage2D(e,a,u,r,i,d,g,0);return v&&v.unbind(),b.bindFramebuffer(36160,y||null),_&&p.delete(),v}function m(t){return t instanceof i.a?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:Object(l.b)(t),deleteFramebuffer:!0}}function p(t,e,n,r,i){if(t)return t;e=e||5121;return new(Object(a.c)(e,{clamped:!1}))(r*i*u(n))}},956:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return c}));var r=n(808);const i={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function s(t){let e=o(t);return"object"===e?t?"type"in t?Object.assign({},t,i[t.type]):"value"in t?(e=o(t.value),Object.assign({type:e},t,i[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},i[e])}function o(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class a{constructor(t){let{name:e,vs:n,fs:i,dependencies:o=[],uniforms:a,getUniforms:c,deprecations:u=[],defines:l={},inject:h={},vertexShader:f,fragmentShader:d}=t;Object(r.a)("string"==typeof e),this.name=e,this.vs=n||f,this.fs=i||d,this.getModuleUniforms=c,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(u),this.defines=l,this.injections=function(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const i=n.slice(0,2);"string"==typeof r&&(r={order:0,injection:r}),e[i][n]=r}return e}(h),a&&(this.uniforms=function(t){const e={};for(const n in t){const r=s(t[n]);e[n]=r}return e}(a))}getModuleSource(t){let e;switch(t){case"vs":e=this.vs||"";break;case"fs":e=this.fs||"";break;default:Object(r.a)(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(e,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,e){this.deprecations.forEach(n=>{n.regex.test(t)&&(n.deprecated?e.deprecated(n.old,n.new)():e.removed(n.old,n.new)())})}_parseDeprecationDefinitions(t){return t.forEach(t=>{switch(t.type){case"function":t.regex=new RegExp("\\b".concat(t.old,"\\("));break;default:t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))}}),t}_defaultGetUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e={},n=this.uniforms;for(const i in n){const s=n[i];i in t&&!s.private?(s.validate&&Object(r.a)(s.validate(t[i],s),"".concat(this.name,": invalid ").concat(i)),e[i]=t[i]):e[i]=s.value}return e}}function c(t){if(!t.normalized&&(t.normalized=!0,t.uniforms&&!t.getUniforms)){const e=new a(t);t.getUniforms=e.getUniforms.bind(e)}return t}},958:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(778),i=n(1457);let s=function(t){return t[t.Point=1]="Point",t[t.LineString=2]="LineString",t[t.Polygon=3]="Polygon",t[t.MultiPoint=4]="MultiPoint",t[t.MultiLineString=5]="MultiLineString",t[t.MultiPolygon=6]="MultiPolygon",t[t.GeometryCollection=7]="GeometryCollection",t}({});function o(t,e){var n;const r=function(t,e){const n=new DataView(t),r=function(t,e){const n=Object.assign(e||{},{type:"wkb",geometryType:1,dimensions:2,coordinates:"xy",littleEndian:!0,byteOffset:0});n.littleEndian=1===t.getUint8(n.byteOffset),n.byteOffset++;const r=t.getUint32(n.byteOffset,n.littleEndian);n.byteOffset+=4,n.geometryType=7&r;const i=(r-n.geometryType)/1e3;switch(i){case 0:break;case 1:n.type="iso-wkb",n.dimensions=3,n.coordinates="xyz";break;case 2:n.type="iso-wkb",n.dimensions=3,n.coordinates="xym";break;case 3:n.type="iso-wkb",n.dimensions=4,n.coordinates="xyzm";break;default:throw new Error("WKB: Unsupported iso-wkb type: "+i)}const s=2147483648&r,o=1073741824&r,a=536870912&r;return s&&o?(n.type="ewkb",n.dimensions=4,n.coordinates="xyzm"):s?(n.type="ewkb",n.dimensions=3,n.coordinates="xyz"):o&&(n.type="ewkb",n.dimensions=3,n.coordinates="xym"),a&&(n.type="ewkb",n.srid=t.getUint32(n.byteOffset,n.littleEndian),n.byteOffset+=4),n}(n),{geometryType:i,dimensions:o,littleEndian:f}=r,d=r.byteOffset;switch(i){case s.Point:return a(n,d,o,f).geometry;case s.LineString:return c(n,d,o,f).geometry;case s.Polygon:return l(n,d,o,f).geometry;case s.MultiPoint:const t=function(t,e,n,r){const i=t.getUint32(e,r);e+=4;const s=[];for(let r=0;r<i;r++){const r=1===t.getUint8(e);if(e++,t.getUint32(e,r)%1e3!=1)throw new Error("WKB: Inner geometries of MultiPoint not of type Point");const i=a(t,e+=4,n,r);e=i.offset,s.push(i.geometry)}return function(t,e){const n=t.map(t=>t.positions.value);return{type:"Point",positions:{value:new Float64Array(h(n).buffer),size:e}}}(s,n)}(n,d,o,f);return t.type="Point",t;case s.MultiLineString:const e=function(t,e,n,r){const i=t.getUint32(e,r);e+=4;const s=[];for(let r=0;r<i;r++){const r=1===t.getUint8(e);if(e++,t.getUint32(e,r)%1e3!=2)throw new Error("WKB: Inner geometries of MultiLineString not of type LineString");const i=c(t,e+=4,n,r);e=i.offset,s.push(i.geometry)}return function(t,e){const n=t.map(t=>t.positions.value),r=new Float64Array(h(n).buffer),i=n.map(t=>t.length/e).map(u(0));return i.unshift(0),{type:"LineString",positions:{value:r,size:e},pathIndices:{value:new Uint16Array(i),size:1}}}(s,n)}(n,d,o,f);return e.type="LineString",e;case s.MultiPolygon:const r=function(t,e,n,r){const i=t.getUint32(e,r);e+=4;const s=[];for(let r=0;r<i;r++){const r=1===t.getUint8(e);if(e++,t.getUint32(e,r)%1e3!=3)throw new Error("WKB: Inner geometries of MultiPolygon not of type Polygon");const i=l(t,e+=4,n,r);e=i.offset,s.push(i.geometry)}return function(t,e){const n=[],r=[];for(const e of t){const{positions:t,primitivePolygonIndices:i}=e;n.push(t.value),r.push(i.value)}const i=new Float64Array(h(n).buffer),s=n.map(t=>t.length/e).map(u(0));s.unshift(0);const o=[0];for(const t of r)o.push(...t.filter(t=>t>0).map(t=>t+o[o.length-1]));return{type:"Polygon",positions:{value:i,size:e},polygonIndices:{value:new Uint16Array(s),size:1},primitivePolygonIndices:{value:new Uint16Array(o),size:1}}}(s,n)}(n,d,o,f);return r.type="Polygon",r;default:throw new Error("WKB: Unsupported geometry type: "+i)}}(t),o=(null==e||null===(n=e.wkb)||void 0===n?void 0:n.shape)||"binary-geometry";switch(o){case"binary-geometry":return r;case"geojson-geometry":return Object(i.a)(r);case"geometry":return console.error('WKBLoader: "geometry" shape is deprecated, use "binary-geometry" instead'),Object(i.a)(r);default:throw new Error(o)}}function a(t,e,n,r){const i=new Float64Array(n);for(let s=0;s<n;s++)i[s]=t.getFloat64(e,r),e+=8;return{geometry:{type:"Point",positions:{value:i,size:n}},offset:e}}function c(t,e,n,r){const i=t.getUint32(e,r);e+=4;const s=new Float64Array(i*n);for(let o=0;o<i*n;o++)s[o]=t.getFloat64(e,r),e+=8;const o=[0];return i>0&&o.push(i),{geometry:{type:"LineString",positions:{value:s,size:n},pathIndices:{value:new Uint16Array(o),size:1}},offset:e}}const u=t=>e=>t+=e;function l(t,e,n,r){const i=t.getUint32(e,r);e+=4;const s=[];for(let o=0;o<i;o++){const i=c(t,e,n,r),{positions:o}=i.geometry;e=i.offset,s.push(o.value)}const o=new Float64Array(h(s).buffer),a=[0];o.length>0&&a.push(o.length/n);const l=s.map(t=>t.length/n).map(u(0));return l.unshift(0),{geometry:{type:"Polygon",positions:{value:o,size:n},polygonIndices:{value:new Uint16Array(a),size:1},primitivePolygonIndices:{value:new Uint16Array(l),size:1}},offset:e}}function h(t){let e=0;for(let n=0;n<t.length;++n)e+=t[n].byteLength;const n=new Uint8Array(e);let r=0;for(let i=0;i<t.length;++i){const s=new Uint8Array(t[i].buffer);e=s.length;for(let t=0;t<e;++t)n[r++]=s[t]}return n}const f={...{name:"WKB",id:"wkb",module:"wkt",version:r.a,worker:!0,category:"geometry",extensions:["wkb"],mimeTypes:[],tests:[function(t){const e=new DataView(t);let n=0;const r=e.getUint8(n);if(n+=1,r>1)return!1;const i=1===r,s=e.getUint32(n,i);n+=4;const o=7&s;if(0===o||o>7)return!1;const a=s-o;if(0===a||1e3===a||2e3===a||3e3===a)return!0;if(0!=(536870911&a))return!1;if(536870912&a){const t=e.getUint32(n,i);if(n+=4,t>1e4)return!1}return!0}],options:{wkb:{shape:"binary-geometry"}}},parse:async t=>o(t),parseSync:o}},959:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(778);const i=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,s=new RegExp("^"+i.source+"(\\s"+i.source+"){1,}"),o=["POINT(","LINESTRING(","POLYGON(","MULTIPOINT(","MULTILINESTRING(","MULTIPOLYGON(","GEOMETRYCOLLECTION("];function a(t,e){return function(t,e){var n;const r=t.split(";");let i=r.pop();const s=(r.shift()||"").split("=").pop(),o=c({parts:r,_:i,i:0});return null!=e&&null!==(n=e.wkt)&&void 0!==n&&n.crs?function(t,e){if(t&&null!=e&&e.match(/\d+/)){const n={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+e}};t.crs=n}return t}(o,s):o}(t,e)}function c(t){return function(t){if(!h(/^(POINT(\sz)?)/i,t))return null;if(f(t),!h(/^(\()/,t))return null;const e=l(t);if(!e)return null;if(f(t),!h(/^(\))/,t))return null;return{type:"Point",coordinates:e[0]}}(t)||function(t){if(!h(/^(LINESTRING(\sz)?)/i,t))return null;if(f(t),!h(/^(\()/,t))return null;const e=l(t);if(!e)return null;if(!h(/^(\))/,t))return null;return{type:"LineString",coordinates:e}}(t)||function(t){if(!h(/^(POLYGON(\sz)?)/i,t))return null;f(t);const e=u(t);if(!e)return null;return{type:"Polygon",coordinates:e}}(t)||function(t){var e,n;if(!h(/^(MULTIPOINT)/i,t))return null;f(t);const r=null===(e=t._)||void 0===e?void 0:e.substring((null===(n=t._)||void 0===n?void 0:n.indexOf("("))+1,t._.length-1).replace(/\(/g,"").replace(/\)/g,"");t._="MULTIPOINT ("+r+")";const i=u(t);if(!i)return null;return f(t),{type:"MultiPoint",coordinates:i}}(t)||function(t){if(!h(/^(MULTILINESTRING)/i,t))return null;f(t);const e=u(t);if(!e)return null;return f(t),{type:"MultiLineString",coordinates:e}}(t)||function(t){if(!h(/^(MULTIPOLYGON)/i,t))return null;f(t);const e=u(t);if(!e)return null;return{type:"MultiPolygon",coordinates:e}}(t)||function(t){const e=[];let n;if(!h(/^(GEOMETRYCOLLECTION)/i,t))return null;if(f(t),!h(/^(\()/,t))return null;for(;n=c(t);)e.push(n),f(t),h(/^(,)/,t),f(t);if(!h(/^(\))/,t))return null;return{type:"GeometryCollection",geometries:e}}(t)}function u(t){f(t);let e=0;const n=[],r=[n];let i,o=n;for(;i=h(/^(\()/,t)||h(/^(\))/,t)||h(/^(,)/,t)||h(s,t);){if("("===i)r.push(o),o=[],r[r.length-1].push(o),e++;else if(")"===i){if(0===o.length)return null;if(o=r.pop(),!o)return null;if(e--,0===e)break}else if(","===i)o=[],r[r.length-1].push(o);else{if(i.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(o,i.split(/\s/g).map(parseFloat))}f(t)}return 0!==e?null:n}function l(t){const e=[];let n,r;for(;r=h(s,t)||h(/^(,)/,t);)","===r?(e.push(n),n=[]):r.split(/\s/g).some(isNaN)||(n||(n=[]),Array.prototype.push.apply(n,r.split(/\s/g).map(parseFloat))),f(t);return n?(e.push(n),e.length?e:null):null}function h(t,e){var n;const r=null===(n=e._)||void 0===n?void 0:n.substring(e.i).match(t);return r?(e.i+=r[0].length,r[0]):null}function f(t){h(/^\s*/,t)}const d={...{name:"WKT (Well-Known Text)",id:"wkt",module:"wkt",version:r.a,worker:!0,extensions:["wkt"],mimeTypes:["text/plain"],category:"geometry",text:!0,tests:o,testText:function(t){return o.some(e=>t.startsWith(e))},options:{wkt:{shape:"geojson-geometry",crs:!0}}},parse:async(t,e)=>a((new TextDecoder).decode(t),e),parseTextSync:a}}}]);
//# sourceMappingURL=12.bundle.js.map